/*! For license information please see main.d3e7933f.js.LICENSE.txt */
!function(){"use strict";var e={463:function(e,t,n){var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),x=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function j(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function B(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case x:return"Portal";case S:return"Profiler";case I:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function X(e,t){J(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ae(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,_e=null,Ie=null;function Se(e){if(e=ki(e)){if("function"!==typeof xe)throw Error(a(280));var t=e.stateNode;t&&(t=bi(t),xe(e.stateNode,e.type,t))}}function Ee(e){_e?Ie?Ie.push(e):Ie=[e]:_e=e}function Te(){if(_e){var e=_e,t=Ie;if(Ie=_e=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function Re(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==_e||null!==Ie)&&(Ne(),Te())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=bi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Pe=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){Pe=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,je=!1,Ue=null,Ve={onError:function(e){Me=!0,Fe=e}};function Be(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(Ve,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(ze(e)!==e)throw Error(a(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,$e=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Je=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,xt,_t,It,St,Et=!1,Tt=[],Ct=null,Nt=null,At=null,Rt=new Map,Dt=new Map,Pt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void St(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Ut(e,t,n){jt(e)&&n.delete(t)}function Vt(){Et=!1,null!==Ct&&jt(Ct)&&(Ct=null),null!==Nt&&jt(Nt)&&(Nt=null),null!==At&&jt(At)&&(At=null),Rt.forEach(Ut),Dt.forEach(Ut)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function zt(e){function t(t){return Bt(t,e)}if(0<Tt.length){Bt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==Nt&&Bt(Nt,e),null!==At&&Bt(At,e),Rt.forEach(t),Dt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Pt.shift()}var qt=w.ReactCurrentBatchConfig,Kt=!0;function Gt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Wt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Ht(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Wt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Wt(e,t,n,r){if(Kt){var i=$t(e,t,n,r);if(null===i)Kr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Rt.set(a,Mt(Rt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Dt.set(a,Mt(Dt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&bt(a),null===(a=$t(e,t,n,r))&&Kr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function $t(e,t,n,r){if(Qt=null,null!==(e=gi(e=be(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),mn=an(F({},fn,{relatedTarget:0})),yn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),wn=an(F({},cn,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function Sn(){return In}var En=F({},fn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(En),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),An=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=an(Rn),Pn=[9,13,27,32],On=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!On||Ln&&8<Ln&&11>=Ln),jn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Gn(e,t,n,r){Ee(r),0<(t=Hr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Wn=null;function Qn(e){jr(e,0)}function $n(e){if(W(wi(e)))return e}function Yn(e,t){if("change"===e)return t}var Jn=!1;if(l){var Xn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Jn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Wn=Hn=null)}function nr(e){if("value"===e.propertyName&&$n(Wn)){var t=[];Gn(t,Wn,e,be(e)),Re(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Wn)}function ar(e,t){if("click"===e)return $n(t)}function or(e,t){if("input"===e||"change"===e)return $n(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,kr=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Hr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function br(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},_r={},Ir={};function Sr(e){if(_r[e])return _r[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return _r[e]=n[t];return e}l&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Er=Sr("animationend"),Tr=Sr("animationiteration"),Cr=Sr("animationstart"),Nr=Sr("transitionend"),Ar=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Ar.set(e,t),s(t,[e])}for(var Pr=0;Pr<Rr.length;Pr++){var Or=Rr[Pr];Dr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Dr(Er,"onAnimationEnd"),Dr(Tr,"onAnimationIteration"),Dr(Cr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(Be.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,je||(je=!0,Ue=l)}}(r,t,void 0,e),e.currentTarget=null}function jr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(je)throw e=Ue,je=!1,Ue=null,e}function Ur(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Yt(t)){case 1:var i=Gt;break;case 4:i=Ht;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Re((function(){var r=a,i=be(n),o=[];e:{var u=Ar.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=mn;break;case"focusout":c="blur",s=mn;break;case"beforeblur":case"afterblur":s=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Nn;break;case Er:case Tr:case Cr:s=yn;break;case Nr:s=An;break;case"scroll":s=hn;break;case"wheel":s=Dn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=De(p,h))&&l.push(Gr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:wi(s),d=null==c?u:wi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Wr(d))p++;for(d=0,v=h;v;v=Wr(v))d++;for(;0<p-d;)l=Wr(l),p--;for(;0<d-p;)h=Wr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Wr(l),h=Wr(h)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?wi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=Yn;else if(Kn(u))if(Jn)m=or;else{m=ir;var y=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=ar);switch(m&&(m=m(e,r))?Gn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ee(u,"number",u.value)),y=r?wi(r):window,e){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,wr(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":wr(o,n,i)}var g;if(On)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else zn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==k?"onCompositionEnd"===k&&zn&&(g=en()):(Xt="value"in(Jt=i)?Jt.value:Jt.textContent,zn=!0)),0<(y=Hr(r,k)).length&&(k=new wn(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=Bn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Un=!0,jn);case"textInput":return(e=t.data)===jn&&Un?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!On&&Vn(e,t)?(e=en(),Zt=Xt=Jt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}jr(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=De(e,n))&&r.unshift(Gr(e,a,i)),null!=(a=De(e,t))&&r.push(Gr(e,a,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=De(n,a))&&o.unshift(Gr(n,s,u)):i||null!=(s=De(n,a))&&o.push(Gr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var $r=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Yr,"")}function Xr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,mi="__reactListeners$"+fi,yi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function bi(e){return e[di]||null}var xi=[],_i=-1;function Ii(e){return{current:e}}function Si(e){0>_i||(e.current=xi[_i],xi[_i]=null,_i--)}function Ei(e,t){_i++,xi[_i]=e.current,e.current=t}var Ti={},Ci=Ii(Ti),Ni=Ii(!1),Ai=Ti;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Di(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){Si(Ni),Si(Ci)}function Oi(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Ei(Ci,t),Ei(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ai=Ci.current,Ei(Ci,e),Ei(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Si(Ni),Si(Ci),Ei(Ci,e)):Si(Ni),Ei(Ni,n)}var ji=null,Ui=!1,Vi=!1;function Bi(e){null===ji?ji=[e]:ji.push(e)}function zi(){if(!Vi&&null!==ji){Vi=!0;var e=0,t=kt;try{var n=ji;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}ji=null,Ui=!1}catch(i){throw null!==ji&&(ji=ji.slice(e+1)),We(Ze,zi),i}finally{kt=t,Vi=!1}}return null}var qi=[],Ki=0,Gi=null,Hi=0,Wi=[],Qi=0,$i=null,Yi=1,Ji="";function Xi(e,t){qi[Ki++]=Hi,qi[Ki++]=Gi,Gi=e,Hi=t}function Zi(e,t,n){Wi[Qi++]=Yi,Wi[Qi++]=Ji,Wi[Qi++]=$i,$i=e;var r=Yi;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,Ji=a+e}else Yi=1<<a|n<<i|r,Ji=e}function ea(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ta(e){for(;e===Gi;)Gi=qi[--Ki],qi[Ki]=null,Hi=qi[--Ki],qi[Ki]=null;for(;e===$i;)$i=Wi[--Qi],Wi[Qi]=null,Ji=Wi[--Qi],Wi[Qi]=null,Yi=Wi[--Qi],Wi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$i?{id:Yi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=w.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=Ii(null),ga=null,ka=null,wa=null;function ba(){wa=ka=ga=null}function xa(e){var t=ya.current;Si(ya),e._currentValue=t}function _a(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ia(e,t){ga=e,wa=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wu=!0),e.firstContext=null)}function Sa(e){var t=e._currentValue;if(wa!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ea=null;function Ta(e){null===Ea?Ea=[e]:Ea.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Aa=!1;function Ra(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Da(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Pa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cs)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Aa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:Aa=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ms|=o,e.lanes=o,e.memoizedState=f}}function ja(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ua=(new r.Component).refs;function Va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ba={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Pa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Pa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Pa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Oa(e,i,r))&&(nc(t,e,r,n),La(t,e,r))}};function za(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function qa(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Sa(a):(i=Di(t)?Ai:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ba,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ka(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ba.enqueueReplaceState(t,t.state,null)}function Ga(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ua,Ra(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Sa(a):(a=Di(t)?Ai:Ci.current,i.context=Ri(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Ba.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ha(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Wa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function $a(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===_?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===D&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ha(e,t,n),r.return=e,r):((r=Oc(n.type,n.key,n.props,null,e.mode,r)).ref=Ha(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=jc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=Ha(e,null,t),n.return=e,n;case x:return(t=jc(t,e.mode,n)).return=e,t;case D:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Wa(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null;case D:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Wa(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case D:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Wa(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,u[v],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===u.length)return n(i,f),ia&&Xi(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Xi(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(m=p(f,i,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),ia&&Xi(i,v),c}function m(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,m=u=0,y=null,g=s.next();null!==v&&!g.done;m++,g=s.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,m),null===f?l=k:f.sibling=k,f=k,v=y}if(g.done)return n(i,v),ia&&Xi(i,m),l;if(null===v){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return ia&&Xi(i,m),l}for(v=r(i,v);!g.done;m++,g=s.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Xi(i,m),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===_&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case b:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===_){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ha(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===_?((a=Lc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Oc(o.type,o.key,o.props,null,r.mode,s)).ref=Ha(r,a,o),s.return=r,r=s)}return u(r);case x:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=jc(o,r.mode,s)).return=r,r=a}return u(r);case D:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return m(r,a,o,s);Wa(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Fc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Ya=$a(!0),Ja=$a(!1),Xa={},Za=Ii(Xa),eo=Ii(Xa),to=Ii(Xa);function no(e){if(e===Xa)throw Error(a(174));return e}function ro(e,t){switch(Ei(to,t),Ei(eo,e),Ei(Za,Xa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Za),Ei(Za,t)}function io(){Si(Za),Si(eo),Si(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Ei(eo,e),Ei(Za,n))}function oo(e){eo.current===e&&(Si(Za),Si(eo))}var uo=Ii(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=w.ReactCurrentDispatcher,ho=w.ReactCurrentBatchConfig,po=0,vo=null,mo=null,yo=null,go=!1,ko=!1,wo=0,bo=0;function xo(){throw Error(a(321))}function _o(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Io(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,wo=0,25<=o)throw Error(a(301));o+=1,yo=mo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==mo&&null!==mo.next,po=0,yo=mo=vo=null,go=!1,t)throw Error(a(300));return e}function So(){var e=0!==wo;return wo=0,e}function Eo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?vo.memoizedState=yo=e:yo=yo.next=e,yo}function To(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?vo.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?vo.memoizedState=yo=e:yo=yo.next=e}return yo}function Co(e,t){return"function"===typeof t?t(e):t}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,vo.lanes|=f,Ms|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(wu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Ms|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(wu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ro(){}function Do(e,t){var n=vo,r=To(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,wu=!0),r=r.queue,Ko(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,Uo(9,Oo.bind(null,n,r,i,t),void 0,null),null===Ns)throw Error(a(349));0!==(30&po)||Po(n,t,i)}return i}function Po(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Na(e,1);null!==t&&nc(t,e,1,-1)}function jo(e){var t=Eo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function Uo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return To().memoizedState}function Bo(e,t,n,r){var i=Eo();vo.flags|=e,i.memoizedState=Uo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&_o(r,o.deps))return void(i.memoizedState=Uo(t,n,a,r))}vo.flags|=e,i.memoizedState=Uo(1|t,n,a,r)}function qo(e,t){return Bo(8390656,8,e,t)}function Ko(e,t){return zo(2048,8,e,t)}function Go(e,t){return zo(4,2,e,t)}function Ho(e,t){return zo(4,4,e,t)}function Wo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Wo.bind(null,t,e),n)}function $o(){}function Yo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,wu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Ms|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return To().memoizedState}function tu(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){nc(n,e,r,ec()),au(n,t,r)}}function nu(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ta(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(nc(n,e,r,i=ec()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Sa,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useInsertionEffect:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useSyncExternalStore:xo,useId:xo,unstable_isNewReconciler:!1},uu={readContext:Sa,useCallback:function(e,t){return Eo().memoizedState=[e,void 0===t?null:t],e},useContext:Sa,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4194308,4,Wo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bo(4,2,e,t)},useMemo:function(e,t){var n=Eo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Eo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Eo().memoizedState=e},useState:jo,useDebugValue:$o,useDeferredValue:function(e){return Eo().memoizedState=e},useTransition:function(){var e=jo(!1),t=e[0];return e=Zo.bind(null,e[1]),Eo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=Eo();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ns)throw Error(a(349));0!==(30&po)||Po(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Uo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Eo(),t=Ns.identifierPrefix;if(ia){var n=Ji;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=wo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=bo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Sa,useCallback:Yo,useContext:Sa,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Ho,useMemo:Jo,useReducer:No,useRef:Vo,useState:function(){return No(Co)},useDebugValue:$o,useDeferredValue:function(e){return Xo(To(),mo.memoizedState,e)},useTransition:function(){return[No(Co)[0],To().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Do,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Sa,useCallback:Yo,useContext:Sa,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Ho,useMemo:Jo,useReducer:Ao,useRef:Vo,useState:function(){return Ao(Co)},useDebugValue:$o,useDeferredValue:function(e){var t=To();return null===mo?t.memoizedState=e:Xo(t,mo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],To().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Do,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Pa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ks||(Ks=!0,Gs=r),hu(0,t)},n}function vu(e,t,n){(n=Pa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Hs?Hs=new Set([this]):Hs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function yu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Pa(-1,1)).tag=2,Oa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=w.ReactCurrentOwner,wu=!1;function bu(e,t,n,r){t.child=null===e?Ja(t,null,n,r):Ya(t,e.child,n,r)}function xu(e,t,n,r,i){n=n.render;var a=t.ref;return Ia(t,i),r=Io(e,t,n,r,a,i),n=So(),null===e||wu?(ia&&n&&ea(t),t.flags|=1,bu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function _u(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Dc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Iu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Ku(e,t,i)}return t.flags|=1,(e=Pc(a,r)).ref=t.ref,e.return=t,t.child=e}function Iu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(wu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ku(e,t,i);0!==(131072&e.flags)&&(wu=!0)}}return Tu(e,t,n,r,i)}function Su(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ei(Ps,Ds),Ds|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ei(Ps,Ds),Ds|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ei(Ps,Ds),Ds|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ei(Ps,Ds),Ds|=r;return bu(e,t,i,n),t.child}function Eu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Tu(e,t,n,r,i){var a=Di(n)?Ai:Ci.current;return a=Ri(t,a),Ia(t,i),n=Io(e,t,n,r,a,i),r=So(),null===e||wu?(ia&&r&&ea(t),t.flags|=1,bu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function Cu(e,t,n,r,i){if(Di(n)){var a=!0;Mi(t)}else a=!1;if(Ia(t,i),null===t.stateNode)qu(e,t),qa(t,n,r),Ga(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Sa(c):c=Ri(t,c=Di(n)?Ai:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Ka(t,o,r,c),Aa=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ni.current||Aa?("function"===typeof l&&(Va(t,n,l,r),s=t.memoizedState),(u=Aa||za(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Da(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ma(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Sa(s):s=Ri(t,s=Di(n)?Ai:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Ka(t,o,r,s),Aa=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ni.current||Aa?("function"===typeof d&&(Va(t,n,d,r),p=t.memoizedState),(c=Aa||za(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Nu(e,t,n,r,a,i)}function Nu(e,t,n,r,i,a){Eu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ku(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ya(t,e.child,null,a),t.child=Ya(t,null,u,a)):bu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Au(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Ru(e,t,n,r,i){return da(),pa(i),t.flags|=256,bu(e,t,n,r),t.child}var Du,Pu,Ou,Lu={dehydrated:null,treeContext:null,retryLane:0};function Mu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ei(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Mc(s,i,0,null),e=Lc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Mu(n),t.memoizedState=Lu,e):ju(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,Uu(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ya(t,e.child,null,u),t.child.memoizedState=Mu(u),t.memoizedState=Lu,o);if(0===(1&t.mode))return Uu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Uu(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),wu||s){if(null!==(r=Ns)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),nc(r,e,i,-1))}return vc(),Uu(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Wi[Qi++]=Yi,Wi[Qi++]=Ji,Wi[Qi++]=$i,Yi=e.id,Ji=e.overflow,$i=t),(t=ju(t,r.children)).flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Pc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Pc(r,u):(u=Lc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Mu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Lu,i}return e=(u=e.child).sibling,i=Pc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function ju(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Uu(e,t,n,r){return null!==r&&pa(r),Ya(t,e.child,null,n),(e=ju(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_a(e.return,t,n)}function Bu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function zu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(bu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vu(e,n,t);else if(19===e.tag)Vu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ei(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bu(t,!0,n,null,a);break;case"together":Bu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qu(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ku(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ms|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Pc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Hu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Wu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hu(t),null;case 1:case 17:return Di(t.type)&&Pi(),Hu(t),null;case 3:return r=t.stateNode,io(),Si(Ni),Si(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(oc(aa),aa=null))),Hu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Pu(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Hu(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":Y(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Ur("scroll",r)}switch(n){case"input":H(r),Z(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Du(e,t),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":Y(e,r),i=$(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Ur("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hu(t),null;case 6:if(e&&null!=t.stateNode)Ou(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Hu(t),null;case 13:if(Si(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hu(t),o=!1}else null!==aa&&(oc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Os&&(Os=3):vc())),null!==t.updateQueue&&(t.flags|=4),Hu(t),null);case 4:return io(),null===e&&zr(t.stateNode.containerInfo),Hu(t),null;case 10:return xa(t.type._context),Hu(t),null;case 19:if(Si(uo),null===(o=t.memoizedState))return Hu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Gu(o,!1);else{if(0!==Os||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Gu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ei(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>zs&&(t.flags|=128,r=!0,Gu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Gu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Hu(t),null}else 2*Je()-o.renderingStartTime>zs&&1073741824!==n&&(t.flags|=128,r=!0,Gu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=uo.current,Ei(uo,r?1&n|2:1&n),t):(Hu(t),null);case 22:case 23:return fc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ds)&&(Hu(t),6&t.subtreeFlags&&(t.flags|=8192)):Hu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Qu(e,t){switch(ta(t),t.tag){case 1:return Di(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Si(Ni),Si(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Si(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(uo),null;case 4:return io(),null;case 10:return xa(t.type._context),null;case 22:case 23:return fc(),null;default:return null}}Du=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Pu=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=$(e,i),r=$(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Ur("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Ou=function(e,t,n,r){n!==r&&(t.flags|=4)};var $u=!1,Yu=!1,Ju="function"===typeof WeakSet?WeakSet:Set,Xu=null;function Zu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ic(e,t,r)}else n.current=null}function es(e,t,n){try{n()}catch(r){Ic(e,t,r)}}var ts=!1;function ns(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&es(t,n,a)}i=i.next}while(i!==r)}}function rs(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function is(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function as(e){var t=e.alternate;null!==t&&(e.alternate=null,as(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function os(e){return 5===e.tag||3===e.tag||4===e.tag}function us(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||os(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ss(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ss(e,t,n),e=e.sibling;null!==e;)ss(e,t,n),e=e.sibling}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}var ls=null,fs=!1;function hs(e,t,n){for(n=n.child;null!==n;)ds(e,t,n),n=n.sibling}function ds(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Yu||Zu(n,t);case 6:var r=ls,i=fs;ls=null,hs(e,t,n),fs=i,null!==(ls=r)&&(fs?(e=ls,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ls.removeChild(n.stateNode));break;case 18:null!==ls&&(fs?(e=ls,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),zt(e)):si(ls,n.stateNode));break;case 4:r=ls,i=fs,ls=n.stateNode.containerInfo,fs=!0,hs(e,t,n),ls=r,fs=i;break;case 0:case 11:case 14:case 15:if(!Yu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&es(n,t,o),i=i.next}while(i!==r)}hs(e,t,n);break;case 1:if(!Yu&&(Zu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ic(n,t,u)}hs(e,t,n);break;case 21:hs(e,t,n);break;case 22:1&n.mode?(Yu=(r=Yu)||null!==n.memoizedState,hs(e,t,n),Yu=r):hs(e,t,n);break;default:hs(e,t,n)}}function ps(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ju),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vs(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:ls=s.stateNode,fs=!1;break e;case 3:case 4:ls=s.stateNode.containerInfo,fs=!0;break e}s=s.return}if(null===ls)throw Error(a(160));ds(o,u,i),ls=null,fs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ic(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ms(t,e),t=t.sibling}function ms(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vs(t,e),ys(e),4&r){try{ns(3,e,e.return),rs(3,e)}catch(m){Ic(e,e.return,m)}try{ns(5,e,e.return)}catch(m){Ic(e,e.return,m)}}break;case 1:vs(t,e),ys(e),512&r&&null!==n&&Zu(n,n.return);break;case 5:if(vs(t,e),ys(e),512&r&&null!==n&&Zu(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){Ic(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&J(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?me(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":X(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){Ic(e,e.return,m)}}break;case 6:if(vs(t,e),ys(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Ic(e,e.return,m)}}break;case 3:if(vs(t,e),ys(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(m){Ic(e,e.return,m)}break;case 4:default:vs(t,e),ys(e);break;case 13:vs(t,e),ys(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bs=Je())),4&r&&ps(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Yu=(l=Yu)||f,vs(t,e),Yu=l):vs(t,e),ys(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Xu=e,f=e.child;null!==f;){for(h=Xu=f;null!==Xu;){switch(p=(d=Xu).child,d.tag){case 0:case 11:case 14:case 15:ns(4,d,d.return);break;case 1:Zu(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Ic(r,n,m)}}break;case 5:Zu(d,d.return);break;case 22:if(null!==d.memoizedState){bs(h);continue}}null!==p?(p.return=d,Xu=p):bs(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(m){Ic(e,e.return,m)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(m){Ic(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:vs(t,e),ys(e),4&r&&ps(e);case 21:}}function ys(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(os(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cs(e,us(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ss(e,us(e),o);break;default:throw Error(a(161))}}catch(u){Ic(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gs(e,t,n){Xu=e,ks(e,t,n)}function ks(e,t,n){for(var r=0!==(1&e.mode);null!==Xu;){var i=Xu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$u;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Yu;u=$u;var c=Yu;if($u=o,(Yu=s)&&!c)for(Xu=i;null!==Xu;)s=(o=Xu).child,22===o.tag&&null!==o.memoizedState?xs(i):null!==s?(s.return=o,Xu=s):xs(i);for(;null!==a;)Xu=a,ks(a,t,n),a=a.sibling;Xu=i,$u=u,Yu=c}ws(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Xu=a):ws(e)}}function ws(e){for(;null!==Xu;){var t=Xu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Yu||rs(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Yu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&ja(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}ja(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(a(163))}Yu||512&t.flags&&is(t)}catch(d){Ic(t,t.return,d)}}if(t===e){Xu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xu=n;break}Xu=t.return}}function bs(e){for(;null!==Xu;){var t=Xu;if(t===e){Xu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xu=n;break}Xu=t.return}}function xs(e){for(;null!==Xu;){var t=Xu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rs(4,t)}catch(s){Ic(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Ic(t,i,s)}}var a=t.return;try{is(t)}catch(s){Ic(t,a,s)}break;case 5:var o=t.return;try{is(t)}catch(s){Ic(t,o,s)}}}catch(s){Ic(t,t.return,s)}if(t===e){Xu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Xu=u;break}Xu=t.return}}var _s,Is=Math.ceil,Ss=w.ReactCurrentDispatcher,Es=w.ReactCurrentOwner,Ts=w.ReactCurrentBatchConfig,Cs=0,Ns=null,As=null,Rs=0,Ds=0,Ps=Ii(0),Os=0,Ls=null,Ms=0,Fs=0,js=0,Us=null,Vs=null,Bs=0,zs=1/0,qs=null,Ks=!1,Gs=null,Hs=null,Ws=!1,Qs=null,$s=0,Ys=0,Js=null,Xs=-1,Zs=0;function ec(){return 0!==(6&Cs)?Je():-1!==Xs?Xs:Xs=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cs)&&0!==Rs?Rs&-Rs:null!==va.transition?(0===Zs&&(Zs=vt()),Zs):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nc(e,t,n,r){if(50<Ys)throw Ys=0,Js=null,Error(a(185));yt(e,n,r),0!==(2&Cs)&&e===Ns||(e===Ns&&(0===(2&Cs)&&(Fs|=n),4===Os&&uc(e,Rs)),rc(e,r),1===n&&0===Cs&&0===(1&t.mode)&&(zs=Je()+500,Ui&&zi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Ns?Rs:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,Bi(e)}(sc.bind(null,e)):Bi(sc.bind(null,e)),oi((function(){0===(6&Cs)&&zi()})),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Xs=-1,Zs=0,0!==(6&Cs))throw Error(a(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ht(e,e===Ns?Rs:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=Cs;Cs|=2;var o=pc();for(Ns===e&&Rs===t||(qs=null,zs=Je()+500,hc(e,t));;)try{gc();break}catch(s){dc(e,s)}ba(),Ss.current=o,Cs=i,null!==As?t=0:(Ns=null,Rs=0,t=Os)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ac(e,i))),1===t)throw n=Ls,hc(e,0),uc(e,r),rc(e,Je()),n;if(6===t)uc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(o=pt(e))&&(r=o,t=ac(e,o))),1===t))throw n=Ls,hc(e,0),uc(e,r),rc(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:bc(e,Vs,qs);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=Bs+500-Je())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(bc.bind(null,e,Vs,qs),t);break}bc(e,Vs,qs);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Is(r/1960))-r)){e.timeoutHandle=ri(bc.bind(null,e,Vs,qs),r);break}bc(e,Vs,qs);break;default:throw Error(a(329))}}}return rc(e,Je()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=Us;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Vs,Vs=n,null!==t&&oc(t)),e}function oc(e){null===Vs?Vs=e:Vs.push.apply(Vs,e)}function uc(e,t){for(t&=~js,t&=~Fs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function sc(e){if(0!==(6&Cs))throw Error(a(327));xc();var t=ht(e,0);if(0===(1&t))return rc(e,Je()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Ls,hc(e,0),uc(e,t),rc(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bc(e,Vs,qs),rc(e,Je()),null}function cc(e,t){var n=Cs;Cs|=1;try{return e(t)}finally{0===(Cs=n)&&(zs=Je()+500,Ui&&zi())}}function lc(e){null!==Qs&&0===Qs.tag&&0===(6&Cs)&&xc();var t=Cs;Cs|=1;var n=Ts.transition,r=kt;try{if(Ts.transition=null,kt=1,e)return e()}finally{kt=r,Ts.transition=n,0===(6&(Cs=t))&&zi()}}function fc(){Ds=Ps.current,Si(Ps)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==As)for(n=As.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:io(),Si(Ni),Si(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Si(uo);break;case 10:xa(r.type._context);break;case 22:case 23:fc()}n=n.return}if(Ns=e,As=e=Pc(e.current,null),Rs=Ds=t,Os=0,Ls=null,js=Fs=Ms=0,Vs=Us=null,null!==Ea){for(t=0;t<Ea.length;t++)if(null!==(r=(n=Ea[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ea=null}return e}function dc(e,t){for(;;){var n=As;try{if(ba(),fo.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,yo=mo=vo=null,ko=!1,wo=0,Es.current=null,null===n||null===n.return){Os=1,Ls=t,As=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Rs,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=yu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&mu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){mu(o,l,t),vc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var y=yu(u);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gu(y,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Os&&(Os=2),null===Us?Us=[o]:Us.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Hs||!Hs.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(w){t=w,As===n&&null!==n&&(As=n=n.return);continue}break}}function pc(){var e=Ss.current;return Ss.current=ou,null===e?ou:e}function vc(){0!==Os&&3!==Os&&2!==Os||(Os=4),null===Ns||0===(268435455&Ms)&&0===(268435455&Fs)||uc(Ns,Rs)}function mc(e,t){var n=Cs;Cs|=2;var r=pc();for(Ns===e&&Rs===t||(qs=null,hc(e,t));;)try{yc();break}catch(i){dc(e,i)}if(ba(),Cs=n,Ss.current=r,null!==As)throw Error(a(261));return Ns=null,Rs=0,Os}function yc(){for(;null!==As;)kc(As)}function gc(){for(;null!==As&&!$e();)kc(As)}function kc(e){var t=_s(e.alternate,e,Ds);e.memoizedProps=e.pendingProps,null===t?wc(e):As=t,Es.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Wu(n,t,Ds)))return void(As=n)}else{if(null!==(n=Qu(n,t)))return n.flags&=32767,void(As=n);if(null===e)return Os=6,void(As=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(As=t);As=t=e}while(null!==t);0===Os&&(Os=5)}function bc(e,t,n){var r=kt,i=Ts.transition;try{Ts.transition=null,kt=1,function(e,t,n,r){do{xc()}while(null!==Qs);if(0!==(6&Cs))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ns&&(As=Ns=null,Rs=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ws||(Ws=!0,Nc(tt,(function(){return xc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Ts.transition,Ts.transition=null;var u=kt;kt=1;var s=Cs;Cs|=4,Es.current=null,function(e,t){if(ei=Kt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(b){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Xu=t;null!==Xu;)if(e=(t=Xu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xu=e;else for(;null!==Xu;){t=Xu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(a(163))}}catch(b){Ic(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Xu=e;break}Xu=t.return}v=ts,ts=!1}(e,n),ms(n,e),pr(ti),Kt=!!ei,ti=ei=null,e.current=n,gs(n,e,i),Ye(),Cs=s,kt=u,Ts.transition=o}else e.current=n;if(Ws&&(Ws=!1,Qs=e,$s=i),0===(o=e.pendingLanes)&&(Hs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(Ks)throw Ks=!1,e=Gs,Gs=null,e;0!==(1&$s)&&0!==e.tag&&xc(),0!==(1&(o=e.pendingLanes))?e===Js?Ys++:(Ys=0,Js=e):Ys=0,zi()}(e,t,n,r)}finally{Ts.transition=i,kt=r}return null}function xc(){if(null!==Qs){var e=wt($s),t=Ts.transition,n=kt;try{if(Ts.transition=null,kt=16>e?16:e,null===Qs)var r=!1;else{if(e=Qs,Qs=null,$s=0,0!==(6&Cs))throw Error(a(331));var i=Cs;for(Cs|=4,Xu=e.current;null!==Xu;){var o=Xu,u=o.child;if(0!==(16&Xu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Xu=l;null!==Xu;){var f=Xu;switch(f.tag){case 0:case 11:case 15:ns(8,f,o)}var h=f.child;if(null!==h)h.return=f,Xu=h;else for(;null!==Xu;){var d=(f=Xu).sibling,p=f.return;if(as(f),f===l){Xu=null;break}if(null!==d){d.return=p,Xu=d;break}Xu=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Xu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Xu=u;else e:for(;null!==Xu;){if(0!==(2048&(o=Xu).flags))switch(o.tag){case 0:case 11:case 15:ns(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Xu=g;break e}Xu=o.return}}var k=e.current;for(Xu=k;null!==Xu;){var w=(u=Xu).child;if(0!==(2064&u.subtreeFlags)&&null!==w)w.return=u,Xu=w;else e:for(u=k;null!==Xu;){if(0!==(2048&(s=Xu).flags))try{switch(s.tag){case 0:case 11:case 15:rs(9,s)}}catch(x){Ic(s,s.return,x)}if(s===u){Xu=null;break e}var b=s.sibling;if(null!==b){b.return=s.return,Xu=b;break e}Xu=s.return}}if(Cs=i,zi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{kt=n,Ts.transition=t}}return!1}function _c(e,t,n){e=Oa(e,t=pu(0,t=lu(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function Ic(e,t,n){if(3===e.tag)_c(e,e,n);else for(;null!==t;){if(3===t.tag){_c(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hs||!Hs.has(r))){t=Oa(t,e=vu(t,e=lu(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Ns===e&&(Rs&n)===n&&(4===Os||3===Os&&(130023424&Rs)===Rs&&500>Je()-Bs?hc(e,0):js|=n),rc(e,t)}function Ec(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=ec();null!==(e=Na(e,t))&&(yt(e,t,n),rc(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ec(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Ec(e,n)}function Nc(e,t){return We(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Ac(e,t,n,r)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Dc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case _:return Lc(n.children,i,o,t);case I:u=8,i|=8;break;case S:return(e=Rc(12,n,t,2|i)).elementType=S,e.lanes=o,e;case N:return(e=Rc(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Rc(19,n,t,i)).elementType=A,e.lanes=o,e;case P:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:u=10;break e;case T:u=9;break e;case C:u=11;break e;case R:u=14;break e;case D:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Rc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function jc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,i,a,o,u,s){return e=new Uc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Rc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ra(a),e}function Bc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function zc(e){if(!e)return Ti;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Di(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,a,o,u,s){return(e=Vc(n,r,!0,e,0,a,0,u,s)).context=zc(null),n=e.current,(a=Pa(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Oa(n,a,i),e.current.lanes=i,yt(e,i,r),rc(e,r),e}function Kc(e,t,n,r){var i=t.current,a=ec(),o=tc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Pa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Oa(i,t,o))&&(nc(e,i,o,a),La(e,i,o)),o}function Gc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}_s=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)wu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wu=!1,function(e,t,n){switch(t.tag){case 3:Au(t),da();break;case 5:ao(t);break;case 1:Di(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ei(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ei(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fu(e,t,n):(Ei(uo,1&uo.current),null!==(e=Ku(e,t,n))?e.sibling:null);Ei(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ei(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Su(e,t,n)}return Ku(e,t,n)}(e,t,n);wu=0!==(131072&e.flags)}else wu=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qu(e,t),e=t.pendingProps;var i=Ri(t,Ci.current);Ia(t,n),i=Io(null,t,r,e,i,n);var o=So();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Di(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ra(t),i.updater=Ba,t.stateNode=i,i._reactInternals=t,Ga(t,r,e,n),t=Nu(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),bu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qu(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===R)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Tu(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=xu(null,t,r,e,n);break e;case 14:t=_u(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Tu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Au(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Da(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ru(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Ru(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ja(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Ku(e,t,n);break e}bu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Eu(e,t),bu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Fu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ya(t,null,r,n):bu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return bu(e,t,t.pendingProps,n),t.child;case 8:case 12:return bu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ei(ya,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ni.current){t=Ku(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Pa(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),_a(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),_a(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}bu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ia(t,n),r=r(i=Sa(i)),t.flags|=1,bu(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),_u(e,t,r,i=ma(r.type,i),n);case 15:return Iu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),qu(e,t),t.tag=1,Di(r)?(e=!0,Mi(t)):e=!1,Ia(t,n),qa(t,r,i),Ga(t,r,i,n),Nu(null,t,r,!0,e,n);case 19:return zu(e,t,n);case 22:return Su(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function $c(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Gc(o);u.call(e)}}Kc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Gc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),lc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Gc(s);u.call(e)}}var s=Vc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,zr(8===e.nodeType?e.parentNode:e),lc((function(){Kc(t,s,n,r)})),s}(n,t,e,i,r);return Gc(o)}Yc.prototype.render=$c.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Kc(e,t,null,null)},Yc.prototype.unmount=$c.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lc((function(){Kc(null,e,null,null)})),t[pi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Ft(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),rc(t,Je()),0===(6&Cs)&&(zs=Je()+500,zi()))}break;case 13:lc((function(){var t=Na(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Wc(e,1)}},xt=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)nc(t,e,134217728,ec());Wc(e,134217728)}},_t=function(e){if(13===e.tag){var t=tc(e),n=Na(e,t);if(null!==n)nc(n,e,t,ec());Wc(e,t)}},It=function(){return kt},St=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},xe=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=bi(r);if(!i)throw Error(a(90));W(r),X(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Ne=lc;var tl={usingClientEntryPoint:!1,Events:[ki,wi,bi,Ee,Te,cc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(a(200));return Bc(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new $c(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return lc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(a(40));return!!e._reactRootContainer&&(lc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.jsx=c,t.jsxs=c},117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var w=k.prototype=new g;w.constructor=k,v(w,y.prototype),w.isPureReactComponent=!0;var b=Array.isArray,x=Object.prototype.hasOwnProperty,_={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!I.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:_.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,b(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",b(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=N(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},P={transition:null},O={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:P,ReactCurrentOwner:_};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)x.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function b(e){if(m=!1,w(e),!v)if(null!==r(c))v=!0,P(x);else{var t=r(l);null!==t&&O(b,t.startTime-e)}}function x(e,n){v=!1,m&&(m=!1,g(E),E=-1),p=!0;var a=d;try{for(w(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),w(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&O(b,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,I=!1,S=null,E=-1,T=5,C=-1;function N(){return!(t.unstable_now()-C<T)}function A(){if(null!==S){var e=t.unstable_now();C=e;var n=!0;try{n=S(!0,e)}finally{n?_():(I=!1,S=null)}}else I=!1}if("function"===typeof k)_=function(){k(A)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,D=R.port2;R.port1.onmessage=A,_=function(){D.postMessage(null)}}else _=function(){y(A,0)};function P(e){S=e,I||(I=!0,_())}function O(e,n){E=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,P(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(E),E=-1):m=!0,O(b,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,P(x))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/sellme/",function(){var e={};n.r(e),n.d(e,{FirebaseError:function(){return qe},SDK_VERSION:function(){return tn},_DEFAULT_ENTRY_NAME:function(){return zt},_addComponent:function(){return Ht},_addOrOverwriteComponent:function(){return Wt},_apps:function(){return Kt},_clearComponents:function(){return Jt},_components:function(){return Gt},_getProvider:function(){return $t},_registerComponent:function(){return Qt},_removeServiceInstance:function(){return Yt},deleteApp:function(){return on},getApp:function(){return rn},getApps:function(){return an},initializeApp:function(){return nn},onLog:function(){return cn},registerVersion:function(){return sn},setLogLevel:function(){return ln}});var t,r=n(791),i=n(250);function a(e){if(Array.isArray(e))return e}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){return a(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||u(e,t)||s()}function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));var f=function(e){return e};var h="beforeunload",d="popstate";function p(e){e.preventDefault(),e.returnValue=""}function v(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function m(){return Math.random().toString(36).substr(2,8)}function y(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function g(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var k=(0,r.createContext)(null);var w=(0,r.createContext)(null);var b=(0,r.createContext)({outlet:null,matches:[]});function x(e,t){if(!e)throw new Error(t)}function _(e,t,n){void 0===n&&(n="/");var r=R(("string"===typeof t?g(t):t).pathname||"/",n);if(null==r)return null;var i=I(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=C(i[o],r);return a}function I(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(a.relativePath.startsWith(r)||x(!1),a.relativePath=a.relativePath.slice(r.length));var o=D([r,a.relativePath]),u=n.concat(a);e.children&&e.children.length>0&&(!0===e.index&&x(!1),I(e.children,t,u,o)),(null!=e.path||e.index)&&t.push({path:o,score:T(o,e.index),routesMeta:u})})),t}var S=/^:\w+$/,E=function(e){return"*"===e};function T(e,t){var n=e.split("/"),r=n.length;return n.some(E)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!E(e)})).reduce((function(e,t){return e+(S.test(t)?3:""===t?1:10)}),r)}function C(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=N({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:D([i,l.pathname]),pathnameBase:P(D([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=D([i,l.pathnameBase]))}return a}function N(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=c(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),l=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return e}}(l[n]||""),e}),{}),pathname:u,pathnameBase:s,pattern:e}}function A(e,t,n){var r,i="string"===typeof e?g(e):e,a=""===e||""===i.pathname?"/":i.pathname;if(null==a)r=n;else{var o=t.length-1;if(a.startsWith("..")){for(var u=a.split("/");".."===u[0];)u.shift(),o-=1;i.pathname=u.join("/")}r=o>=0?t[o]:"/"}var s=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?g(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:O(a),hash:L(u)}}(i,r);return a&&"/"!==a&&a.endsWith("/")&&!s.pathname.endsWith("/")&&(s.pathname+="/"),s}function R(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var D=function(e){return e.join("/").replace(/\/\/+/g,"/")},P=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},O=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},L=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""};function M(){return null!=(0,r.useContext)(w)}function F(){return M()||x(!1),(0,r.useContext)(w).location}function j(){M()||x(!1);var e=(0,r.useContext)(k),t=e.basename,n=e.navigator,i=(0,r.useContext)(b).matches,a=F().pathname,o=JSON.stringify(i.map((function(e){return e.pathnameBase}))),u=(0,r.useRef)(!1);(0,r.useEffect)((function(){u.current=!0}));var s=(0,r.useCallback)((function(e,r){if(void 0===r&&(r={}),u.current)if("number"!==typeof e){var i=A(e,JSON.parse(o),a);"/"!==t&&(i.pathname=D([t,i.pathname])),(r.replace?n.replace:n.push)(i,r.state)}else n.go(e)}),[t,n,o,a]);return s}function U(e,t){return void 0===t&&(t=[]),null==e?null:e.reduceRight((function(n,i,a){return(0,r.createElement)(b.Provider,{children:void 0!==i.route.element?i.route.element:n,value:{outlet:n,matches:t.concat(e.slice(0,a+1))}})}),null)}function V(e){x(!1)}function B(e){var n=e.basename,i=void 0===n?"/":n,a=e.children,o=void 0===a?null:a,u=e.location,s=e.navigationType,c=void 0===s?t.Pop:s,l=e.navigator,f=e.static,h=void 0!==f&&f;M()&&x(!1);var d=P(i),p=(0,r.useMemo)((function(){return{basename:d,navigator:l,static:h}}),[d,l,h]);"string"===typeof u&&(u=g(u));var v=u,m=v.pathname,y=void 0===m?"/":m,b=v.search,_=void 0===b?"":b,I=v.hash,S=void 0===I?"":I,E=v.state,T=void 0===E?null:E,C=v.key,N=void 0===C?"default":C,A=(0,r.useMemo)((function(){var e=R(y,d);return null==e?null:{pathname:e,search:_,hash:S,state:T,key:N}}),[d,y,_,S,T,N]);return null==A?null:(0,r.createElement)(k.Provider,{value:p},(0,r.createElement)(w.Provider,{children:o,value:{location:A,navigationType:c}}))}function z(e){var t=e.children,n=e.location;return function(e,t){M()||x(!1);var n,i=(0,r.useContext)(b).matches,a=i[i.length-1],o=a?a.params:{},u=(a&&a.pathname,a?a.pathnameBase:"/"),s=(a&&a.route,F());if(t){var c,l="string"===typeof t?g(t):t;"/"===u||(null==(c=l.pathname)?void 0:c.startsWith(u))||x(!1),n=l}else n=s;var f=n.pathname||"/",h=_(e,{pathname:"/"===u?f:f.slice(u.length)||"/"});return U(h&&h.map((function(e){return Object.assign({},e,{params:Object.assign({},o,e.params),pathname:D([u,e.pathname]),pathnameBase:"/"===e.pathnameBase?u:D([u,e.pathnameBase])})})),i)}(q(t),n)}function q(e){var t=[];return r.Children.forEach(e,(function(e){if((0,r.isValidElement)(e))if(e.type!==r.Fragment){e.type!==V&&x(!1);var n={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(n.children=q(e.props.children)),t.push(n)}else t.push.apply(t,q(e.props.children))})),t}var K=n(184);function G(){return(0,K.jsx)("svg",{width:"48px",height:"48px",viewBox:"0 0 1024 1024","data-aut-id":"icon",className:!0,fillRule:"evenodd",children:(0,K.jsx)("path",{className:"rui-77aaa",d:"M661.333 256v512h-128v-512h128zM277.333 298.667c117.824 0 213.333 95.531 213.333 213.333s-95.509 213.333-213.333 213.333c-117.824 0-213.333-95.531-213.333-213.333s95.509-213.333 213.333-213.333zM794.496 384l37.504 37.504 37.504-37.504h90.496v90.496l-37.504 37.504 37.504 37.504v90.496h-90.496l-37.504-37.504-37.504 37.504h-90.496v-90.496l37.504-37.504-37.504-37.504v-90.496h90.496zM277.333 426.667c-47.061 0-85.333 38.293-85.333 85.333s38.272 85.333 85.333 85.333c47.061 0 85.333-38.293 85.333-85.333s-38.272-85.333-85.333-85.333z"})})}function H(e){return(0,K.jsx)("svg",{width:"20px",height:"25px",viewBox:"0 0 1024 1024","data-aut-id":"icon",color:e.color?e.color:"",className:!0,fillRule:"evenodd",children:(0,K.jsx)("path",{className:"rui-77aaa",d:"M448 725.333c-152.917 0-277.333-124.416-277.333-277.333s124.416-277.333 277.333-277.333c152.917 0 277.333 124.416 277.333 277.333s-124.416 277.333-277.333 277.333v0zM884.437 824.107v0.021l-151.915-151.936c48.768-61.781 78.144-139.541 78.144-224.192 0-199.979-162.688-362.667-362.667-362.667s-362.667 162.688-362.667 362.667c0 199.979 162.688 362.667 362.667 362.667 84.629 0 162.411-29.376 224.171-78.144l206.144 206.144h60.352v-60.331l-54.229-54.229z"})})}function W(){return(0,K.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 1024 1024","data-aut-id":"icon",className:!0,fillRule:"evenodd",children:(0,K.jsx)("path",{className:"rui-77aaa",d:"M85.392 277.333h60.331l366.336 366.336 366.336-366.336h60.331v60.331l-408.981 409.003h-35.307l-409.045-409.003z"})})}function Q(){return(0,K.jsx)("svg",{width:104,height:48,viewBox:"0 0 1603 768",className:"_3V9PS",children:(0,K.jsxs)("g",{children:[(0,K.jsx)("path",{className:"all",d:"M434.442 16.944h718.82c202.72 0 367.057 164.337 367.057 367.058s-164.337 367.057-367.057 367.057h-718.82c-202.721 0-367.058-164.337-367.058-367.058s164.337-367.058 367.058-367.058z"}),(0,K.jsx)("path",{className:"left",d:"M427.241 669.489c-80.917 0-158.59-25.926-218.705-73.004l-0.016-0.014c-69.113-54.119-108.754-131.557-108.754-212.474 0-41.070 9.776-80.712 29.081-117.797 25.058-48.139 64.933-89.278 115.333-118.966l-52.379-67.581c-64.73 38.122-115.955 90.98-148.159 152.845-24.842 47.745-37.441 98.726-37.441 151.499 0 104.027 50.962 203.61 139.799 273.175h0.016c77.312 60.535 177.193 93.887 281.22 93.887h299.699l25.138-40.783-25.138-40.783h-299.698z"}),(0,K.jsx)("path",{className:"top",d:"M1318.522 38.596v0c-45.72-14.369-93.752-21.658-142.762-21.658h-748.511c-84.346 0-165.764 21.683-235.441 62.713l3.118 51.726 49.245 15.865c54.16-31.895 117.452-48.739 183.073-48.739h748.511c38.159 0 75.52 5.657 111.029 16.829v0c44.91 14.111 86.594 37.205 120.526 66.792l66.163-57.68c-43.616-38.010-97.197-67.703-154.957-85.852z"}),(0,K.jsx)("path",{className:"right",d:"M1473.479 124.453l-55.855 9.91-10.307 47.76c61.844 53.929 95.92 125.617 95.92 201.88 0 25.235-3.772 50.26-11.214 74.363-38.348 124.311-168.398 211.129-316.262 211.129h-448.812l25.121 40.783-25.121 40.783h448.812c190.107 0 357.303-111.638 406.613-271.498 9.572-31.009 14.423-63.162 14.423-95.559 0-98.044-43.805-190.216-123.317-259.551z"})]})})}function $(e){return(0,K.jsx)("svg",{width:"16px",height:"16px",viewBox:"0 0 1024 1024","data-aut-id":"icon",className:!0,fillRule:"evenodd",children:(0,K.jsx)("path",{className:"rui-367TP",d:"M414.898 123.739v291.218h-291.218l-97.014 97.014 97.014 97.131h291.218v291.16l97.073 97.071 97.073-97.071v-291.16h291.16l97.131-97.131-97.131-97.014h-291.16v-291.218l-97.073-97.073z"})})}var Y=(0,r.createContext)(null),J=(0,r.createContext)(null);function X(e){var t=e.children,n=c((0,r.useState)(null),2),i=n[0],a=n[1];return(0,K.jsx)(J.Provider,{value:{user:i,setUser:a},children:t})}var Z=function(){var e=j(),t=(0,r.useContext)(J).user,n=(0,r.useContext)(Y).firebase;return(0,K.jsx)("div",{className:"headerParentDiv",children:(0,K.jsxs)("div",{className:"headerChildDiv",children:[(0,K.jsx)("div",{className:"brandName",children:(0,K.jsx)(G,{})}),(0,K.jsxs)("div",{className:"placeSearch",children:[(0,K.jsx)(H,{}),(0,K.jsx)("input",{type:"text"}),(0,K.jsx)(W,{})]}),(0,K.jsxs)("div",{className:"productSearch",children:[(0,K.jsx)("div",{className:"input",children:(0,K.jsx)("input",{type:"text",placeholder:"Find car,mobile phone and more..."})}),(0,K.jsx)("div",{className:"searchAction",children:(0,K.jsx)(H,{color:"#ffffff"})})]}),(0,K.jsxs)("div",{className:"language",children:[(0,K.jsx)("span",{children:" ENGLISH "}),(0,K.jsx)(W,{})]}),(0,K.jsxs)("div",{onClick:function(){e("/login")},className:"loginPage",style:{cursor:"pointer"},children:[(0,K.jsx)("span",{children:t?t.displayName:"Login"}),(0,K.jsx)("hr",{})]}),t&&(0,K.jsx)("span",{style:{cursor:"pointer"},onClick:function(){n.auth().signOut(),e("/login")},children:"Logout"}),(0,K.jsxs)("div",{onClick:function(){t?e("/create"):alert("please login")},className:"sellMenu",children:[(0,K.jsx)(Q,{}),(0,K.jsxs)("div",{className:"sellMenuContent",children:[(0,K.jsx)($,{}),(0,K.jsx)("span",{children:"SELL"})]})]})]})})};var ee=function(){return(0,K.jsx)("div",{className:"bannerParentDiv",children:(0,K.jsxs)("div",{className:"bannerChildDiv",children:[(0,K.jsxs)("div",{className:"menuBar",children:[(0,K.jsxs)("div",{className:"categoryMenu",children:[(0,K.jsx)("span",{children:"ALL CATEGORIES"}),(0,K.jsx)(W,{})]}),(0,K.jsxs)("div",{className:"otherQuickOptions",children:[(0,K.jsx)("span",{children:"Cars"}),(0,K.jsx)("span",{children:"Motorcy..."}),(0,K.jsx)("span",{children:"Mobile Ph..."}),(0,K.jsx)("span",{children:"For Sale:Houses & Apart..."}),(0,K.jsx)("span",{children:"Scoot..."}),(0,K.jsx)("span",{children:"Commercial & Other Ve..."}),(0,K.jsx)("span",{children:"For Rent: House & Apart..."})]})]}),(0,K.jsx)("div",{className:"banner",children:(0,K.jsx)("img",{src:"https://statics.olx.in/olxin/banners/hero_bg_in_v2@1x.png",alt:""})})]})})};function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){te(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ie(){return(0,K.jsx)("svg",{width:"24px",height:"24px",viewBox:"0 0 1024 1024","data-aut-id":"icon",className:!0,fillRule:"evenodd",children:(0,K.jsx)("path",{className:"rui-77aaa",d:"M830.798 448.659l-318.798 389.915-317.828-388.693c-20.461-27.171-31.263-59.345-31.263-93.033 0-85.566 69.605-155.152 155.152-155.152 72.126 0 132.752 49.552 150.051 116.364h87.777c17.299-66.812 77.905-116.364 150.051-116.364 85.547 0 155.152 69.585 155.152 155.152 0 33.687-10.802 65.862-30.293 91.811zM705.939 124.121c-80.853 0-152.204 41.425-193.939 104.204-41.736-62.778-113.086-104.204-193.939-104.204-128.33 0-232.727 104.378-232.727 232.727 0 50.657 16.194 98.948 47.806 140.897l328.766 402.133h100.189l329.716-403.355c30.662-40.727 46.856-89.018 46.856-139.675 0-128.349-104.398-232.727-232.727-232.727z"})})}var ae=(0,r.createContext)(null);function oe(e){var t=e.children,n=c((0,r.useState)(null),2),i=n[0],a=n[1];return(0,K.jsx)(ae.Provider,{value:{postDetails:i,setPostDetails:a},children:t})}var ue=function(){var e=c((0,r.useState)([]),2),t=e[0],n=e[1],i=(0,r.useContext)(ae).setPostDetails,a=(0,r.useContext)(Y).firebase,o=j();return(0,r.useEffect)((function(){a.firestore().collection("products").get().then((function(e){var t=e.docs.map((function(e){return re(re({},e.data()),{},{id:e.id})}));n(t)}))}),[]),(0,K.jsxs)("div",{className:"postParentDiv",children:[(0,K.jsxs)("div",{className:"moreView",children:[(0,K.jsxs)("div",{className:"heading",children:[(0,K.jsx)("span",{children:"Quick Menu"}),(0,K.jsx)("span",{children:"View more"})]}),(0,K.jsx)("div",{className:"cards",children:t.map((function(e){return(0,K.jsxs)("div",{onClick:function(){i(e),o("/view")},className:"card",children:[(0,K.jsx)("div",{className:"favorite",children:(0,K.jsx)(ie,{})}),(0,K.jsx)("div",{className:"image",children:(0,K.jsx)("img",{src:e.url,alt:""})}),(0,K.jsxs)("div",{className:"content",children:[(0,K.jsx)("p",{className:"rate",children:e.price}),(0,K.jsx)("span",{className:"kilometer",children:e.category}),(0,K.jsxs)("p",{className:"name",children:[" ",e.name]})]}),(0,K.jsx)("div",{className:"date",children:(0,K.jsx)("span",{children:e.createdAt})})]})}))})]}),(0,K.jsxs)("div",{className:"recommendations",children:[(0,K.jsx)("div",{className:"heading",children:(0,K.jsx)("span",{children:"Fresh recommendations"})}),(0,K.jsxs)("div",{className:"cards",children:[(0,K.jsxs)("div",{className:"card",children:[(0,K.jsx)("div",{className:"favorite",children:(0,K.jsx)(ie,{})}),(0,K.jsx)("div",{className:"image",children:(0,K.jsx)("img",{src:"https://static.autox.com/uploads/2019/07/Yamaha-MT-15-Image-1-.jpg",alt:""})}),(0,K.jsxs)("div",{className:"content",children:[(0,K.jsx)("p",{className:"rate",children:"\u20b9 250000"}),(0,K.jsx)("span",{className:"kilometer",children:"Two Wheeler"}),(0,K.jsx)("p",{className:"name",children:" YAMAHA R15V3"})]}),(0,K.jsx)("div",{className:"date",children:(0,K.jsx)("span",{children:"10/5/2021"})})]}),(0,K.jsxs)("div",{className:"card",children:[(0,K.jsx)("div",{className:"favorite",children:(0,K.jsx)(ie,{})}),(0,K.jsx)("div",{className:"image",children:(0,K.jsx)("img",{src:"https://static.autox.com/uploads/2019/07/Yamaha-MT-15-Image-1-.jpg",alt:""})}),(0,K.jsxs)("div",{className:"content",children:[(0,K.jsx)("p",{className:"rate",children:"\u20b9 250000"}),(0,K.jsx)("span",{className:"kilometer",children:"Two Wheeler"}),(0,K.jsx)("p",{className:"name",children:" YAMAHA R15V3"})]}),(0,K.jsx)("div",{className:"date",children:(0,K.jsx)("span",{children:"10/5/2021"})})]}),(0,K.jsxs)("div",{className:"card",children:[(0,K.jsx)("div",{className:"favorite",children:(0,K.jsx)(ie,{})}),(0,K.jsx)("div",{className:"image",children:(0,K.jsx)("img",{src:"https://static.autox.com/uploads/2019/07/Yamaha-MT-15-Image-1-.jpg",alt:""})}),(0,K.jsxs)("div",{className:"content",children:[(0,K.jsx)("p",{className:"rate",children:"\u20b9 250000"}),(0,K.jsx)("span",{className:"kilometer",children:"Two Wheeler"}),(0,K.jsx)("p",{className:"name",children:" YAMAHA R15V3"})]}),(0,K.jsx)("div",{className:"date",children:(0,K.jsx)("span",{children:"10/5/2021"})})]}),(0,K.jsxs)("div",{className:"card",children:[(0,K.jsx)("div",{className:"favorite",children:(0,K.jsx)(ie,{})}),(0,K.jsx)("div",{className:"image",children:(0,K.jsx)("img",{src:"https://static.autox.com/uploads/2019/07/Yamaha-MT-15-Image-1-.jpg",alt:""})}),(0,K.jsxs)("div",{className:"content",children:[(0,K.jsx)("p",{className:"rate",children:"\u20b9 250000"}),(0,K.jsx)("span",{className:"kilometer",children:"Two Wheeler"}),(0,K.jsx)("p",{className:"name",children:" YAMAHA R15V3"})]}),(0,K.jsx)("div",{className:"date",children:(0,K.jsx)("span",{children:"10/5/2021"})})]}),(0,K.jsxs)("div",{className:"card",children:[(0,K.jsx)("div",{className:"favorite",children:(0,K.jsx)(ie,{})}),(0,K.jsx)("div",{className:"image",children:(0,K.jsx)("img",{src:"https://static.autox.com/uploads/2019/07/Yamaha-MT-15-Image-1-.jpg",alt:""})}),(0,K.jsxs)("div",{className:"content",children:[(0,K.jsx)("p",{className:"rate",children:"\u20b9 250000"}),(0,K.jsx)("span",{className:"kilometer",children:"Two Wheeler"}),(0,K.jsx)("p",{className:"name",children:" YAMAHA R15V3"})]}),(0,K.jsx)("div",{className:"date",children:(0,K.jsx)("span",{children:"10/5/2021"})})]})]})]})]})};var se=function(){return(0,K.jsxs)("div",{className:"footerParentDiv",children:[(0,K.jsxs)("div",{className:"content",children:[(0,K.jsxs)("div",{children:[(0,K.jsx)("div",{className:"heading",children:(0,K.jsx)("p",{children:"POPULAR LOCATIONS"})}),(0,K.jsx)("div",{className:"list",children:(0,K.jsxs)("ul",{children:[(0,K.jsx)("li",{children:"kolkata"}),(0,K.jsx)("li",{children:"Mumbai"}),(0,K.jsx)("li",{children:"Chennai"}),(0,K.jsx)("li",{children:"Pune"})]})})]}),(0,K.jsxs)("div",{children:[(0,K.jsx)("div",{className:"heading",children:(0,K.jsx)("p",{children:"ABOUT US"})}),(0,K.jsx)("div",{className:"list",children:(0,K.jsxs)("ul",{children:[(0,K.jsx)("li",{children:"About OLX Group"}),(0,K.jsx)("li",{children:"Careers"}),(0,K.jsx)("li",{children:"Contact Us"}),(0,K.jsx)("li",{children:"OLXPeople"})]})})]}),(0,K.jsxs)("div",{children:[(0,K.jsx)("div",{className:"heading",children:(0,K.jsx)("p",{children:"OLX"})}),(0,K.jsx)("div",{className:"list",children:(0,K.jsxs)("ul",{children:[(0,K.jsx)("li",{children:"Help"}),(0,K.jsx)("li",{children:"Sitemap"}),(0,K.jsx)("li",{children:"Legal & Privacy information"})]})})]})]}),(0,K.jsxs)("div",{className:"footer",children:[(0,K.jsx)("p",{children:"Other Countries Pakistan - South Africa - Indonesia"}),(0,K.jsx)("p",{children:"Free Classifieds in India. \xa9 2006-2021 OLX"})]})]})};var ce=function(e){return(0,K.jsxs)("div",{className:"homeParentDiv",children:[(0,K.jsx)(Z,{}),(0,K.jsx)(ee,{}),(0,K.jsx)(ue,{}),(0,K.jsx)(se,{})]})},le=n.p+"static/media/olx-logo.b3f099a2fe7978c70944.png";function fe(){var e=j(),t=c((0,r.useState)(""),2),n=t[0],i=t[1],a=c((0,r.useState)(""),2),o=a[0],u=a[1],s=c((0,r.useState)(""),2),l=s[0],f=s[1],h=c((0,r.useState)(""),2),d=h[0],p=h[1],v=(0,r.useContext)(Y).firebase;return(0,K.jsx)("div",{children:(0,K.jsxs)("div",{className:"signupParentDiv",children:[(0,K.jsx)("img",{width:"200px",height:"200px",src:le}),(0,K.jsxs)("form",{onSubmit:function(t){t.preventDefault(),v.auth().createUserWithEmailAndPassword(o,d).then((function(t){console.log(t.user._delegate.uid),t.user.updateProfile({displayName:n}).then((function(){v.firestore().collection("users").add({id:t.user._delegate.uid,userName:n,phone:l}).then((function(){e("/login")}))}))})).catch((function(e){alert(e.message)}))},children:[(0,K.jsx)("label",{htmlFor:"fname",children:"Username"}),(0,K.jsx)("br",{}),(0,K.jsx)("input",{className:"input",type:"text",value:n,onChange:function(e){return i(e.target.value)},id:"fname",name:"name",defaultValue:"John"}),(0,K.jsx)("br",{}),(0,K.jsx)("label",{htmlFor:"fname",children:"Email"}),(0,K.jsx)("br",{}),(0,K.jsx)("input",{className:"input",type:"email",value:o,onChange:function(e){return u(e.target.value)},id:"fname",name:"email",defaultValue:"John"}),(0,K.jsx)("br",{}),(0,K.jsx)("label",{htmlFor:"lname",children:"Phone"}),(0,K.jsx)("br",{}),(0,K.jsx)("input",{className:"input",type:"number",value:l,onChange:function(e){return f(e.target.value)},id:"lname",name:"phone",defaultValue:"Doe"}),(0,K.jsx)("br",{}),(0,K.jsx)("label",{htmlFor:"lname",children:"Password"}),(0,K.jsx)("br",{}),(0,K.jsx)("input",{className:"input",type:"password",value:d,onChange:function(e){return p(e.target.value)},id:"lname",name:"password",defaultValue:"Doe"}),(0,K.jsx)("br",{}),(0,K.jsx)("br",{}),(0,K.jsx)("button",{children:"Signup"})]}),(0,K.jsx)("a",{onClick:function(){e("/login")},children:"Login"})]})})}var he=function(){return(0,K.jsx)("div",{children:(0,K.jsx)(fe,{})})};var de=function(){var e=c((0,r.useState)(""),2),t=e[0],n=e[1],i=c((0,r.useState)(""),2),a=i[0],o=i[1],u=(0,r.useContext)(Y).firebase,s=j();return(0,K.jsx)("div",{children:(0,K.jsxs)("div",{className:"loginParentDiv",children:[(0,K.jsx)("img",{width:"200px",height:"200px",src:le}),(0,K.jsxs)("form",{onSubmit:function(e){e.preventDefault(),u.auth().signInWithEmailAndPassword(t,a).then((function(){s("/sellme")})).catch((function(e){alert(e.message)})).catch((function(e){alert(e.message)}))},children:[(0,K.jsx)("label",{htmlFor:"fname",children:"Email"}),(0,K.jsx)("br",{}),(0,K.jsx)("input",{className:"input",type:"email",id:"fname",value:t,onChange:function(e){n(e.target.value)},name:"email",defaultValue:"John"}),(0,K.jsx)("br",{}),(0,K.jsx)("label",{htmlFor:"lname",children:"Password"}),(0,K.jsx)("br",{}),(0,K.jsx)("input",{className:"input",type:"password",value:a,onChange:function(e){o(e.target.value)},id:"lname",name:"password",defaultValue:"Doe"}),(0,K.jsx)("br",{}),(0,K.jsx)("br",{}),(0,K.jsx)("button",{children:"Login"})]}),(0,K.jsx)("a",{style:{cursor:"pointer"},onClick:function(){s("/signup")},children:"Signup"})]})})};var pe=function(){return(0,K.jsx)("div",{children:(0,K.jsx)(de,{})})};function ve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ye(e,t,n){return t&&me(e.prototype,t),n&&me(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ge(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function ke(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function we(e,t){return we=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},we(e,t)}function be(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&we(e,t)}function xe(e){return xe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},xe(e)}function _e(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Ie(e){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ie(e)}function Se(e,t){if(t&&("object"===Ie(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ke(e)}function Ee(e){var t=_e();return function(){var n,r=xe(e);if(t){var i=xe(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Se(this,n)}}function Te(e,t,n){return Te=_e()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&we(i,n.prototype),i},Te.apply(null,arguments)}function Ce(e){var t="function"===typeof Map?new Map:void 0;return Ce=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Te(e,arguments,xe(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),we(n,e)},Ce(e)}var Ne=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Ae={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ne(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Re=function(e){return function(e){var t=Ne(e);return Ae.encodeByteArray(t,!0)}(e).replace(/\./g,"")},De=function(e){try{return Ae.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Pe(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Pe(e[n],t[n]));return e}var Oe=function(){function e(){var t=this;ve(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return ye(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Le(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Re(JSON.stringify({alg:"none",type:"JWT"})),Re(JSON.stringify(a)),""].join(".")}function Me(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Fe(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Me())}function je(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function Ue(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Ve(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Be(){var e=Me();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function ze(){return"object"===typeof indexedDB}var qe=function(e){be(n,e);var t=Ee(n);function n(e,r,i){var a;return ve(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(ke(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(ke(a),Ke.prototype.create),a}return ye(n)}(Ce(Error)),Ke=function(){function e(t,n,r){ve(this,e),this.service=t,this.serviceName=n,this.errors=r}return ye(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?Ge(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new qe(n,a,t);return o}}]),e}();function Ge(e,t){return e.replace(He,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var He=/\{\$([^}]+)}/g;function We(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Qe(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if($e(u)&&$e(s)){if(!Qe(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function $e(e){return null!==e&&"object"===typeof e}function Ye(e){for(var t=[],n=function(){var e=c(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Je(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=c(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Xe(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Ze(e,t){var n=new et(e,t);return n.subscribe.bind(n)}var et=function(){function e(t,n){var r=this;ve(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return ye(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=ge(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=tt),void 0===r.error&&(r.error=tt),void 0===r.complete&&(r.complete=tt);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function tt(){}function nt(e){return e&&e._delegate?e._delegate:e}function rt(){rt=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(E){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof f?t:f,a=Object.create(i.prototype),o=new _(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return S()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=w(o,n);if(u){if(u===l)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=c(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=s;var l={};function f(){}function h(){}function d(){}var p={};u(p,i,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(I([])));m&&m!==t&&n.call(m,i)&&(p=m);var y=d.prototype=f.prototype=Object.create(p);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(i,a,o,u){var s=c(e[i],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==Ie(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,o,u)}),(function(e){r("throw",e,o,u)})):t.resolve(f).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function b(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function I(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return h.prototype=d,u(y,"constructor",d),u(d,"constructor",h),h.displayName=u(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,o,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(k.prototype),u(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new k(s(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(y),u(y,o,"Generator"),u(y,i,(function(){return this})),u(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=I,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function it(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function at(e){return function(e){if(Array.isArray(e))return o(e)}(e)||it(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ot(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function ut(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){ot(a,r,i,o,u,"next",e)}function u(e){ot(a,r,i,o,u,"throw",e)}o(void 0)}))}}var st=function(){function e(t,n,r){ve(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return ye(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),ct="[DEFAULT]",lt=function(){function e(t,n){ve(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return ye(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Oe;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ct})}catch(s){}var t,n=ge(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=c(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=ut(rt().mark((function e(){var t;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(at(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),at(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=ge(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=c(i.value,2),s=u[0],l=u[1],f=this.normalizeInstanceIdentifier(s);r===f&&l.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=ge(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(pI){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===ct?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(pI){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct;return this.component?this.component.multipleInstances?e:ct:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var ft,ht,dt=function(){function e(t){ve(this,e),this.name=t,this.providers=new Map}return ye(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new lt(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),pt=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(ht||(ht={}));var vt={debug:ht.DEBUG,verbose:ht.VERBOSE,info:ht.INFO,warn:ht.WARN,error:ht.ERROR,silent:ht.SILENT},mt=ht.INFO,yt=(te(ft={},ht.DEBUG,"log"),te(ft,ht.VERBOSE,"log"),te(ft,ht.INFO,"info"),te(ft,ht.WARN,"warn"),te(ft,ht.ERROR,"error"),ft),gt=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=yt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},kt=function(){function e(t){ve(this,e),this.name=t,this._logLevel=mt,this._logHandler=gt,this._userLogHandler=null,pt.push(this)}return ye(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in ht))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?vt[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ht.DEBUG].concat(t)),this._logHandler.apply(this,[this,ht.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ht.VERBOSE].concat(t)),this._logHandler.apply(this,[this,ht.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ht.INFO].concat(t)),this._logHandler.apply(this,[this,ht.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ht.WARN].concat(t)),this._logHandler.apply(this,[this,ht.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ht.ERROR].concat(t)),this._logHandler.apply(this,[this,ht.ERROR].concat(t))}}]),e}();var wt,bt;var xt=new WeakMap,_t=new WeakMap,It=new WeakMap,St=new WeakMap,Et=new WeakMap;var Tt={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return _t.get(e);if("objectStoreNames"===t)return e.objectStoreNames||It.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return At(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Ct(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(bt||(bt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Rt(this),n),At(xt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return At(e.apply(Rt(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Rt(this),t].concat(r));return It.set(a,t.sort?t.sort():[t]),At(a)}}function Nt(e){return"function"===typeof e?Ct(e):(e instanceof IDBTransaction&&function(e){if(!_t.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));_t.set(e,t)}}(e),t=e,(wt||(wt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,Tt):e);var t}function At(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(At(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&xt.set(t,e)})).catch((function(){})),Et.set(t,e),t}(e);if(St.has(e))return St.get(e);var t=Nt(e);return t!==e&&(St.set(e,t),Et.set(t,e)),t}var Rt=function(e){return Et.get(e)};var Dt,Pt,Ot=["get","getKey","getAll","getAllKeys","count"],Lt=["put","add","delete","clear"],Mt=new Map;function Ft(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Mt.get(t))return Mt.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Lt.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Ot.includes(n))){var a=function(){var e=ut(rt().mark((function e(t){var a,o,u,s,c,l,f=arguments;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Mt.set(t,a),a}}}Tt=function(e){return re(re({},e),{},{get:function(t,n,r){return Ft(t,n)||e.get(t,n,r)},has:function(t,n){return!!Ft(t,n)||e.has(t,n)}})}(Tt);var jt=function(){function e(t){ve(this,e),this.container=t}return ye(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Ut="@firebase/app",Vt="0.7.27",Bt=new kt("@firebase/app"),zt="[DEFAULT]",qt=(te(Dt={},Ut,"fire-core"),te(Dt,"@firebase/app-compat","fire-core-compat"),te(Dt,"@firebase/analytics","fire-analytics"),te(Dt,"@firebase/analytics-compat","fire-analytics-compat"),te(Dt,"@firebase/app-check","fire-app-check"),te(Dt,"@firebase/app-check-compat","fire-app-check-compat"),te(Dt,"@firebase/auth","fire-auth"),te(Dt,"@firebase/auth-compat","fire-auth-compat"),te(Dt,"@firebase/database","fire-rtdb"),te(Dt,"@firebase/database-compat","fire-rtdb-compat"),te(Dt,"@firebase/functions","fire-fn"),te(Dt,"@firebase/functions-compat","fire-fn-compat"),te(Dt,"@firebase/installations","fire-iid"),te(Dt,"@firebase/installations-compat","fire-iid-compat"),te(Dt,"@firebase/messaging","fire-fcm"),te(Dt,"@firebase/messaging-compat","fire-fcm-compat"),te(Dt,"@firebase/performance","fire-perf"),te(Dt,"@firebase/performance-compat","fire-perf-compat"),te(Dt,"@firebase/remote-config","fire-rc"),te(Dt,"@firebase/remote-config-compat","fire-rc-compat"),te(Dt,"@firebase/storage","fire-gcs"),te(Dt,"@firebase/storage-compat","fire-gcs-compat"),te(Dt,"@firebase/firestore","fire-fst"),te(Dt,"@firebase/firestore-compat","fire-fst-compat"),te(Dt,"fire-js","fire-js"),te(Dt,"firebase","fire-js-all"),Dt),Kt=new Map,Gt=new Map;function Ht(e,t){try{e.container.addComponent(t)}catch(n){Bt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Wt(e,t){e.container.addOrOverwriteComponent(t)}function Qt(e){var t=e.name;if(Gt.has(t))return Bt.debug("There were multiple attempts to register component ".concat(t,".")),!1;Gt.set(t,e);var n,r=ge(Kt.values());try{for(r.s();!(n=r.n()).done;){Ht(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function $t(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Yt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:zt;$t(e,t).clearInstance(n)}function Jt(){Gt.clear()}var Xt=(te(Pt={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),te(Pt,"bad-app-name","Illegal App name: '{$appName}"),te(Pt,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),te(Pt,"app-deleted","Firebase App named '{$appName}' already deleted"),te(Pt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),te(Pt,"invalid-log-argument","First argument to `onLog` must be null or a function."),te(Pt,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),te(Pt,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),te(Pt,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),te(Pt,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),Pt),Zt=new Ke("app","Firebase",Xt),en=function(){function e(t,n,r){var i=this;ve(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new st("app",(function(){return i}),"PUBLIC"))}return ye(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Zt.create("app-deleted",{appName:this._name})}}]),e}(),tn="9.8.4";function nn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:zt,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Zt.create("bad-app-name",{appName:String(i)});var a=Kt.get(i);if(a){if(Qe(e,a.options)&&Qe(r,a.config))return a;throw Zt.create("duplicate-app",{appName:i})}var o,u=new dt(i),s=ge(Gt.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new en(e,r,u);return Kt.set(i,l),l}function rn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt,t=Kt.get(e);if(!t)throw Zt.create("no-app",{appName:e});return t}function an(){return Array.from(Kt.values())}function on(e){return un.apply(this,arguments)}function un(){return(un=ut(rt().mark((function e(t){var n;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Kt.has(n)){e.next=6;break}return Kt.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sn(e,t,n){var r,i=null!==(r=qt[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Bt.warn(u.join(" "))}Qt(new st("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function cn(e,t){if(null!==e&&"function"!==typeof e)throw Zt.create("invalid-log-argument");!function(e,t){var n,r=ge(pt);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=vt[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:ht[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function ln(e){var t;t=e,pt.forEach((function(e){e.setLogLevel(t)}))}var fn="firebase-heartbeat-store",hn=null;function dn(){return hn||(hn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=At(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(At(u.result),e.oldVersion,e.newVersion,At(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(fn)}}).catch((function(e){throw Zt.create("storage-open",{originalErrorMessage:e.message})}))),hn}function pn(e){return vn.apply(this,arguments)}function vn(){return vn=ut(rt().mark((function e(t){var n,r;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,dn();case 3:return r=e.sent,e.abrupt("return",r.transaction(fn).objectStore(fn).get(gn(t)));case 7:throw e.prev=7,e.t0=e.catch(0),Zt.create("storage-get",{originalErrorMessage:null===(n=e.t0)||void 0===n?void 0:n.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),vn.apply(this,arguments)}function mn(e,t){return yn.apply(this,arguments)}function yn(){return yn=ut(rt().mark((function e(t,n){var r,i,a,o;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,dn();case 3:return i=e.sent,a=i.transaction(fn,"readwrite"),o=a.objectStore(fn),e.next=8,o.put(n,gn(t));case 8:return e.abrupt("return",a.done);case 11:throw e.prev=11,e.t0=e.catch(0),Zt.create("storage-set",{originalErrorMessage:null===(r=e.t0)||void 0===r?void 0:r.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),yn.apply(this,arguments)}function gn(e){return"".concat(e.name,"!").concat(e.options.appId)}var kn=function(){function e(t){var n=this;ve(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new In(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return ye(e,[{key:"triggerHeartbeat",value:function(){var e=ut(rt().mark((function e(){var t,n,r;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=wn(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=ut(rt().mark((function e(){var t,n,r,i,a;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=wn(),n=bn(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=Re(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function wn(){return(new Date).toISOString().substring(0,10)}function bn(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=ge(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Sn(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Sn(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var xn,_n,In=function(){function e(t){ve(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return ye(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=ut(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ze()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=ut(rt().mark((function e(){var t;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,pn(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=ut(rt().mark((function e(t){var n,r;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",mn(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=ut(rt().mark((function e(t){var n,r;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",mn(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(at(r.heartbeats),at(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Sn(e){return Re(JSON.stringify({version:2,heartbeats:e})).length}xn="",Qt(new st("platform-logger",(function(e){return new jt(e)}),"PRIVATE")),Qt(new st("heartbeat",(function(e){return new kn(e)}),"PRIVATE")),sn(Ut,Vt,xn),sn(Ut,Vt,"esm2017"),sn("fire-js","");var En=function(){function e(t,n){var r=this;ve(this,e),this._delegate=t,this.firebase=n,Ht(t,new st("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return ye(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),on(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zt;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zt;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Ht(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Wt(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Tn=(te(_n={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),te(_n,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),_n),Cn=new Ke("app-compat","Firebase",Tn);var Nn=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=nn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(We(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:sn,setLogLevel:ln,onLog:cn,apps:null,SDK_VERSION:tn,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Qt(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Cn.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&Pe(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!We(n,e=e||zt))throw Cn.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(En);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Pe(n,e)},createSubscribe:Ze,ErrorFactory:Ke,deepExtend:Pe}),n}(),An=new kt("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){An.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Rn=self.firebase.SDK_VERSION;Rn&&Rn.indexOf("LITE")>=0&&An.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Dn=Nn;!function(e){sn("@firebase/app-compat","0.1.28",e)}();function Pn(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=xe(e)););return e}function On(){return On="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=Pn(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},On.apply(this,arguments)}Dn.registerVersion("firebase","9.8.4","app-compat");function Ln(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Mn;Object.create;var Fn="facebook.com",jn="github.com",Un="google.com",Vn="password",Bn="twitter.com",zn="EMAIL_SIGNIN",qn="PASSWORD_RESET",Kn="RECOVER_EMAIL",Gn="REVERT_SECOND_FACTOR_ADDITION",Hn="VERIFY_AND_CHANGE_EMAIL",Wn="VERIFY_EMAIL";function Qn(){return te({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var $n=function(){var e;return te(e={},"admin-restricted-operation","This operation is restricted to administrators only."),te(e,"argument-error",""),te(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),te(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),te(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),te(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),te(e,"cordova-not-ready","Cordova framework is not ready."),te(e,"cors-unsupported","This browser is not supported."),te(e,"credential-already-in-use","This credential is already associated with a different user account."),te(e,"custom-token-mismatch","The custom token corresponds to a different audience."),te(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),te(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),te(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),te(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),te(e,"email-already-in-use","The email address is already in use by another account."),te(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),te(e,"expired-action-code","The action code has expired."),te(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),te(e,"internal-error","An internal AuthError has occurred."),te(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),te(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),te(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),te(e,"invalid-auth-event","An internal AuthError has occurred."),te(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),te(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),te(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),te(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),te(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),te(e,"invalid-email","The email address is badly formatted."),te(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),te(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),te(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),te(e,"invalid-credential","The supplied auth credential is malformed or has expired."),te(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),te(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),te(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),te(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),te(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),te(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),te(e,"wrong-password","The password is invalid or the user does not have a password."),te(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),te(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),te(e,"invalid-provider-id","The specified provider ID is invalid."),te(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),te(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),te(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),te(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),te(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),te(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),te(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),te(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),te(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),te(e,"missing-continue-uri","A continue URL must be provided in the request."),te(e,"missing-iframe-start","An internal AuthError has occurred."),te(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),te(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),te(e,"missing-multi-factor-info","No second factor identifier is provided."),te(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),te(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),te(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),te(e,"app-deleted","This instance of FirebaseApp has been deleted."),te(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),te(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),te(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),te(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),te(e,"no-auth-event","An internal AuthError has occurred."),te(e,"no-such-provider","User was not linked to an account with the given provider."),te(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),te(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),te(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),te(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),te(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),te(e,"provider-already-linked","User can only be linked to one identity for the given provider."),te(e,"quota-exceeded","The project's quota for this operation has been exceeded."),te(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),te(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),te(e,"rejected-credential","The request contains malformed or mismatching credentials."),te(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),te(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),te(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),te(e,"timeout","The operation has timed out."),te(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),te(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),te(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),te(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),te(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),te(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),te(e,"unverified-email","The operation requires a verified email."),te(e,"user-cancelled","The user did not grant your application the permissions it requested."),te(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),te(e,"user-disabled","The user account has been disabled by an administrator."),te(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),te(e,"user-signed-out",""),te(e,"weak-password","The password must be 6 characters long or more."),te(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),te(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},Yn=Qn,Jn=new Ke("auth","Firebase",Qn()),Xn=new kt("@firebase/auth");function Zn(e){if(Xn.logLevel<=ht.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Xn.error.apply(Xn,["Auth (".concat(tn,"): ").concat(e)].concat(n))}}function er(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw ir.apply(void 0,[e].concat(n))}function tr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ir.apply(void 0,[e].concat(n))}function nr(e,t,n){var r=Object.assign(Object.assign({},Yn()),te({},t,n));return new Ke("auth","Firebase",r).create(t,{appName:e.name})}function rr(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&er(e,"argument-error"),nr(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function ir(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=at(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(at(o)))}return Jn.create.apply(Jn,[e].concat(n))}function ar(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw ir.apply(void 0,[t].concat(r))}}function or(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Zn(t),new Error(t)}function ur(e,t){e||or(t)}var sr=new Map;function cr(e){ur(e instanceof Function,"Expected a class definition");var t=sr.get(e);return t?(ur(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,sr.set(e,t),t)}function lr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function fr(){return"http:"===hr()||"https:"===hr()}function hr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var dr=function(){function e(t,n){ve(this,e),this.shortDelay=t,this.longDelay=n,ur(n>t,"Short delay should be less than long delay!"),this.isMobile=Fe()||Ve()}return ye(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(fr()||Ue()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function pr(e,t){ur(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var vr=function(){function e(){ve(this,e)}return ye(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void or("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void or("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void or("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),mr=(te(Mn={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),te(Mn,"MISSING_CUSTOM_TOKEN","internal-error"),te(Mn,"INVALID_IDENTIFIER","invalid-email"),te(Mn,"MISSING_CONTINUE_URI","internal-error"),te(Mn,"INVALID_PASSWORD","wrong-password"),te(Mn,"MISSING_PASSWORD","internal-error"),te(Mn,"EMAIL_EXISTS","email-already-in-use"),te(Mn,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),te(Mn,"INVALID_IDP_RESPONSE","invalid-credential"),te(Mn,"INVALID_PENDING_TOKEN","invalid-credential"),te(Mn,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),te(Mn,"MISSING_REQ_TYPE","internal-error"),te(Mn,"EMAIL_NOT_FOUND","user-not-found"),te(Mn,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),te(Mn,"EXPIRED_OOB_CODE","expired-action-code"),te(Mn,"INVALID_OOB_CODE","invalid-action-code"),te(Mn,"MISSING_OOB_CODE","internal-error"),te(Mn,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),te(Mn,"INVALID_ID_TOKEN","invalid-user-token"),te(Mn,"TOKEN_EXPIRED","user-token-expired"),te(Mn,"USER_NOT_FOUND","user-token-expired"),te(Mn,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),te(Mn,"INVALID_CODE","invalid-verification-code"),te(Mn,"INVALID_SESSION_INFO","invalid-verification-id"),te(Mn,"INVALID_TEMPORARY_PROOF","invalid-credential"),te(Mn,"MISSING_SESSION_INFO","missing-verification-id"),te(Mn,"SESSION_EXPIRED","code-expired"),te(Mn,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),te(Mn,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),te(Mn,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),te(Mn,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),te(Mn,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),te(Mn,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),te(Mn,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),te(Mn,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),te(Mn,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),te(Mn,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),te(Mn,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Mn),yr=new dr(3e4,6e4);function gr(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function kr(e,t,n,r){return wr.apply(this,arguments)}function wr(){return wr=ut(rt().mark((function e(t,n,r,i){var a,o=arguments;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",br(t,a,ut(rt().mark((function e(){var a,o,u,s;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=Ye(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",vr.fetch()(Sr(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),wr.apply(this,arguments)}function br(e,t,n){return xr.apply(this,arguments)}function xr(){return(xr=ut(rt().mark((function e(t,n,r){var i,a,o,u,s,l,f,h,d,p;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},mr),n),e.prev=2,a=new Er(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw Tr(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,l=s.split(" : "),f=c(l,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw Tr(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw Tr(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw Tr(t,"user-disabled",u);case 29:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw nr(t,p,d);case 34:er(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof qe)){e.next=41;break}throw e.t0;case 41:er(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])})))).apply(this,arguments)}function _r(e,t,n,r){return Ir.apply(this,arguments)}function Ir(){return Ir=ut(rt().mark((function e(t,n,r,i){var a,o,u=arguments;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,kr(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&er(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Ir.apply(this,arguments)}function Sr(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?pr(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Er=function(){function e(t){var n=this;ve(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(tr(n.auth,"network-request-failed"))}),yr.get())}))}return ye(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Tr(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=tr(e,t,r);return i.customData._tokenResponse=n,i}function Cr(e,t){return Nr.apply(this,arguments)}function Nr(){return(Nr=ut(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kr(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ar(e,t){return Rr.apply(this,arguments)}function Rr(){return(Rr=ut(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dr(e,t){return Pr.apply(this,arguments)}function Pr(){return(Pr=ut(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kr(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Or(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Lr(){return Lr=ut(rt().mark((function e(t){var n,r,i,a,o,u,s=arguments;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=nt(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,ar((a=Fr(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Or(Mr(a.auth_time)),issuedAtTime:Or(Mr(a.iat)),expirationTime:Or(Mr(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Lr.apply(this,arguments)}function Mr(e){return 1e3*Number(e)}function Fr(e){var t,n=c(e.split("."),3),r=n[0],i=n[1],a=n[2];if(void 0===r||void 0===i||void 0===a)return Zn("JWT malformed, contained fewer than 3 sections"),null;try{var o=De(i);return o?JSON.parse(o):(Zn("Failed to decode base64 JWT payload"),null)}catch(u){return Zn("Caught error parsing JWT payload as JSON",null===(t=u)||void 0===t?void 0:t.toString()),null}}function jr(e,t){return Ur.apply(this,arguments)}function Ur(){return Ur=ut(rt().mark((function e(t,n){var r=arguments;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof qe&&Vr(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Ur.apply(this,arguments)}function Vr(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Br=function(){function e(t){ve(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return ye(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(ut(rt().mark((function t(){return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=ut(rt().mark((function e(){var t;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===(t=e.t0)||void 0===t?void 0:t.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),zr=function(){function e(t,n){ve(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return ye(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Or(this.lastLoginAt),this.creationTime=Or(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function qr(e){return Kr.apply(this,arguments)}function Kr(){return Kr=ut(rt().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,jr(t,Dr(r,{idToken:i}));case 6:ar(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?Wr(o.providerUserInfo):[],s=Hr(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new zr(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),Kr.apply(this,arguments)}function Gr(){return(Gr=ut(rt().mark((function e(t){var n;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=nt(t),e.next=3,qr(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hr(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(at(n),at(t))}function Wr(e){return e.map((function(e){var t=e.providerId,n=Ln(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function Qr(e,t){return $r.apply(this,arguments)}function $r(){return($r=ut(rt().mark((function e(t,n){var r;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,br(t,{},ut(rt().mark((function e(){var r,i,a,o,u,s;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ye({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=Sr(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",vr.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Yr=function(){function e(){ve(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return ye(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){ar(e.idToken,"internal-error"),ar("undefined"!==typeof e.idToken,"internal-error"),ar("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Fr(e);return ar(t,"internal-error"),ar("undefined"!==typeof t.exp,"internal-error"),ar("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=ut(rt().mark((function e(t){var n,r=arguments;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],ar(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=ut(rt().mark((function e(t,n){var r,i,a,o;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qr(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return or("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(ar("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(ar("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(ar("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Jr(e,t){ar("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Xr=function(){function e(t){ve(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Ln(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Br(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?at(a.providerData):[],this.metadata=new zr(a.createdAt||void 0,a.lastLoginAt||void 0)}return ye(e,[{key:"getIdToken",value:function(){var e=ut(rt().mark((function e(t){var n;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jr(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(ar(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Lr.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Gr.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(ar(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){ar(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=ut(rt().mark((function e(t){var n,r,i=arguments;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,qr(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=ut(rt().mark((function e(){var t;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,jr(this,Cr(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,m=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,w=n.emailVerified,b=n.isAnonymous,x=n.providerData,_=n.stsTokenManager;ar(k&&_,t,"internal-error");var I=Yr.fromJSON(this.name,_);ar("string"===typeof k,t,"internal-error"),Jr(f,t.name),Jr(h,t.name),ar("boolean"===typeof w,t,"internal-error"),ar("boolean"===typeof b,t,"internal-error"),Jr(d,t.name),Jr(p,t.name),Jr(v,t.name),Jr(m,t.name),Jr(y,t.name),Jr(g,t.name);var S=new e({uid:k,auth:t,email:h,emailVerified:w,displayName:f,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:y,lastLoginAt:g});return x&&Array.isArray(x)&&(S.providerData=x.map((function(e){return Object.assign({},e)}))),m&&(S._redirectEventId=m),S}},{key:"_fromIdTokenResponse",value:function(){var t=ut(rt().mark((function t(n,r){var i,a,o,u=arguments;return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new Yr).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,qr(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Zr=function(){function e(){ve(this,e),this.type="NONE",this.storage={}}return ye(e,[{key:"_isAvailable",value:function(){var e=ut(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=ut(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=ut(rt().mark((function e(t){var n;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=ut(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Zr.type="NONE";var ei=Zr;function ti(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var ni=function(){function e(t,n,r){ve(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=ti(this.userKey,a.apiKey,o),this.fullPersistenceKey=ti("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return ye(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=ut(rt().mark((function e(){var t;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Xr._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=ut(rt().mark((function e(t){var n;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=ut(rt().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(cr(ei),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=ut(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||cr(ei),u=ti(i,n.config.apiKey,n.name),s=null,c=ge(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=Xr._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=ut(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function ri(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ui(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ii(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ci(t))return"Blackberry";if(li(t))return"Webos";if(ai(t))return"Safari";if((t.includes("chrome/")||oi(t))&&!t.includes("edge/"))return"Chrome";if(si(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function ii(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me();return/firefox\//i.test(e)}function ai(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function oi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me();return/crios\//i.test(e)}function ui(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me();return/iemobile/i.test(e)}function si(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me();return/android/i.test(e)}function ci(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me();return/blackberry/i.test(e)}function li(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me();return/webos/i.test(e)}function fi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me();return/iphone|ipad|ipod/i.test(e)}function hi(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me();return fi(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function di(){return Be()&&10===document.documentMode}function pi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me();return fi(e)||si(e)||li(e)||ci(e)||/windows phone/i.test(e)||ui(e)}function vi(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=ri(Me());break;case"Worker":t="".concat(ri(Me()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(tn,"/").concat(r)}var mi=function(){function e(t){ve(this,e),this.auth=t,this.queue=[]}return ye(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=ut(rt().mark((function e(t){var n,r,i,a,o,u,s,c;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:r=[],e.prev=3,i=ge(this.queue),e.prev=5,i.s();case 7:if((a=i.n()).done){e.next=14;break}return o=a.value,e.next=11,o(t);case 11:o.onAbort&&r.push(o.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),i.e(e.t0);case 19:return e.prev=19,i.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),r.reverse(),u=ge(r);try{for(u.s();!(s=u.n()).done;){c=s.value;try{c()}catch(l){}}}catch(f){u.e(f)}finally{u.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===(n=e.t1)||void 0===n?void 0:n.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),yi=function(){function e(t,n,r){ve(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ki(this),this.idTokenSubscription=new ki(this),this.beforeStateQueue=new mi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Jn,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return ye(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=cr(t)),this._initializationPromise=this.queue(ut(rt().mark((function r(){var i,a;return rt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,ni.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=ut(rt().mark((function e(){var t;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=ut(rt().mark((function e(t){var n,r,i,a,o,u,s;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return ar(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=ut(rt().mark((function e(t){var n;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=ut(rt().mark((function e(t){var n;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,qr(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=ut(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=ut(rt().mark((function e(t){var n;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?nt(t):null)&&ar(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=ut(rt().mark((function e(t){var n,r=this,i=arguments;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&ar(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(ut(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=ut(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(ut(rt().mark((function n(){return rt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(cr(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Ke("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=ut(rt().mark((function e(t,n){var r;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=ut(rt().mark((function e(t){var n;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return ar(n=t&&cr(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,ni.create(this,[cr(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=ut(rt().mark((function e(t){var n,r;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(ut(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=ut(rt().mark((function e(t){var n=this;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(ut(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return ar(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=ut(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return ar(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vi(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=ut(rt().mark((function e(){var t,n,r;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=te({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function gi(e){return nt(e)}var ki=function(){function e(t){var n=this;ve(this,e),this.auth=t,this.observer=null,this.addObserver=Ze((function(e){return n.observer=e}))}return ye(e,[{key:"next",get:function(){return ar(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function wi(e,t,n){var r=gi(e);ar(r._canInitEmulator,r,"emulator-config-failed"),ar(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=bi(t),o=function(e){var t=bi(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:xi(r.substr(a.length+1))}}var o=c(r.split(":"),2);return{host:o[0],port:xi(o[1])}}(t),u=o.host,s=o.port,l=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function bi(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function xi(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var _i=function(){function e(t,n){ve(this,e),this.providerId=t,this.signInMethod=n}return ye(e,[{key:"toJSON",value:function(){return or("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return or("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return or("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return or("not implemented")}}]),e}();function Ii(e,t){return Si.apply(this,arguments)}function Si(){return(Si=ut(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kr(t,"POST","/v1/accounts:resetPassword",gr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ei(e,t){return Ti.apply(this,arguments)}function Ti(){return(Ti=ut(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ci(e,t){return Ni.apply(this,arguments)}function Ni(){return(Ni=ut(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kr(t,"POST","/v1/accounts:update",gr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ai(e,t){return Ri.apply(this,arguments)}function Ri(){return(Ri=ut(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_r(t,"POST","/v1/accounts:signInWithPassword",gr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Di(e,t){return Pi.apply(this,arguments)}function Pi(){return(Pi=ut(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kr(t,"POST","/v1/accounts:sendOobCode",gr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oi(e,t){return Li.apply(this,arguments)}function Li(){return(Li=ut(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Di(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mi(e,t){return Fi.apply(this,arguments)}function Fi(){return(Fi=ut(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Di(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ji(e,t){return Ui.apply(this,arguments)}function Ui(){return(Ui=ut(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Di(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vi(e,t){return Bi.apply(this,arguments)}function Bi(){return(Bi=ut(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Di(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zi(e,t){return qi.apply(this,arguments)}function qi(){return(qi=ut(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_r(t,"POST","/v1/accounts:signInWithEmailLink",gr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ki(e,t){return Gi.apply(this,arguments)}function Gi(){return(Gi=ut(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_r(t,"POST","/v1/accounts:signInWithEmailLink",gr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Hi=function(e){be(n,e);var t=Ee(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return ve(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return ye(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=ut(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Ai(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",zi(t,{email:this._email,oobCode:this._password}));case 5:er(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=ut(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Ei(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Ki(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:er(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(_i);function Wi(e,t){return Qi.apply(this,arguments)}function Qi(){return(Qi=ut(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_r(t,"POST","/v1/accounts:signInWithIdp",gr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $i=function(e){be(n,e);var t=Ee(n);function n(){var e;return ve(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return ye(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Wi(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Wi(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Wi(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ye(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):er("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Ln(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(_i);function Yi(e,t){return Ji.apply(this,arguments)}function Ji(){return(Ji=ut(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kr(t,"POST","/v1/accounts:sendVerificationCode",gr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xi(){return(Xi=ut(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_r(t,"POST","/v1/accounts:signInWithPhoneNumber",gr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zi(){return(Zi=ut(rt().mark((function e(t,n){var r;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_r(t,"POST","/v1/accounts:signInWithPhoneNumber",gr(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Tr(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ea=te({},"USER_NOT_FOUND","user-not-found");function ta(){return(ta=ut(rt().mark((function e(t,n){var r;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",_r(t,"POST","/v1/accounts:signInWithPhoneNumber",gr(t,r),ea));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var na=function(e){be(n,e);var t=Ee(n);function n(e){var r;return ve(this,n),(r=t.call(this,"phone","phone")).params=e,r}return ye(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Xi.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Zi.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return ta.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(_i);var ra=function(){function e(t){var n,r,i,a,o,u;ve(this,e);var s=Je(Xe(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);ar(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return ye(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Je(Xe(e)).link,n=t?Je(Xe(t)).deep_link_id:null,r=Je(Xe(e)).deep_link_id;return(r?Je(Xe(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(pI){return null}}}]),e}();var ia=function(){function e(){ve(this,e),this.providerId=e.PROVIDER_ID}return ye(e,null,[{key:"credential",value:function(e,t){return Hi._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=ra.parseLink(t);return ar(n,"argument-error"),Hi._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();ia.PROVIDER_ID="password",ia.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ia.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var aa=function(){function e(t){ve(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return ye(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),oa=function(e){be(n,e);var t=Ee(n);function n(){var e;return ve(this,n),(e=t.apply(this,arguments)).scopes=[],e}return ye(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return at(this.scopes)}}]),n}(aa),ua=function(e){be(n,e);var t=Ee(n);function n(){return ve(this,n),t.apply(this,arguments)}return ye(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return ar(e.idToken||e.accessToken,"argument-error"),$i._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return ar("providerId"in t&&"signInMethod"in t,"argument-error"),$i._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(oa),sa=function(e){be(n,e);var t=Ee(n);function n(){return ve(this,n),t.call(this,"facebook.com")}return ye(n,null,[{key:"credential",value:function(e){return $i._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(pI){return null}}}]),n}(oa);sa.FACEBOOK_SIGN_IN_METHOD="facebook.com",sa.PROVIDER_ID="facebook.com";var ca=function(e){be(n,e);var t=Ee(n);function n(){var e;return ve(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return ye(n,null,[{key:"credential",value:function(e,t){return $i._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(pI){return null}}}]),n}(oa);ca.GOOGLE_SIGN_IN_METHOD="google.com",ca.PROVIDER_ID="google.com";var la=function(e){be(n,e);var t=Ee(n);function n(){return ve(this,n),t.call(this,"github.com")}return ye(n,null,[{key:"credential",value:function(e){return $i._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(pI){return null}}}]),n}(oa);la.GITHUB_SIGN_IN_METHOD="github.com",la.PROVIDER_ID="github.com";var fa=function(e){be(n,e);var t=Ee(n);function n(e,r){var i;return ve(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return ye(n,[{key:"_getIdTokenResponse",value:function(e){return Wi(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Wi(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Wi(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(_i),ha=function(e){be(n,e);var t=Ee(n);function n(e){return ve(this,n),ar(e.startsWith("saml."),"argument-error"),t.call(this,e)}return ye(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=fa.fromJSON(e);return ar(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return fa._create(r,n)}catch(i){return null}}}]),n}(aa),da=function(e){be(n,e);var t=Ee(n);function n(){return ve(this,n),t.call(this,"twitter.com")}return ye(n,null,[{key:"credential",value:function(e,t){return $i._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(pI){return null}}}]),n}(oa);function pa(e,t){return va.apply(this,arguments)}function va(){return(va=ut(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_r(t,"POST","/v1/accounts:signUp",gr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}da.TWITTER_SIGN_IN_METHOD="twitter.com",da.PROVIDER_ID="twitter.com";var ma=function(){function e(t){ve(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return ye(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=ut(rt().mark((function t(n,r,i){var a,o,u,s,c=arguments;return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Xr._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=ya(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=ut(rt().mark((function t(n,r,i){var a;return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=ya(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function ya(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function ga(){return ga=ut(rt().mark((function e(t){var n,r,i,a;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gi(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new ma({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,pa(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,ma._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),ga.apply(this,arguments)}var ka=function(e){be(n,e);var t=Ee(n);function n(e,r,i,a){var o,u;return ve(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(ke(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return ye(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(qe);function wa(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw ka._fromErrorAndOperation(e,n,t,r);throw n}))}function ba(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function xa(e,t){return _a.apply(this,arguments)}function _a(){return _a=ut(rt().mark((function e(t,n){var r,i,a,o;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=nt(t),e.next=3,Ea(!0,r,n);case 3:return e.t0=Ar,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=ba(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),_a.apply(this,arguments)}function Ia(e,t){return Sa.apply(this,arguments)}function Sa(){return Sa=ut(rt().mark((function e(t,n){var r,i,a=arguments;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=jr,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",ma._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),Sa.apply(this,arguments)}function Ea(e,t,n){return Ta.apply(this,arguments)}function Ta(){return(Ta=ut(rt().mark((function e(t,n,r){var i,a;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qr(n);case 2:i=ba(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",ar(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ca(e,t){return Na.apply(this,arguments)}function Na(){return Na=ut(rt().mark((function e(t,n){var r,i,a,o,u,s,c,l=arguments;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]&&l[2],a=t.auth,o="reauthenticate",e.prev=3,e.next=6,jr(t,wa(a,o,n,t),r);case 6:return ar((u=e.sent).idToken,a,"internal-error"),ar(s=Fr(u.idToken),a,"internal-error"),c=s.sub,ar(t.uid===c,a,"user-mismatch"),e.abrupt("return",ma._forOperation(t,o,u));case 15:throw e.prev=15,e.t0=e.catch(3),(null===(i=e.t0)||void 0===i?void 0:i.code)==="auth/".concat("user-not-found")&&er(a,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Na.apply(this,arguments)}function Aa(e,t){return Ra.apply(this,arguments)}function Ra(){return Ra=ut(rt().mark((function e(t,n){var r,i,a,o,u=arguments;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,wa(t,i,n);case 4:return a=e.sent,e.next=7,ma._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Ra.apply(this,arguments)}function Da(e,t){return Pa.apply(this,arguments)}function Pa(){return(Pa=ut(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aa(gi(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oa(e,t){return La.apply(this,arguments)}function La(){return(La=ut(rt().mark((function e(t,n){var r;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=nt(t),e.next=3,Ea(!1,r,n.providerId);case 3:return e.abrupt("return",Ia(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ma(e,t){return Fa.apply(this,arguments)}function Fa(){return(Fa=ut(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ca(nt(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ja(e,t){return Ua.apply(this,arguments)}function Ua(){return(Ua=ut(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_r(t,"POST","/v1/accounts:signInWithCustomToken",gr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Va(){return(Va=ut(rt().mark((function e(t,n){var r,i,a;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gi(t),e.next=3,ja(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,ma._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ba=function(){function e(t,n){ve(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return ye(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?za._fromServerResponse(e,t):er(e,"internal-error")}}]),e}(),za=function(e){be(n,e);var t=Ee(n);function n(e){var r;return ve(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return ye(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Ba);function qa(e,t,n){var r;ar((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),ar("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(ar(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(ar(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Ka(){return(Ka=ut(rt().mark((function e(t,n,r){var i,a;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=nt(t),a={requestType:"PASSWORD_RESET",email:n},r&&qa(i,a,r),e.next=5,Mi(i,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ga(){return(Ga=ut(rt().mark((function e(t,n,r){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ii(nt(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ha(){return(Ha=ut(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ci(nt(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wa(e,t){return Qa.apply(this,arguments)}function Qa(){return(Qa=ut(rt().mark((function e(t,n){var r,i,a,o;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=nt(t),e.next=3,Ii(r,{oobCode:n});case 3:i=e.sent,ar(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return ar(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:ar(i.mfaInfo,r,"internal-error");case 13:ar(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=Ba._fromServerResponse(gi(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $a(){return($a=ut(rt().mark((function e(t,n){var r,i;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wa(nt(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ya(e,t,n){return Ja.apply(this,arguments)}function Ja(){return(Ja=ut(rt().mark((function e(t,n,r){var i,a,o;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=gi(t),e.next=3,pa(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,ma._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xa(){return(Xa=ut(rt().mark((function e(t,n,r){var i,a;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=nt(t),a={requestType:"EMAIL_SIGNIN",email:n},ar(r.handleCodeInApp,i,"argument-error"),r&&qa(i,a,r),e.next=6,ji(i,a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Za(){return(Za=ut(rt().mark((function e(t,n,r){var i,a;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=nt(t),ar((a=ia.credentialWithLink(n,r||lr()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Da(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eo(e,t){return to.apply(this,arguments)}function to(){return(to=ut(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kr(t,"POST","/v1/accounts:createAuthUri",gr(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function no(){return(no=ut(rt().mark((function e(t,n){var r,i,a,o;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fr()?lr():"http://localhost",i={identifier:n,continueUri:r},e.next=4,eo(nt(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ro(){return(ro=ut(rt().mark((function e(t,n){var r,i,a,o;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=nt(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&qa(r.auth,a,n),e.next=8,Oi(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function io(){return(io=ut(rt().mark((function e(t,n,r){var i,a,o,u;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=nt(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&qa(i.auth,o,r),e.next=8,Vi(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ao(e,t){return oo.apply(this,arguments)}function oo(){return(oo=ut(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uo(){return(uo=ut(rt().mark((function e(t,n){var r,i,a,o,u,s,c;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=nt(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,jr(a,ao(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function so(e,t,n){return co.apply(this,arguments)}function co(){return(co=ut(rt().mark((function e(t,n,r){var i,a,o,u;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,jr(t,Ei(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var lo=ye((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ve(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),fo=function(e){be(n,e);var t=Ee(n);function n(e,r,i,a){var o;return ve(this,n),(o=t.call(this,e,r,i)).username=a,o}return ye(n)}(lo),ho=function(e){be(n,e);var t=Ee(n);function n(e,r){return ve(this,n),t.call(this,e,"facebook.com",r)}return ye(n)}(lo),po=function(e){be(n,e);var t=Ee(n);function n(e,r){return ve(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return ye(n)}(fo),vo=function(e){be(n,e);var t=Ee(n);function n(e,r){return ve(this,n),t.call(this,e,"google.com",r)}return ye(n)}(lo),mo=function(e){be(n,e);var t=Ee(n);function n(e,r,i){return ve(this,n),t.call(this,e,"twitter.com",r,i)}return ye(n)}(fo);function yo(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=Fr(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new lo(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new ho(a,i);case"github.com":return new po(a,i);case"google.com":return new vo(a,i);case"twitter.com":return new mo(a,i,e.screenName||null);case"custom":case"anonymous":return new lo(a,null);default:return new lo(a,r,i)}}(n)}var go=function(){function e(t,n){ve(this,e),this.type=t,this.credential=n}return ye(e,[{key:"toJSON",value:function(){return{multiFactorSession:te({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),ko=function(){function e(t,n,r){ve(this,e),this.session=t,this.hints=n,this.signInResolver=r}return ye(e,[{key:"resolveSignIn",value:function(){var e=ut(rt().mark((function e(t){var n;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=gi(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return Ba._fromServerResponse(r,e)}));ar(i.mfaPendingCredential,r,"internal-error");var o=go._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=ut(rt().mark((function e(t){var a,u,s;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,ma._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return ar(n.user,r,"internal-error"),e.abrupt("return",ma._forOperation(n.user,n.operationType,u));case 17:er(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function wo(e,t){return kr(e,"POST","/v2/accounts/mfaEnrollment:start",gr(e,t))}var bo=function(){function e(t){var n=this;ve(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return Ba._fromServerResponse(t.auth,e)})))}))}return ye(e,[{key:"getSession",value:function(){var e=ut(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=go,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=ut(rt().mark((function e(t,n){var r,i,a;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,jr(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=ut(rt().mark((function e(t){var n,r,i,a;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return i=e.sent,e.next=6,jr(this.user,kr(o=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",gr(o,{idToken:i,mfaEnrollmentId:r})));case 6:return a=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==r})),e.next=10,this.user._updateTokensIfNecessary(a);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}var o}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),xo=new WeakMap;var _o="__sak",Io=function(){function e(t,n){ve(this,e),this.storageRetriever=t,this.type=n}return ye(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(_o,"1"),this.storage.removeItem(_o),Promise.resolve(!0)):Promise.resolve(!1)}catch(pI){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var So=function(e){be(n,e);var t=Ee(n);function n(){var e;return ve(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Me();return ai(e)||fi(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=pi(),e._shouldAllowMigration=!0,e}return ye(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);di()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=ut(rt().mark((function e(t,r){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,On(xe(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=ut(rt().mark((function e(t){var r;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,On(xe(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=ut(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,On(xe(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Io);So.type="LOCAL";var Eo=So,To=function(e){be(n,e);var t=Ee(n);function n(){return ve(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return ye(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Io);To.type="SESSION";var Co=To;function No(e){return Promise.all(e.map(function(){var e=ut(rt().mark((function e(t){var n;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Ao=function(){function e(t){ve(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return ye(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=ut(rt().mark((function e(t){var n,r,i,a,o,u,s,c;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=ut(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,No(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Ro(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Ao.receivers=[];var Do=function(){function e(t){ve(this,e),this.target=t,this.handlers=new Set}return ye(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=ut(rt().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=Ro("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Po(){return window}function Oo(){return"undefined"!==typeof Po().WorkerGlobalScope&&"function"===typeof Po().importScripts}function Lo(){return Mo.apply(this,arguments)}function Mo(){return(Mo=ut(rt().mark((function e(){var t;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Fo(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var jo="firebaseLocalStorageDb",Uo="firebaseLocalStorage",Vo="fbase_key",Bo=function(){function e(t){ve(this,e),this.request=t}return ye(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function zo(e,t){return e.transaction([Uo],t?"readwrite":"readonly").objectStore(Uo)}function qo(){var e=indexedDB.deleteDatabase(jo);return new Bo(e).toPromise()}function Ko(){var e=indexedDB.open(jo,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Uo,{keyPath:Vo})}catch(r){n(r)}})),e.addEventListener("success",ut(rt().mark((function n(){var r;return rt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Uo)){n.next=12;break}return r.close(),n.next=5,qo();case 5:return n.t0=t,n.next=8,Ko();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Go(e,t,n){return Ho.apply(this,arguments)}function Ho(){return Ho=ut(rt().mark((function e(t,n,r){var i,a;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=zo(t,!0).put((te(i={},Vo,n),te(i,"value",r),i)),e.abrupt("return",new Bo(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),Ho.apply(this,arguments)}function Wo(e,t){return Qo.apply(this,arguments)}function Qo(){return Qo=ut(rt().mark((function e(t,n){var r,i;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=zo(t,!1).get(n),e.next=3,new Bo(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Qo.apply(this,arguments)}function $o(e,t){var n=zo(e,!0).delete(t);return new Bo(n).toPromise()}var Yo=function(){function e(){ve(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return ye(e,[{key:"_openDb",value:function(){var e=ut(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Ko();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=ut(rt().mark((function e(t){var n,r;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=ut(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Oo()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=ut(rt().mark((function e(){var t=this;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Ao._getInstance(Oo()?self:null),this.receiver._subscribe("keyChanged",function(){var e=ut(rt().mark((function e(n,r){var i;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=ut(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=ut(rt().mark((function e(){var t,n,r;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lo();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Do(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=ut(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Fo()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=ut(rt().mark((function e(){var t;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Ko();case 5:return t=e.sent,e.next=8,Go(t,_o,"1");case 8:return e.next=10,$o(t,_o);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=ut(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=ut(rt().mark((function e(t,n){var r=this;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(ut(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Go(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=ut(rt().mark((function e(t){var n;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Wo(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=ut(rt().mark((function e(t){var n=this;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(ut(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return $o(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=ut(rt().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=zo(e,!1).getAll();return new Bo(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=ge(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(ut(rt().mark((function t(){return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Yo.type="LOCAL";var Jo=Yo;function Xo(e,t){return kr(e,"POST","/v2/accounts/mfaSignIn:start",gr(e,t))}function Zo(e){return eu.apply(this,arguments)}function eu(){return(eu=ut(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kr(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tu(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=tr("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function nu(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var ru=1e12,iu=function(){function e(t){ve(this,e),this.auth=t,this.counter=ru,this._widgets=new Map}return ye(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new au(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||ru;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||ru;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=ut(rt().mark((function e(t){var n,r;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||ru,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),au=function(){function e(t,n,r){var i=this;ve(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;ar(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return ye(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var ou=nu("rcb"),uu=new dr(3e4,6e4),su="https://www.google.com/recaptcha/api.js?",cu=function(){function e(){ve(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Po().grecaptcha}return ye(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return ar(lu(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Po().grecaptcha):new Promise((function(r,i){var a=Po().setTimeout((function(){i(tr(e,"network-request-failed"))}),uu.get());Po()[ou]=function(){Po().clearTimeout(a),delete Po()[ou];var o=Po().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(tr(e,"internal-error"))},tu("".concat(su,"?").concat(Ye({onload:ou,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(tr(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!Po().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function lu(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var fu=function(){function e(){ve(this,e)}return ye(e,[{key:"load",value:function(){var e=ut(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new iu(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),hu="recaptcha",du={theme:"light",type:"image"},pu=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},du),r=arguments.length>2?arguments[2]:void 0;ve(this,e),this.parameters=n,this.type=hu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=gi(r),this.isInvisible="invisible"===this.parameters.size,ar("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;ar(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new fu:new cu,this.validateStartingState()}return ye(e,[{key:"verify",value:function(){var e=ut(rt().mark((function e(){var t,n,r,i=this;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){ar(!this.parameters.sitekey,this.auth,"argument-error"),ar(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ar("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=Po()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){ar(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=ut(rt().mark((function e(){var t,n;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=ut(rt().mark((function e(){var t;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ar(fr()&&!Oo(),this.auth,"internal-error"),e.next=3,vu();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Zo(this.auth);case 8:ar(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return ar(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function vu(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var mu=function(){function e(t,n){ve(this,e),this.verificationId=t,this.onConfirmation=n}return ye(e,[{key:"confirm",value:function(e){var t=na._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function yu(){return(yu=ut(rt().mark((function e(t,n,r){var i,a;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=gi(t),e.next=3,bu(i,n,nt(r));case 3:return a=e.sent,e.abrupt("return",new mu(a,(function(e){return Da(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gu(e,t,n){return ku.apply(this,arguments)}function ku(){return(ku=ut(rt().mark((function e(t,n,r){var i,a;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=nt(t),e.next=3,Ea(!1,i,"phone");case 3:return e.next=5,bu(i.auth,n,nt(r));case 5:return a=e.sent,e.abrupt("return",new mu(a,(function(e){return Oa(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wu(){return(wu=ut(rt().mark((function e(t,n,r){var i,a;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=nt(t),e.next=3,bu(i.auth,n,nt(r));case 3:return a=e.sent,e.abrupt("return",new mu(a,(function(e){return Ma(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bu(e,t,n){return xu.apply(this,arguments)}function xu(){return xu=ut(rt().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,ar("string"===typeof a,t,"argument-error"),ar(r.type===hu,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return ar("enroll"===u.type,t,"internal-error"),e.next=13,wo(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return ar("signin"===u.type,t,"internal-error"),ar(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Xo(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Yi(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),xu.apply(this,arguments)}function _u(){return(_u=ut(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ia(nt(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Iu=function(){function e(t){ve(this,e),this.providerId=e.PROVIDER_ID,this.auth=gi(t)}return ye(e,[{key:"verifyPhoneNumber",value:function(e,t){return bu(this.auth,e,nt(t))}}],[{key:"credential",value:function(e,t){return na._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?na._fromTokenResponse(n,r):null}}]),e}();function Su(e,t){return t?cr(t):(ar(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Iu.PROVIDER_ID="phone",Iu.PHONE_SIGN_IN_METHOD="phone";var Eu=function(e){be(n,e);var t=Ee(n);function n(e){var r;return ve(this,n),(r=t.call(this,"custom","custom")).params=e,r}return ye(n,[{key:"_getIdTokenResponse",value:function(e){return Wi(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Wi(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Wi(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(_i);function Tu(e){return Aa(e.auth,new Eu(e),e.bypassAuthState)}function Cu(e){var t=e.auth,n=e.user;return ar(n,t,"internal-error"),Ca(n,new Eu(e),e.bypassAuthState)}function Nu(e){return Au.apply(this,arguments)}function Au(){return(Au=ut(rt().mark((function e(t){var n,r;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,ar(r=t.user,n,"internal-error"),e.abrupt("return",Ia(r,new Eu(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ru=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];ve(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return ye(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=ut(rt().mark((function t(n,r){return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=ut(rt().mark((function e(t){var n,r,i,a,o,u,s;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Tu;case"linkViaPopup":case"linkViaRedirect":return Nu;case"reauthViaPopup":case"reauthViaRedirect":return Cu;default:er(this.auth,"internal-error")}}},{key:"resolve",value:function(e){ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Du=new dr(2e3,1e4);function Pu(e,t,n){return Ou.apply(this,arguments)}function Ou(){return(Ou=ut(rt().mark((function e(t,n,r){var i,a,o;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=gi(t),rr(t,n,aa),a=Su(i,r),o=new ju(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lu(){return(Lu=ut(rt().mark((function e(t,n,r){var i,a,o;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return rr((i=nt(t)).auth,n,aa),a=Su(i.auth,r),o=new ju(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mu(e,t,n){return Fu.apply(this,arguments)}function Fu(){return(Fu=ut(rt().mark((function e(t,n,r){var i,a,o;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return rr((i=nt(t)).auth,n,aa),a=Su(i.auth,r),o=new ju(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ju=function(e){be(n,e);var t=Ee(n);function n(e,r,i,a,o){var u;return ve(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=ke(u),u}return ye(n,[{key:"executeNotNull",value:function(){var e=ut(rt().mark((function e(){var t;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return ar(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=ut(rt().mark((function e(){var t,n=this;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ur(1===this.filter.length,"Popup operations only handle one event"),t=Ro(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(tr(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(tr(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(tr(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,Du.get())}()}}]),n}(Ru);ju.currentPopupAction=null;var Uu=new Map,Vu=function(e){be(n,e);var t=Ee(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return ve(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return ye(n,[{key:"execute",value:function(){var e=ut(rt().mark((function e(){var t,r;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Uu.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Bu(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,On(xe(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Uu.set(this.auth._key(),t);case 21:return this.bypassAuthState||Uu.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=ut(rt().mark((function e(t){var r;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",On(xe(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",On(xe(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=ut(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Ru);function Bu(e,t){return zu.apply(this,arguments)}function zu(){return(zu=ut(rt().mark((function e(t,n){var r,i,a;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Wu(n),i=Hu(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qu(e,t){return Ku.apply(this,arguments)}function Ku(){return(Ku=ut(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hu(t)._set(Wu(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gu(e,t){Uu.set(e._key(),t)}function Hu(e){return cr(e._redirectPersistence)}function Wu(e){return ti("pendingRedirect",e.config.apiKey,e.name)}function Qu(e,t,n){return function(e,t,n){return $u.apply(this,arguments)}(e,t,n)}function $u(){return($u=ut(rt().mark((function e(t,n,r){var i,a;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=gi(t),rr(t,n,aa),a=Su(i,r),e.next=5,qu(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yu(e,t,n){return function(e,t,n){return Ju.apply(this,arguments)}(e,t,n)}function Ju(){return(Ju=ut(rt().mark((function e(t,n,r){var i,a,o;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return rr((i=nt(t)).auth,n,aa),a=Su(i.auth,r),e.next=5,qu(a,i.auth);case 5:return e.next=7,is(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xu(e,t,n){return function(e,t,n){return Zu.apply(this,arguments)}(e,t,n)}function Zu(){return(Zu=ut(rt().mark((function e(t,n,r){var i,a,o;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return rr((i=nt(t)).auth,n,aa),a=Su(i.auth,r),e.next=5,Ea(!1,i,n.providerId);case 5:return e.next=7,qu(a,i.auth);case 7:return e.next=9,is(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function es(e,t){return ts.apply(this,arguments)}function ts(){return(ts=ut(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gi(t)._initializationPromise;case 2:return e.abrupt("return",ns(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ns(e,t){return rs.apply(this,arguments)}function rs(){return rs=ut(rt().mark((function e(t,n){var r,i,a,o,u,s=arguments;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=gi(t),a=Su(i,n),o=new Vu(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),rs.apply(this,arguments)}function is(e){return as.apply(this,arguments)}function as(){return(as=ut(rt().mark((function e(t){var n;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ro("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var os=function(){function e(t){ve(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return ye(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ss(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!ss(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(tr(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(us(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(us(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function us(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function ss(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function cs(e){return ls.apply(this,arguments)}function ls(){return ls=ut(rt().mark((function e(t){var n,r=arguments;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",kr(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),ls.apply(this,arguments)}var fs=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hs=/^https?/;function ds(){return(ds=ut(rt().mark((function e(t){var n,r,i,a,o;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,cs(t);case 4:n=e.sent,r=n.authorizedDomains,i=ge(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!ps(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:er(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function ps(e){var t=lr(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!hs.test(r))return!1;if(fs.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var vs=new dr(3e4,6e4);function ms(){var e=Po().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=at(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var ys=null;function gs(e){return ys=ys||function(e){return new Promise((function(t,n){var r,i,a;function o(){ms(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){ms(),n(tr(e,"network-request-failed"))},timeout:vs.get()})}if(null===(i=null===(r=Po().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Po().gapi)||void 0===a?void 0:a.load)){var u=nu("iframefcb");return Po()[u]=function(){gapi.load?o():n(tr(e,"network-request-failed"))},tu("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw ys=null,e}))}(e),ys}var ks=new dr(5e3,15e3),ws={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bs=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xs(e){var t=e.config;ar(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?pr(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:tn},i=bs.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Ye(r).slice(1))}function _s(e){return Is.apply(this,arguments)}function Is(){return Is=ut(rt().mark((function e(t){var n,r;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gs(t);case 2:return n=e.sent,ar(r=Po().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:xs(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ws,dontclear:!0},(function(e){return new Promise(function(){var n=ut(rt().mark((function n(r,i){var a,o,u;return rt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){Po().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=tr(t,"network-request-failed"),o=Po().setTimeout((function(){i(a)}),ks.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),Is.apply(this,arguments)}var Ss={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Es="_blank",Ts="http://localhost",Cs=function(){function e(t){ve(this,e),this.window=t,this.associatedEvent=null}return ye(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Ns(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},Ss),{width:r.toString(),height:i.toString(),top:a,left:o}),l=Me().toLowerCase();n&&(u=oi(l)?Es:n),ii(l)&&(t=t||Ts,s.scrollbars="yes");var f=Object.entries(s).reduce((function(e,t){var n=c(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(hi(l)&&"_self"!==u)return As(t||"",u),new Cs(null);var h=window.open(t||"",u,f);ar(h,e,"popup-blocked");try{h.focus()}catch(d){}return new Cs(h)}function As(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var Rs="__/auth/handler",Ds="emulator/auth/handler";function Ps(e,t,n,r,i,a){ar(e.config.authDomain,e,"auth-domain-config-required"),ar(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:tn,eventId:i};if(t instanceof aa){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var l=c(s[u],2),f=l[0],h=l[1];o[f]=h}}if(t instanceof oa){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,m=Object.keys(p);v<m.length;v++){var y=m[v];void 0===p[y]&&delete p[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Rs);return pr(t,Ds)}(e),"?").concat(Ye(p).slice(1))}var Os="webStorageSupport",Ls=function(){function e(){ve(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Co,this._completeRedirectFn=ns,this._overrideRedirectResult=Gu}return ye(e,[{key:"_openPopup",value:function(){var e=ut(rt().mark((function e(t,n,r,i){var a,o;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ur(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=Ps(t,n,r,lr(),i),e.abrupt("return",Ns(t,o,Ro()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=ut(rt().mark((function e(t,n,r,i){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=Ps(t,n,r,lr(),i),Po().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(ur(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=ut(rt().mark((function e(t){var n,r;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_s(t);case 2:return n=e.sent,r=new os(t),n.register("authEvent",(function(e){return ar(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Os,{type:Os},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),er(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return ds.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return pi()||ai()||fi()}}]),e}(),Ms=Ls,Fs=function(e){be(n,e);var t=Ee(n);function n(e){var r;return ve(this,n),(r=t.call(this,"phone")).credential=e,r}return ye(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return kr(e,"POST","/v2/accounts/mfaEnrollment:finalize",gr(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return kr(e,"POST","/v2/accounts/mfaSignIn:finalize",gr(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){ve(this,e),this.factorId=t}return ye(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return or("unexpected MultiFactorSessionType")}}}]),e}()),js=function(){function e(){ve(this,e)}return ye(e,null,[{key:"assertion",value:function(e){return Fs._fromCredential(e)}}]),e}();js.FACTOR_ID="phone";var Us,Vs="@firebase/auth",Bs="0.20.4",zs=function(){function e(t){ve(this,e),this.auth=t,this.internalListeners=new Map}return ye(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=ut(rt().mark((function e(t){var n;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){ar(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function qs(){return window}Us="Browser",Qt(new st("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){ar(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),ar(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:Us,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vi(Us)},i=new yi(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(cr);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Qt(new st("auth-internal",(function(e){return function(e){return new zs(e)}(gi(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),sn(Vs,Bs,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Us)),sn(Vs,Bs,"esm2017");function Ks(e,t,n){return Gs.apply(this,arguments)}function Gs(){return Gs=ut(rt().mark((function e(t,n,r){var i,a,o,u,s;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=qs(),o=a.BuildInfo,ur(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,Js(n.sessionId);case 4:return u=e.sent,s={},fi()?s.ibi=o.packageName:si()?s.apn=o.packageName:er(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",Ps(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),Gs.apply(this,arguments)}function Hs(){return(Hs=ut(rt().mark((function e(t){var n,r,i;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=qs(),r=n.BuildInfo,i={},fi()?i.iosBundleId=r.packageName:si()?i.androidPackageName=r.packageName:er(t,"operation-not-supported-in-this-environment"),e.next=5,cs(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ws(e){var t=qs().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function Qs(e,t,n){return $s.apply(this,arguments)}function $s(){return $s=ut(rt().mark((function e(t,n,r){var i,a,o;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=qs(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(tr(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),si()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),$s.apply(this,arguments)}function Ys(e){var t,n,r,i,a,o,u,s,c,l,f=qs();ar("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ar("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ar("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ar("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ar("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function Js(e){return Xs.apply(this,arguments)}function Xs(){return(Xs=ut(rt().mark((function e(t){var n,r,i;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Zs(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zs(e){if(ur(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var ec=function(e){be(n,e);var t=Ee(n);function n(){var e;return ve(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return ye(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),On(xe(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=ut(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(os);function tc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:oc(),postBody:null,tenantId:e.tenantId,error:tr(e,"no-auth-event")}}function nc(e,t){return uc()._set(sc(e),t)}function rc(e){return ic.apply(this,arguments)}function ic(){return(ic=ut(rt().mark((function e(t){var n;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uc()._get(sc(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,uc()._remove(sc(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ac(e,t){var n,r,i=function(e){var t=cc(e),n=t.link?decodeURIComponent(t.link):void 0,r=cc(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return cc(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=cc(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?tr(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function oc(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function uc(){return cr(Eo)}function sc(e){return ti("authEvent",e.config.apiKey,e.name)}function cc(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=a(t=n)||it(t)||u(t)||s();r[0];return Je(r.slice(1).join("?"))}var lc=function(){function e(){ve(this,e),this._redirectPersistence=Co,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ns,this._overrideRedirectResult=Gu}return ye(e,[{key:"_initialize",value:function(){var e=ut(rt().mark((function e(t){var n,r;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new ec(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){er(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=ut(rt().mark((function e(t,n,r,i){var a,o,u,s;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ys(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),Uu.clear(),e.next=10,this._originValidation(t);case 10:return o=tc(t,r,i),e.next=13,nc(t,o);case 13:return e.next=15,Ks(t,o,n);case 15:return u=e.sent,e.next=18,Ws(u);case 18:return s=e.sent,e.abrupt("return",Qs(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Hs.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=qs(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(ut(rt().mark((function n(){return rt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,rc(e);case 2:t.onEvent(hc());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=ut(rt().mark((function n(r){var i,a;return rt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,rc(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=ac(i,r.url)),t.onEvent(a||hc());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");qs().handleOpenURL=function(){var e=ut(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),fc=lc;function hc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:tr("no-auth-event")}}function dc(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function pc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me();return!("file:"!==dc()&&"ionic:"!==dc()&&"capacitor:"!==dc()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function vc(){return Be()&&11===(null===document||void 0===document?void 0:document.documentMode)}function mc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me();return/Edge\/\d+/.test(e)}function yc(){try{var e=self.localStorage,t=Ro();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me();return vc()||mc(e)}()||ze()}catch(n){return gc()&&ze()}return!1}function gc(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function kc(){return("http:"===dc()||"https:"===dc()||Ue()||pc())&&!(Ve()||je())&&yc()&&!gc()}function wc(){return pc()&&"undefined"!==typeof document}function bc(){return xc.apply(this,arguments)}function xc(){return(xc=ut(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(wc()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _c={LOCAL:"local",NONE:"none",SESSION:"session"},Ic=ar,Sc="persistence";function Ec(e,t){Ic(Object.values(_c).includes(t),e,"invalid-persistence-type"),Ve()?Ic(t!==_c.SESSION,e,"unsupported-persistence-type"):je()?Ic(t===_c.NONE,e,"unsupported-persistence-type"):gc()?Ic(t===_c.NONE||t===_c.LOCAL&&ze(),e,"unsupported-persistence-type"):Ic(t===_c.NONE||yc(),e,"unsupported-persistence-type")}function Tc(e){return Cc.apply(this,arguments)}function Cc(){return(Cc=ut(rt().mark((function e(t){var n,r;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=Nc(),r=ti(Sc,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nc(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var Ac=ar,Rc=function(){function e(){ve(this,e),this.browserResolver=cr(Ms),this.cordovaResolver=cr(fc),this.underlyingResolver=null,this._redirectPersistence=Co,this._completeRedirectFn=ns,this._overrideRedirectResult=Gu}return ye(e,[{key:"_initialize",value:function(){var e=ut(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=ut(rt().mark((function e(t,n,r,i){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=ut(rt().mark((function e(t,n,r,i){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return wc()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return Ac(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=ut(rt().mark((function e(){var t;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,bc();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Dc(e){return e.unwrap()}function Pc(e,t){var n,r,i=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===(r=t)||void 0===r?void 0:r.code))t.resolver=new jc(e,function(e,t){var n,r=nt(e),i=t;return ar(t.customData.operationType,r,"argument-error"),ar(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),ko._fromError(r,i)}(e,t));else if(i){var a=Oc(t),o=t;a&&(o.credential=a,o.tenantId=i.tenantId||void 0,o.email=i.email||void 0,o.phoneNumber=i.phoneNumber||void 0)}}function Oc(e){var t=(e instanceof qe?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof qe)&&"temporaryProof"in t&&"phoneNumber"in t)return Iu.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Vn)return null;switch(r){case Un:n=ca;break;case Fn:n=sa;break;case jn:n=la;break;case Bn:n=da;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?fa._create(r,u):$i._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new ua(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof qe?n.credentialFromError(e):n.credentialFromResult(e)}function Lc(e,t){return t.catch((function(t){throw t instanceof qe&&Pc(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,Oc(t)),additionalUserInfo:yo(e),user:Uc.getOrCreate(r)}}))}function Mc(e,t){return Fc.apply(this,arguments)}function Fc(){return(Fc=ut(rt().mark((function e(t,n){var r;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return Lc(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var jc=function(){function e(t,n){ve(this,e),this.resolver=n,this.auth=t.wrapped()}return ye(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return Lc(Dc(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),Uc=function(){function e(t){ve(this,e),this._delegate=t,this.multiFactor=function(e){var t=nt(e);return xo.has(t)||xo.set(t,bo._fromUser(t)),xo.get(t)}(t)}return ye(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=ut(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Lc(this.auth,Oa(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=ut(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Mc(this.auth,gu(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=ut(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Lc(this.auth,Mu(this._delegate,t,Rc)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=ut(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tc(gi(this.auth));case 2:return e.abrupt("return",Xu(this._delegate,t,Rc));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=ut(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Lc(this.auth,Ma(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Mc(this.auth,function(e,t,n){return wu.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return Lc(this.auth,function(e,t,n){return Lu.apply(this,arguments)}(this._delegate,e,Rc))}},{key:"reauthenticateWithRedirect",value:function(){var e=ut(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tc(gi(this.auth));case 2:return e.abrupt("return",Yu(this._delegate,t,Rc));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return ro.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=ut(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xa(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return so(nt(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return so(nt(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return _u.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return uo.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return io.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();Uc.USER_MAP=new WeakMap;var Vc=ar,Bc=function(){function e(t,n){if(ve(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;Vc(r,"invalid-api-key",{appName:t.name}),Vc(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?Rc:void 0;this._delegate=n.initialize({options:{persistence:qc(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap($n),this.linkUnderlyingAuth()}return ye(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?Uc.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){wi(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return Ha.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Wa(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return Ga.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=ut(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Lc(this._delegate,Ya(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return no.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=ra.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=ut(rt().mark((function e(){var t;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Vc(kc(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,es(this._delegate,Rc);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",Lc(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){gi(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=zc(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=zc(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Xa.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return Ka.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=ut(rt().mark((function e(t){var n,r;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ec(this._delegate,t),e.t0=t,e.next=e.t0===_c.SESSION?4:e.t0===_c.LOCAL?6:e.t0===_c.NONE?11:13;break;case 4:return n=Co,e.abrupt("break",14);case 6:return e.next=8,cr(Jo)._isAvailable();case 8:return r=e.sent,n=r?Jo:Eo,e.abrupt("break",14);case 11:return n=ei,e.abrupt("break",14);case 13:return e.abrupt("return",er("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return Lc(this._delegate,function(e){return ga.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return Lc(this._delegate,Da(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return Lc(this._delegate,function(e,t){return Va.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return Lc(this._delegate,function(e,t,n){return Da(nt(e),ia.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return Lc(this._delegate,function(e,t,n){return Za.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Mc(this._delegate,function(e,t,n){return yu.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=ut(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Vc(kc(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",Lc(this._delegate,Pu(this._delegate,t,Rc)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=ut(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Vc(kc(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Tc(this._delegate);case 3:return e.abrupt("return",Qu(this._delegate,t,Rc));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return $a.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function zc(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&Uc.getOrCreate(e))},error:t,complete:n}}function qc(e,t){var n=function(e,t){var n=Nc();if(!n)return[];var r=ti(Sc,e,t);switch(n.getItem(r)){case _c.NONE:return[ei];case _c.LOCAL:return[Jo,Co];case _c.SESSION:return[Co];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Jo)||n.push(Jo),"undefined"!==typeof window)for(var r=0,i=[Eo,Co];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(ei)||n.push(ei),n}Bc.Persistence=_c;var Kc=function(){function e(){ve(this,e),this.providerId="phone",this._delegate=new Iu(Dc(Dn.auth()))}return ye(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return Iu.credential(e,t)}}]),e}();Kc.PHONE_SIGN_IN_METHOD=Iu.PHONE_SIGN_IN_METHOD,Kc.PROVIDER_ID=Iu.PROVIDER_ID;var Gc,Hc=ar,Wc=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Dn.app();ve(this,e),Hc(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new pu(t,n,i.auth()),this.type=this._delegate.type}return ye(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(Gc=Dn).INTERNAL.registerComponent(new st("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Bc(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:zn,PASSWORD_RESET:qn,RECOVER_EMAIL:Kn,REVERT_SECOND_FACTOR_ADDITION:Gn,VERIFY_AND_CHANGE_EMAIL:Hn,VERIFY_EMAIL:Wn}},EmailAuthProvider:ia,FacebookAuthProvider:sa,GithubAuthProvider:la,GoogleAuthProvider:ca,OAuthProvider:ua,SAMLAuthProvider:ha,PhoneAuthProvider:Kc,PhoneMultiFactorGenerator:js,RecaptchaVerifier:Wc,TwitterAuthProvider:da,Auth:Bc,AuthCredential:_i,Error:qe}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Gc.registerVersion("@firebase/auth-compat","0.2.17");var Qc,$c="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Yc={},Jc=Jc||{},Xc=$c||self;function Zc(){}function el(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function tl(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var nl="closure_uid_"+(1e9*Math.random()>>>0),rl=0;function il(e,t,n){return e.call.apply(e.bind,arguments)}function al(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function ol(e,t,n){return(ol=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?il:al).apply(null,arguments)}function ul(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function sl(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function cl(){this.s=this.s,this.o=this.o}var ll={};cl.prototype.s=!1,cl.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,nl)&&e[nl]||(e[nl]=++rl)}(this);delete ll[e]}},cl.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var fl=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},hl=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function dl(e){return Array.prototype.concat.apply([],arguments)}function pl(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function vl(e){return/^[\s\xa0]*$/.test(e)}var ml,yl=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function gl(e,t){return-1!=e.indexOf(t)}function kl(e,t){return e<t?-1:e>t?1:0}e:{var wl=Xc.navigator;if(wl){var bl=wl.userAgent;if(bl){ml=bl;break e}}ml=""}function xl(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function _l(e){var t={};for(var n in e)t[n]=e[n];return t}var Il="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Sl(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Il.length;a++)n=Il[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function El(e){return El[" "](e),e}El[" "]=Zc;var Tl,Cl=gl(ml,"Opera"),Nl=gl(ml,"Trident")||gl(ml,"MSIE"),Al=gl(ml,"Edge"),Rl=Al||Nl,Dl=gl(ml,"Gecko")&&!(gl(ml.toLowerCase(),"webkit")&&!gl(ml,"Edge"))&&!(gl(ml,"Trident")||gl(ml,"MSIE"))&&!gl(ml,"Edge"),Pl=gl(ml.toLowerCase(),"webkit")&&!gl(ml,"Edge");function Ol(){var e=Xc.document;return e?e.documentMode:void 0}e:{var Ll="",Ml=function(){var e=ml;return Dl?/rv:([^\);]+)(\)|;)/.exec(e):Al?/Edge\/([\d\.]+)/.exec(e):Nl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Pl?/WebKit\/(\S+)/.exec(e):Cl?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Ml&&(Ll=Ml?Ml[1]:""),Nl){var Fl=Ol();if(null!=Fl&&Fl>parseFloat(Ll)){Tl=String(Fl);break e}}Tl=Ll}var jl,Ul={};function Vl(){return function(e){var t=Ul;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=yl(String(Tl)).split("."),n=yl("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=kl(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||kl(0==a[2].length,0==o[2].length)||kl(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Xc.document&&Nl){var Bl=Ol();jl=Bl||(parseInt(Tl,10)||void 0)}else jl=void 0;var zl=jl,ql=function(){if(!Xc.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Xc.addEventListener("test",Zc,t),Xc.removeEventListener("test",Zc,t)}catch(n){}return e}();function Kl(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Gl(e,t){if(Kl.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Dl){e:{try{El(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Hl[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Gl.Z.h.call(this)}}Kl.prototype.h=function(){this.defaultPrevented=!0},sl(Gl,Kl);var Hl={2:"touch",3:"pen",4:"mouse"};Gl.prototype.h=function(){Gl.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Wl="closure_listenable_"+(1e6*Math.random()|0),Ql=0;function $l(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Ql,this.ca=this.fa=!1}function Yl(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Jl(e){this.src=e,this.g={},this.h=0}function Xl(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=fl(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Yl(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Zl(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}Jl.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Zl(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new $l(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var ef="closure_lm_"+(1e6*Math.random()|0),tf={};function nf(e,t,n,r,i){if(r&&r.once)return af(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)nf(e,t[a],n,r,i);return null}return n=hf(n),e&&e[Wl]?e.N(t,n,tl(r)?!!r.capture:!!r,i):rf(e,t,n,!1,r,i)}function rf(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=tl(i)?!!i.capture:!!i,u=lf(e);if(u||(e[ef]=u=new Jl(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=cf;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ql||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(sf(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function af(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)af(e,t[a],n,r,i);return null}return n=hf(n),e&&e[Wl]?e.O(t,n,tl(r)?!!r.capture:!!r,i):rf(e,t,n,!0,r,i)}function of(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)of(e,t[a],n,r,i);else r=tl(r)?!!r.capture:!!r,n=hf(n),e&&e[Wl]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Zl(a=e.g[t],n,r,i))&&(Yl(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=lf(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Zl(t,n,r,i)),(n=-1<e?t[e]:null)&&uf(n))}function uf(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Wl])Xl(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(sf(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=lf(t))?(Xl(n,e),0==n.h&&(n.src=null,t[ef]=null)):Yl(e)}}}function sf(e){return e in tf?tf[e]:tf[e]="on"+e}function cf(e,t){if(e.ca)e=!0;else{t=new Gl(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&uf(e),e=n.call(r,t)}return e}function lf(e){return(e=e[ef])instanceof Jl?e:null}var ff="__closure_events_fn_"+(1e9*Math.random()>>>0);function hf(e){return"function"===typeof e?e:(e[ff]||(e[ff]=function(t){return e.handleEvent(t)}),e[ff])}function df(){cl.call(this),this.i=new Jl(this),this.P=this,this.I=null}function pf(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Kl(t,e);else if(t instanceof Kl)t.target=t.target||e;else{var i=t;Sl(t=new Kl(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=vf(o,r,!0,t)&&i}if(i=vf(o=t.g=e,r,!0,t)&&i,i=vf(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=vf(o=t.g=n[a],r,!1,t)&&i}function vf(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&Xl(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}sl(df,cl),df.prototype[Wl]=!0,df.prototype.removeEventListener=function(e,t,n,r){of(this,e,t,n,r)},df.prototype.M=function(){if(df.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Yl(n[r]);delete t.g[e],t.h--}}this.I=null},df.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},df.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var mf=Xc.JSON.stringify;function yf(){var e=Sf,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var gf,kf=function(){function e(){ve(this,e),this.h=this.g=null}return ye(e,[{key:"add",value:function(e,t){var n=wf.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),wf=new(function(){function e(t,n){ve(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return ye(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new bf}),(function(e){return e.reset()})),bf=function(){function e(){ve(this,e),this.next=this.g=this.h=null}return ye(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function xf(e){Xc.setTimeout((function(){throw e}),0)}function _f(e,t){gf||function(){var e=Xc.Promise.resolve(void 0);gf=function(){e.then(Ef)}}(),If||(gf(),If=!0),Sf.add(e,t)}var If=!1,Sf=new kf;function Ef(){for(var e;e=yf();){try{e.h.call(e.g)}catch(n){xf(n)}var t=wf;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}If=!1}function Tf(e,t){df.call(this),this.h=e||1,this.g=t||Xc,this.j=ol(this.kb,this),this.l=Date.now()}function Cf(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Nf(e,t,n){if("function"===typeof e)n&&(e=ol(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=ol(e.handleEvent,e)}return 2147483647<Number(t)?-1:Xc.setTimeout(e,t||0)}function Af(e){e.g=Nf((function(){e.g=null,e.i&&(e.i=!1,Af(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}sl(Tf,df),(Qc=Tf.prototype).da=!1,Qc.S=null,Qc.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),pf(this,"tick"),this.da&&(Cf(this),this.start()))}},Qc.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Qc.M=function(){Tf.Z.M.call(this),Cf(this),delete this.g};var Rf=function(e){be(n,e);var t=Ee(n);function n(e,r){var i;return ve(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return ye(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Af(this)}},{key:"M",value:function(){On(xe(n.prototype),"M",this).call(this),this.g&&(Xc.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(cl);function Df(e){cl.call(this),this.h=e,this.g={}}sl(Df,cl);var Pf=[];function Of(e,t,n,r){Array.isArray(n)||(n&&(Pf[0]=n.toString()),n=Pf);for(var i=0;i<n.length;i++){var a=nf(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Lf(e){xl(e.g,(function(e,t){this.g.hasOwnProperty(t)&&uf(e)}),e),e.g={}}function Mf(){this.g=!0}function Ff(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return mf(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}Df.prototype.M=function(){Df.Z.M.call(this),Lf(this)},Df.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Mf.prototype.Aa=function(){this.g=!1},Mf.prototype.info=function(){};var jf={},Uf=null;function Vf(){return Uf=Uf||new df}function Bf(e){Kl.call(this,jf.Ma,e)}function zf(e){var t=Vf();pf(t,new Bf(t,e))}function qf(e,t){Kl.call(this,jf.STAT_EVENT,e),this.stat=t}function Kf(e){var t=Vf();pf(t,new qf(t,e))}function Gf(e,t){Kl.call(this,jf.Na,e),this.size=t}function Hf(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Xc.setTimeout((function(){e()}),t)}jf.Ma="serverreachability",sl(Bf,Kl),jf.STAT_EVENT="statevent",sl(qf,Kl),jf.Na="timingevent",sl(Gf,Kl);var Wf={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Qf={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function $f(){}function Yf(e){return e.h||(e.h=e.i())}function Jf(){}$f.prototype.h=null;var Xf,Zf={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function eh(){Kl.call(this,"d")}function th(){Kl.call(this,"c")}function nh(){}function rh(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Df(this),this.P=ah,e=Rl?125:void 0,this.W=new Tf(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new ih}function ih(){this.i=null,this.g="",this.h=!1}sl(eh,Kl),sl(th,Kl),sl(nh,$f),nh.prototype.g=function(){return new XMLHttpRequest},nh.prototype.i=function(){return{}},Xf=new nh;var ah=45e3,oh={},uh={};function sh(e,t,n){e.K=1,e.v=Rh(Sh(t)),e.s=n,e.U=!0,ch(e,null)}function ch(e,t){e.F=Date.now(),dh(e),e.A=Sh(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Kh(n.h,"t",r),e.C=0,n=e.l.H,e.h=new ih,e.g=Hd(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Rf(ol(e.Ia,e,e.g),e.O)),Of(e.V,e.g,"readystatechange",e.gb),t=e.H?_l(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),zf(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function lh(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function fh(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=hh(e,n))==uh){4==t&&(e.o=4,Kf(14),i=!1),Ff(e.j,e.m,null,"[Incomplete Response]");break}if(r==oh){e.o=4,Kf(15),Ff(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Ff(e.j,e.m,r,null),gh(e,r)}lh(e)&&r!=uh&&r!=oh&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Kf(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),jd(t),t.L=!0,Kf(11))):(Ff(e.j,e.m,n,"[Invalid Chunked Response]"),yh(e),mh(e))}function hh(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?uh:(n=Number(t.substring(n,r)),isNaN(n)?oh:(r+=1)+n>t.length?uh:(t=t.substr(r,n),e.C=r+n,t))}function dh(e){e.Y=Date.now()+e.P,ph(e,e.P)}function ph(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Hf(ol(e.eb,e),t)}function vh(e){e.B&&(Xc.clearTimeout(e.B),e.B=null)}function mh(e){0==e.l.G||e.I||Bd(e.l,e)}function yh(e){vh(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Cf(e.W),Lf(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function gh(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Xh(n.i,e)))if(n.I=e.N,!e.J&&Xh(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Vd(n),Nd(n)}Fd(n),Kf(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Hf(ol(n.ab,n),6e3));if(1>=Jh(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else qd(n,11)}else if((e.J||n.g==e)&&Vd(n),!vl(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(gl(l,"spdy")||gl(l,"quic")||gl(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(Zh(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,Ah(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Gd(r,r.H?r.la:null,r.W),d.J){ed(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(vh(p),dh(p)),r.g=d}else Md(r);0<n.l.length&&Dd(n)}else"stop"!=a[0]&&"close"!=a[0]||qd(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?qd(n,7):Cd(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}zf(4)}catch(a){}}function kh(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(el(e)||"string"===typeof e)hl(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(el(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(el(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function wh(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof wh)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function bh(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];xh(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)xh(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function xh(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Qc=rh.prototype).setTimeout=function(e){this.P=e},Qc.gb=function(e){e=e.target;var t=this.L;t&&3==_d(e)?t.l():this.Ia(e)},Qc.Ia=function(e){try{if(e==this.g)e:{var t=_d(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||Rl||this.g&&(this.h.h||this.g.ga()||Id(this.g)))){this.I||4!=t||7==n||zf(8==n||0>=r?3:2),vh(this);var i=this.g.ba();this.N=i;t:if(lh(this)){var a=Id(this.g);e="";var o=a.length,u=4==_d(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){yh(this),mh(this);var s="";break t}this.h.i=new Xc.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!vl(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,Kf(12),yh(this),mh(this);break e}Ff(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,gh(this,i)}this.U?(fh(this,t,s),Rl&&this.i&&3==t&&(Of(this.V,this.W,"tick",this.fb),this.W.start())):(Ff(this.j,this.m,s,null),gh(this,s)),4==t&&yh(this),this.i&&!this.I&&(4==t?Bd(this.l,this):(this.i=!1,dh(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,Kf(12)):(this.o=0,Kf(13)),yh(this),mh(this)}}}catch(t){}},Qc.fb=function(){if(this.g){var e=_d(this.g),t=this.g.ga();this.C<t.length&&(vh(this),fh(this,e,t),this.i&&4!=e&&dh(this))}},Qc.cancel=function(){this.I=!0,yh(this)},Qc.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(zf(3),Kf(17)),yh(this),this.o=2,mh(this)):ph(this,this.Y-e)},(Qc=wh.prototype).R=function(){bh(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Qc.T=function(){return bh(this),this.g.concat()},Qc.get=function(e,t){return xh(this.h,e)?this.h[e]:t},Qc.set=function(e,t){xh(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Qc.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var _h=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ih(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Ih){this.g=void 0!==t?t:e.g,Eh(this,e.j),this.s=e.s,Th(this,e.i),Ch(this,e.m),this.l=e.l,t=e.h;var n=new Vh;n.i=t.i,t.g&&(n.g=new wh(t.g),n.h=t.h),Nh(this,n),this.o=e.o}else e&&(n=String(e).match(_h))?(this.g=!!t,Eh(this,n[1]||"",!0),this.s=Dh(n[2]||""),Th(this,n[3]||"",!0),Ch(this,n[4]),this.l=Dh(n[5]||"",!0),Nh(this,n[6]||"",!0),this.o=Dh(n[7]||"")):(this.g=!!t,this.h=new Vh(null,this.g))}function Sh(e){return new Ih(e)}function Eh(e,t,n){e.j=n?Dh(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Th(e,t,n){e.i=n?Dh(t,!0):t}function Ch(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Nh(e,t,n){t instanceof Vh?(e.h=t,function(e,t){t&&!e.j&&(Bh(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(zh(this,t),Kh(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=Ph(t,jh)),e.h=new Vh(t,e.g))}function Ah(e,t,n){e.h.set(t,n)}function Rh(e){return Ah(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Dh(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ph(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Oh),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Oh(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ih.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Ph(t,Lh,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Ph(t,Lh,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ph(n,"/"==n.charAt(0)?Fh:Mh,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Ph(n,Uh)),e.join("")};var Lh=/[#\/\?@]/g,Mh=/[#\?:]/g,Fh=/[#\?]/g,jh=/[#\?@]/g,Uh=/#/g;function Vh(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Bh(e){e.g||(e.g=new wh,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function zh(e,t){Bh(e),t=Gh(e,t),xh(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,xh((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&bh(e)))}function qh(e,t){return Bh(e),t=Gh(e,t),xh(e.g.h,t)}function Kh(e,t,n){zh(e,t),0<n.length&&(e.i=null,e.g.set(Gh(e,t),pl(n)),e.h+=n.length)}function Gh(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Qc=Vh.prototype).add=function(e,t){Bh(this),this.i=null,e=Gh(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Qc.forEach=function(e,t){Bh(this),this.g.forEach((function(n,r){hl(n,(function(n){e.call(t,n,r,this)}),this)}),this)},Qc.T=function(){Bh(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Qc.R=function(e){Bh(this);var t=[];if("string"===typeof e)qh(this,e)&&(t=dl(t,this.g.get(Gh(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=dl(t,e[n])}return t},Qc.set=function(e,t){return Bh(this),this.i=null,qh(this,e=Gh(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Qc.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Qc.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var Hh=ye((function e(t,n){ve(this,e),this.h=t,this.g=n}));function Wh(e){this.l=e||$h,Xc.PerformanceNavigationTiming?e=0<(e=Xc.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Xc.g&&Xc.g.Ea&&Xc.g.Ea()&&Xc.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Qh,$h=10;function Yh(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Jh(e){return e.h?1:e.g?e.g.size:0}function Xh(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Zh(e,t){e.g?e.g.add(t):e.h=t}function ed(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function td(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=ge(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return pl(e.i)}function nd(){}function rd(){this.g=new nd}function id(e,t,n){var r=n||"";try{kh(e,(function(e,n){var i=e;tl(e)&&(i=mf(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function ad(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function od(e){this.l=e.$b||null,this.j=e.ib||!1}function ud(e,t){df.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=sd,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Wh.prototype.cancel=function(){if(this.i=td(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=ge(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},nd.prototype.stringify=function(e){return Xc.JSON.stringify(e,void 0)},nd.prototype.parse=function(e){return Xc.JSON.parse(e,void 0)},sl(od,$f),od.prototype.g=function(){return new ud(this.l,this.j)},od.prototype.i=(Qh={},function(){return Qh}),sl(ud,df);var sd=0;function cd(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function ld(e){e.readyState=4,e.l=null,e.j=null,e.A=null,fd(e)}function fd(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Qc=ud.prototype).open=function(e,t){if(this.readyState!=sd)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,fd(this)},Qc.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Xc).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Qc.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ld(this)),this.readyState=sd},Qc.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,fd(this)),this.g&&(this.readyState=3,fd(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof Xc.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;cd(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Qc.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?ld(this):fd(this),3==this.readyState&&cd(this)}},Qc.Ua=function(e){this.g&&(this.response=this.responseText=e,ld(this))},Qc.Ta=function(e){this.g&&(this.response=e,ld(this))},Qc.ha=function(){this.g&&ld(this)},Qc.setRequestHeader=function(e,t){this.v.append(e,t)},Qc.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Qc.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(ud.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var hd=Xc.JSON.parse;function dd(e){df.call(this),this.headers=new wh,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=pd,this.K=this.L=!1}sl(dd,df);var pd="",vd=/^https?$/i,md=["POST","PUT"];function yd(e){return"content-type"==e.toLowerCase()}function gd(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,kd(e),bd(e)}function kd(e){e.D||(e.D=!0,pf(e,"complete"),pf(e,"error"))}function wd(e){if(e.h&&"undefined"!=typeof Jc&&(!e.C[1]||4!=_d(e)||2!=e.ba()))if(e.v&&4==_d(e))Nf(e.Fa,0,e);else if(pf(e,"readystatechange"),4==_d(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(_h)[1]||null;if(!a&&Xc.self&&Xc.self.location){var o=Xc.self.location.protocol;a=o.substr(0,o.length-1)}i=!vd.test(a?a.toLowerCase():"")}t=i}if(t)pf(e,"complete"),pf(e,"success");else{e.m=6;try{var u=2<_d(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",kd(e)}}finally{bd(e)}}}function bd(e,t){if(e.g){xd(e);var n=e.g,r=e.C[0]?Zc:null;e.g=null,e.C=null,t||pf(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function xd(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Xc.clearTimeout(e.A),e.A=null)}function _d(e){return e.g?e.g.readyState:0}function Id(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case pd:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Sd(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return xl(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Ah(e,t,n))}function Ed(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Td(e){this.za=0,this.l=[],this.h=new Mf,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ed("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ed("baseRetryDelayMs",5e3,e),this.$a=Ed("retryDelaySeedMs",1e4,e),this.Ya=Ed("forwardChannelMaxRetries",2,e),this.ra=Ed("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Wh(e&&e.concurrentRequestLimit),this.Ca=new rd,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Cd(e){if(Ad(e),3==e.G){var t=e.V++,n=Sh(e.F);Ah(n,"SID",e.J),Ah(n,"RID",t),Ah(n,"TYPE","terminate"),Od(e,n),(t=new rh(e,e.h,t,void 0)).K=2,t.v=Rh(Sh(n)),n=!1,Xc.navigator&&Xc.navigator.sendBeacon&&(n=Xc.navigator.sendBeacon(t.v.toString(),"")),!n&&Xc.Image&&((new Image).src=t.v,n=!0),n||(t.g=Hd(t.l,null),t.g.ea(t.v)),t.F=Date.now(),dh(t)}Kd(e)}function Nd(e){e.g&&(jd(e),e.g.cancel(),e.g=null)}function Ad(e){Nd(e),e.u&&(Xc.clearTimeout(e.u),e.u=null),Vd(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Xc.clearTimeout(e.m),e.m=null)}function Rd(e,t){e.l.push(new Hh(e.Za++,t)),3==e.G&&Dd(e)}function Dd(e){Yh(e.i)||e.m||(e.m=!0,_f(e.Ha,e),e.C=0)}function Pd(e,t){var n;n=t?t.m:e.V++;var r=Sh(e.F);Ah(r,"SID",e.J),Ah(r,"RID",n),Ah(r,"AID",e.U),Od(e,r),e.o&&e.s&&Sd(r,e.o,e.s),n=new rh(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Ld(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Zh(e.i,n),sh(n,r,t)}function Od(e,t){e.j&&kh({},(function(e,n){Ah(t,n,e)}))}function Ld(e,t,n){n=Math.min(e.l.length,n);var r=e.j?ol(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{id(l,o,"req"+c+"_")}catch(wp){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Md(e){e.g||e.u||(e.Y=1,_f(e.Ga,e),e.A=0)}function Fd(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=Hf(ol(e.Ga,e),zd(e,e.A)),e.A++,!0)}function jd(e){null!=e.B&&(Xc.clearTimeout(e.B),e.B=null)}function Ud(e){e.g=new rh(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Sh(e.oa);Ah(t,"RID","rpc"),Ah(t,"SID",e.J),Ah(t,"CI",e.N?"0":"1"),Ah(t,"AID",e.U),Od(e,t),Ah(t,"TYPE","xmlhttp"),e.o&&e.s&&Sd(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Rh(Sh(t)),n.s=null,n.U=!0,ch(n,e)}function Vd(e){null!=e.v&&(Xc.clearTimeout(e.v),e.v=null)}function Bd(e,t){var n=null;if(e.g==t){Vd(e),jd(e),e.g=null;var r=2}else{if(!Xh(e.i,t))return;n=t.D,ed(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;pf(r=Vf(),new Gf(r,n,t,i)),Dd(e)}else Md(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(Jh(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=Hf(ol(e.Ha,e,t),zd(e,e.C)),e.C++,!0))}(e,t)||2==r&&Fd(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:qd(e,5);break;case 4:qd(e,10);break;case 3:qd(e,6);break;default:qd(e,2)}}function zd(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function qd(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=ol(e.jb,e);n||(n=new Ih("//www.google.com/images/cleardot.gif"),Xc.location&&"http"==Xc.location.protocol||Eh(n,"https"),Rh(n)),function(e,t){var n=new Mf;if(Xc.Image){var r=new Image;r.onload=ul(ad,n,r,"TestLoadImage: loaded",!0,t),r.onerror=ul(ad,n,r,"TestLoadImage: error",!1,t),r.onabort=ul(ad,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=ul(ad,n,r,"TestLoadImage: timeout",!1,t),Xc.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Kf(2);e.G=0,e.j&&e.j.va(t),Kd(e),Ad(e)}function Kd(e){e.G=0,e.I=-1,e.j&&(0==td(e.i).length&&0==e.l.length||(e.i.i.length=0,pl(e.l),e.l.length=0),e.j.ua())}function Gd(e,t,n){var r=function(e){return e instanceof Ih?Sh(e):new Ih(e,void 0)}(n);if(""!=r.i)t&&Th(r,t+"."+r.i),Ch(r,r.m);else{var i=Xc.location;r=function(e,t,n,r){var i=new Ih(null,void 0);return e&&Eh(i,e),t&&Th(i,t),n&&Ch(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&xl(e.aa,(function(e,t){Ah(r,t,e)})),t=e.D,n=e.sa,t&&n&&Ah(r,t,n),Ah(r,"VER",e.ma),Od(e,r),r}function Hd(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new dd(new od({ib:!0})):new dd(e.qa)).L=e.H,t}function Wd(){}function Qd(){if(Nl&&!(10<=Number(zl)))throw Error("Environmental error: no available transport.")}function $d(e,t){df.call(this),this.g=new Td(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!vl(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!vl(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Xd(this)}function Yd(e){eh.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Jd(){th.call(this),this.status=1}function Xd(e){this.g=e}(Qc=dd.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Xf.g(),this.C=this.u?Yf(this.u):Yf(Xf),this.g.onreadystatechange=ol(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void gd(this,a)}e=n||"";var i=new wh(this.headers);r&&kh(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=yd,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=Xc.FormData&&e instanceof Xc.FormData,!(0<=fl(md,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{xd(this),0<this.B&&((this.K=function(e){return Nl&&Vl()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ol(this.pa,this)):this.A=Nf(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){gd(this,a)}},Qc.pa=function(){"undefined"!=typeof Jc&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,pf(this,"timeout"),this.abort(8))},Qc.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,pf(this,"complete"),pf(this,"abort"),bd(this))},Qc.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),bd(this,!0)),dd.Z.M.call(this)},Qc.Fa=function(){this.s||(this.F||this.v||this.l?wd(this):this.cb())},Qc.cb=function(){wd(this)},Qc.ba=function(){try{return 2<_d(this)?this.g.status:-1}catch(Qh){return-1}},Qc.ga=function(){try{return this.g?this.g.responseText:""}catch(Qh){return""}},Qc.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),hd(t)}},Qc.Da=function(){return this.m},Qc.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(Qc=Td.prototype).ma=8,Qc.G=1,Qc.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},Qc.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new rh(this,this.h,e,void 0),n=this.s;if(this.P&&(n?Sl(n=_l(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Ld(this,t,r),Ah(i=Sh(this.F),"RID",e),Ah(i,"CVER",22),this.D&&Ah(i,"X-HTTP-Session-Id",this.D),Od(this,i),this.o&&n&&Sd(i,this.o,n),Zh(this.i,t),this.Ra&&Ah(i,"TYPE","init"),this.ja?(Ah(i,"$req",r),Ah(i,"SID","null"),t.$=!0,sh(t,i,null)):sh(t,i,r),this.G=2}}else 3==this.G&&(e?Pd(this,e):0==this.l.length||Yh(this.i)||Pd(this))},Qc.Ga=function(){if(this.u=null,Ud(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Hf(ol(this.bb,this),e)}},Qc.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Kf(10),Nd(this),Ud(this))},Qc.ab=function(){null!=this.v&&(this.v=null,Nd(this),Fd(this),Kf(19))},Qc.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Kf(2)):(this.h.info("Failed to ping google.com"),Kf(1))},(Qc=Wd.prototype).xa=function(){},Qc.wa=function(){},Qc.va=function(){},Qc.ua=function(){},Qc.Oa=function(){},Qd.prototype.g=function(e,t){return new $d(e,t)},sl($d,df),$d.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),_f(ol(e.hb,e,t))),Kf(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Gd(e,null,e.W),Dd(e)},$d.prototype.close=function(){Cd(this.g)},$d.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,Rd(this.g,t)}else this.v?((t={}).__data__=mf(e),Rd(this.g,t)):Rd(this.g,e)},$d.prototype.M=function(){this.g.j=null,delete this.j,Cd(this.g),delete this.g,$d.Z.M.call(this)},sl(Yd,eh),sl(Jd,th),sl(Xd,Wd),Xd.prototype.xa=function(){pf(this.g,"a")},Xd.prototype.wa=function(e){pf(this.g,new Yd(e))},Xd.prototype.va=function(e){pf(this.g,new Jd(e))},Xd.prototype.ua=function(){pf(this.g,"b")},Qd.prototype.createWebChannel=Qd.prototype.g,$d.prototype.send=$d.prototype.u,$d.prototype.open=$d.prototype.m,$d.prototype.close=$d.prototype.close,Wf.NO_ERROR=0,Wf.TIMEOUT=8,Wf.HTTP_ERROR=6,Qf.COMPLETE="complete",Jf.EventType=Zf,Zf.OPEN="a",Zf.CLOSE="b",Zf.ERROR="c",Zf.MESSAGE="d",df.prototype.listen=df.prototype.N,dd.prototype.listenOnce=dd.prototype.O,dd.prototype.getLastError=dd.prototype.La,dd.prototype.getLastErrorCode=dd.prototype.Da,dd.prototype.getStatus=dd.prototype.ba,dd.prototype.getResponseJson=dd.prototype.Qa,dd.prototype.getResponseText=dd.prototype.ga,dd.prototype.send=dd.prototype.ea;var Zd=Yc.createWebChannelTransport=function(){return new Qd},ep=Yc.getStatEventTarget=function(){return Vf()},tp=Yc.ErrorCode=Wf,np=Yc.EventType=Qf,rp=Yc.Event=jf,ip=Yc.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},ap=Yc.FetchXmlHttpFactory=od,op=Yc.WebChannel=Jf,up=Yc.XhrIo=dd,sp="@firebase/firestore",cp=function(){function e(t){ve(this,e),this.uid=t}return ye(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();cp.UNAUTHENTICATED=new cp(null),cp.GOOGLE_CREDENTIALS=new cp("google-credentials-uid"),cp.FIRST_PARTY=new cp("first-party-uid"),cp.MOCK_USER=new cp("mock-user");var lp="9.8.4",fp=new kt("@firebase/firestore");function hp(){return fp.logLevel}function dp(e){if(fp.logLevel<=ht.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(mp);fp.debug.apply(fp,["Firestore (".concat(lp,"): ").concat(e)].concat(at(i)))}}function pp(e){if(fp.logLevel<=ht.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(mp);fp.error.apply(fp,["Firestore (".concat(lp,"): ").concat(e)].concat(at(i)))}}function vp(e){if(fp.logLevel<=ht.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(mp);fp.warn.apply(fp,["Firestore (".concat(lp,"): ").concat(e)].concat(at(i)))}}function mp(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function yp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(lp,") INTERNAL ASSERTION FAILED: ")+e;throw pp(t),new Error(t)}function gp(e,t){e||yp()}function kp(e,t){return e}var wp={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},bp=function(e){be(n,e);var t=Ee(n);function n(e,r){var i;return ve(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return ye(n)}(qe),xp=ye((function e(){var t=this;ve(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),_p=ye((function e(t,n){ve(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Ip=function(){function e(){ve(this,e)}return ye(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(cp.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Sp=function(){function e(t){ve(this,e),this.token=t,this.changeListener=null}return ye(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Ep=function(){function e(t){ve(this,e),this.t=t,this.currentUser=cp.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return ye(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new xp;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new xp,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(ut(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){dp("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(dp("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new xp)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(dp("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(gp("string"==typeof n.accessToken),new _p(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return gp(null===e||"string"==typeof e),new cp(e)}}]),e}(),Tp=ye((function e(t,n,r){ve(this,e),this.type="FirstParty",this.user=cp.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),Cp=function(){function e(t,n,r){ve(this,e),this.h=t,this.l=n,this.m=r}return ye(e,[{key:"getToken",value:function(){return Promise.resolve(new Tp(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(cp.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Np=ye((function e(t){ve(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Ap=function(){function e(t){ve(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return ye(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&dp("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,dp("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){dp("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):dp("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(gp("string"==typeof t.token),e.p=t.token,new Np(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function Rp(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Dp=function(){function e(){ve(this,e)}return ye(e,null,[{key:"I",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Rp(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Pp(e,t){return e<t?-1:e>t?1:0}function Op(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Lp(e){return e+"\0"}var Mp=function(){function e(t,n){if(ve(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new bp(wp.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new bp(wp.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new bp(wp.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new bp(wp.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return ye(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Pp(this.nanoseconds,e.nanoseconds):Pp(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Fp=function(){function e(t){ve(this,e),this.timestamp=t}return ye(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Mp(0,0))}},{key:"max",value:function(){return new e(new Mp(253402300799,999999999))}}]),e}(),jp=function(){function e(t,n,r){ve(this,e),void 0===n?n=0:n>t.length&&yp(),void 0===r?r=t.length-n:r>t.length-n&&yp(),this.segments=t,this.offset=n,this.len=r}return ye(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Up=function(e){be(n,e);var t=Ee(n);function n(){return ve(this,n),t.apply(this,arguments)}return ye(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new bp(wp.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,at(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(jp),Vp=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Bp=function(e){be(n,e);var t=Ee(n);function n(){return ve(this,n),t.apply(this,arguments)}return ye(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Vp.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new bp(wp.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new bp(wp.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new bp(wp.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new bp(wp.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(jp),zp=function(){function e(t){ve(this,e),this.path=t}return ye(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Up.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Up.fromString(t))}},{key:"fromName",value:function(t){return new e(Up.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Up.emptyPath())}},{key:"comparator",value:function(e,t){return Up.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Up(t.slice()))}}]),e}(),qp=ye((function e(t,n,r,i){ve(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Kp(e){return e.fields.find((function(e){return 2===e.kind}))}function Gp(e){return e.fields.filter((function(e){return 2!==e.kind}))}qp.UNKNOWN_ID=-1;var Hp=ye((function e(t,n){ve(this,e),this.fieldPath=t,this.kind=n})),Wp=function(){function e(t,n){ve(this,e),this.sequenceNumber=t,this.offset=n}return ye(e,null,[{key:"empty",value:function(){return new e(0,Yp.min())}}]),e}();function Qp(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Fp.fromTimestamp(1e9===r?new Mp(n+1,0):new Mp(n,r));return new Yp(i,zp.empty(),t)}function $p(e){return new Yp(e.readTime,e.key,-1)}var Yp=function(){function e(t,n,r){ve(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return ye(e,null,[{key:"min",value:function(){return new e(Fp.min(),zp.empty(),-1)}},{key:"max",value:function(){return new e(Fp.max(),zp.empty(),-1)}}]),e}();function Jp(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=zp.comparator(e.documentKey,t.documentKey))?n:Pp(e.largestBatchId,t.largestBatchId)}var Xp="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Zp=function(){function e(){ve(this,e),this.onCommittedListeners=[]}return ye(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function ev(e){return tv.apply(this,arguments)}function tv(){return tv=ut(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===wp.FAILED_PRECONDITION&&t.message===Xp){e.next=2;break}throw t;case 2:dp("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),tv.apply(this,arguments)}var nv=function(){function e(t){var n=this;ve(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return ye(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&yp(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=ge(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(u){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u(s)}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),rv=function(){function e(t,n){var r=this;ve(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.T=new xp,this.transaction.oncomplete=function(){r.T.resolve()},this.transaction.onabort=function(){n.error?r.T.reject(new ov(t,n.error)):r.T.resolve()},this.transaction.onerror=function(e){var n=fv(e.target.error);r.T.reject(new ov(t,n))}}return ye(e,[{key:"A",get:function(){return this.T.promise}},{key:"abort",value:function(e){e&&this.T.reject(e),this.aborted||(dp("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"R",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new sv(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new ov(n,t)}}}]),e}(),iv=function(){function e(t,n,r){ve(this,e),this.name=t,this.version=n,this.P=r,12.2===e.v(Me())&&pp("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return ye(e,[{key:"k",value:function(){var e=ut(rt().mark((function e(t){var n=this;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return dp("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new ov(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new bp(wp.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new bp(wp.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new ov(t,n))},i.onupgradeneeded=function(e){dp("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.P.O(t,i.transaction,e.oldVersion,n.version).next((function(){dp("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.M&&(this.db.onversionchange=function(e){return n.M(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"F",value:function(e){this.M=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=ut(rt().mark((function e(t,n,r,i){var a,o,u,s,c,l=this;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(rt().mark((function e(){var n,o;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.k(t);case 2:return l.db=e.sent,n=rv.open(l.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.R(),e})).catch((function(e){return n.abort(e),nv.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.A;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s=e.t1,c="FirebaseError"!==s.name&&o<3,dp("SimpleDb","Transaction failed with error:",s.message,"Retrying:",c),this.close(),c){e.next=15;break}return e.abrupt("return",Promise.reject(s));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return dp("SimpleDb","Removing database:",e),cv(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"V",value:function(){if(!ze())return!1;if(e.S())return!0;var t=Me(),n=e.v(t),r=0<n&&n<10,i=e.D(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"S",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/sellme",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.C)}},{key:"N",value:function(e,t){return e.store(t)}},{key:"v",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"D",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),av=function(){function e(t){ve(this,e),this.$=t,this.B=!1,this.L=null}return ye(e,[{key:"isDone",get:function(){return this.B}},{key:"U",get:function(){return this.L}},{key:"cursor",set:function(e){this.$=e}},{key:"done",value:function(){this.B=!0}},{key:"q",value:function(e){this.L=e}},{key:"delete",value:function(){return cv(this.$.delete())}}]),e}(),ov=function(e){be(n,e);var t=Ee(n);function n(e,r){var i;return ve(this,n),(i=t.call(this,wp.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return ye(n)}(bp);function uv(e){return"IndexedDbTransactionError"===e.name}var sv=function(){function e(t){ve(this,e),this.store=t}return ye(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(dp("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(dp("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),cv(n)}},{key:"add",value:function(e){return dp("SimpleDb","ADD",this.store.name,e,e),cv(this.store.add(e))}},{key:"get",value:function(e){var t=this;return cv(this.store.get(e)).next((function(n){return void 0===n&&(n=null),dp("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return dp("SimpleDb","DELETE",this.store.name,e),cv(this.store.delete(e))}},{key:"count",value:function(){return dp("SimpleDb","COUNT",this.store.name),cv(this.store.count())}},{key:"K",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.G(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new nv((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"j",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new nv((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"W",value:function(e,t){dp("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.H=!1;var r=this.cursor(n);return this.G(r,(function(e,t,n){return n.delete()}))}},{key:"J",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.G(r,t)}},{key:"Y",value:function(e){var t=this.cursor({});return new nv((function(n,r){t.onerror=function(e){var t=fv(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"G",value:function(e,t){var n=[];return new nv((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new av(i),o=t(i.primaryKey,i.value,a);if(o instanceof nv){var u=o.catch((function(e){return a.done(),nv.reject(e)}));n.push(u)}a.isDone?r():null===a.U?i.continue():i.continue(a.U)}else r()}})).next((function(){return nv.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function cv(e){return new nv((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=fv(e.target.error);n(t)}}))}var lv=!1;function fv(e){var t=iv.v(Me());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new bp("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return lv||(lv=!0,setTimeout((function(){throw r}),0)),r}}return e}var hv=function(){function e(t,n){ve(this,e),this.asyncQueue=t,this.X=n,this.task=null}return ye(e,[{key:"start",value:function(){}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"Z",value:function(e){var t=this;dp("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,ut(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=dp,e.t1="Documents written: ",e.next=6,t.X.tt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!uv(e.t4)){e.next=17;break}dp("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,ev(e.t4);case 19:return e.next=21,t.Z(1);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),dv=function(){function e(t,n){ve(this,e),this.localStore=t,this.persistence=n}return ye(e,[{key:"tt",value:function(){var e=ut(rt().mark((function e(){var t,n=this,r=arguments;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.et(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"et",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return nv.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return dp("IndexBackiller","Processing collection: ".concat(t)),n.nt(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"nt",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.st(i,n)})).next((function(n){return dp("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"st",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=$p(t);Jp(r,n)>0&&(n=r)})),new Yp(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),pv=function(){function e(t,n){var r=this;ve(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.it(e)},this.rt=function(e){return n.writeSequenceNumber(e)})}return ye(e,[{key:"it",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.rt&&this.rt(e),e}}]),e}();function vv(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function mv(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function yv(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}pv.ot=-1;var gv=function(){function e(t,n){ve(this,e),this.comparator=t,this.root=n||wv.EMPTY}return ye(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,wv.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,wv.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new kv(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new kv(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new kv(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new kv(this.root,e,this.comparator,!0)}}]),e}(),kv=function(){function e(t,n,r,i){ve(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return ye(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),wv=function(){function e(t,n,r,i,a){ve(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return ye(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw yp();if(this.right.isRed())throw yp();var e=this.left.check();if(e!==this.right.check())throw yp();return e+(this.isRed()?0:1)}}]),e}();wv.EMPTY=null,wv.RED=!0,wv.BLACK=!1,wv.EMPTY=new(function(){function e(){ve(this,e),this.size=0}return ye(e,[{key:"key",get:function(){throw yp()}},{key:"value",get:function(){throw yp()}},{key:"color",get:function(){throw yp()}},{key:"left",get:function(){throw yp()}},{key:"right",get:function(){throw yp()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new wv(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var bv=function(){function e(t){ve(this,e),this.comparator=t,this.data=new gv(this.comparator)}return ye(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new xv(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new xv(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),xv=function(){function e(t){ve(this,e),this.iter=t}return ye(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function _v(e){return e.hasNext()?e.getNext():void 0}var Iv=function(){function e(t){ve(this,e),this.fields=t,t.sort(Bp.comparator)}return ye(e,[{key:"unionWith",value:function(t){var n,r=new bv(Bp.comparator),i=ge(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=ge(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=ge(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Op(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}();var Sv=function(e){function t(e){ve(this,t),this.binaryString=e}return ye(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Pp(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Sv.EMPTY_BYTE_STRING=new Sv("");var Ev=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Tv(e){if(gp(!!e),"string"==typeof e){var t=0,n=Ev.exec(e);if(gp(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Cv(e.seconds),nanos:Cv(e.nanos)}}function Cv(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Nv(e){return"string"==typeof e?Sv.fromBase64String(e):Sv.fromUint8Array(e)}function Av(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Rv(e){var t=e.mapValue.fields.__previous_value__;return Av(t)?Rv(t):t}function Dv(e){var t=Tv(e.mapValue.fields.__local_write_time__.timestampValue);return new Mp(t.seconds,t.nanos)}var Pv=ye((function e(t,n,r,i,a,o,u,s){ve(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),Ov=function(){function e(t,n){ve(this,e),this.projectId=t,this.database=n||"(default)"}return ye(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function Lv(e){return null==e}function Mv(e){return 0===e&&1/e==-1/0}function Fv(e){return"number"==typeof e&&Number.isInteger(e)&&!Mv(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var jv={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Uv={nullValue:"NULL_VALUE"};function Vv(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Av(e)?4:em(e)?9007199254740991:10:yp()}function Bv(e,t){if(e===t)return!0;var n=Vv(e);if(n!==Vv(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Dv(e).isEqual(Dv(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Tv(e.timestampValue),r=Tv(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Nv(e.bytesValue).isEqual(Nv(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Cv(e.geoPointValue.latitude)===Cv(t.geoPointValue.latitude)&&Cv(e.geoPointValue.longitude)===Cv(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Cv(e.integerValue)===Cv(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Cv(e.doubleValue),r=Cv(t.doubleValue);return n===r?Mv(n)===Mv(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Op(e.arrayValue.values||[],t.arrayValue.values||[],Bv);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(vv(n)!==vv(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Bv(n[i],r[i])))return!1;return!0}(e,t);default:return yp()}}function zv(e,t){return void 0!==(e.values||[]).find((function(e){return Bv(e,t)}))}function qv(e,t){if(e===t)return 0;var n=Vv(e),r=Vv(t);if(n!==r)return Pp(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Pp(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Cv(e.integerValue||e.doubleValue),r=Cv(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Kv(e.timestampValue,t.timestampValue);case 4:return Kv(Dv(e),Dv(t));case 5:return Pp(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Nv(e),r=Nv(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Pp(n[i],r[i]);if(0!==a)return a}return Pp(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Pp(Cv(e.latitude),Cv(t.latitude));return 0!==n?n:Pp(Cv(e.longitude),Cv(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=qv(n[i],r[i]);if(a)return a}return Pp(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===jv.mapValue&&t===jv.mapValue)return 0;if(e===jv.mapValue)return 1;if(t===jv.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Pp(r[o],a[o]);if(0!==u)return u;var s=qv(n[r[o]],i[a[o]]);if(0!==s)return s}return Pp(r.length,a.length)}(e.mapValue,t.mapValue);default:throw yp()}}function Kv(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Pp(e,t);var n=Tv(e),r=Tv(t),i=Pp(n.seconds,r.seconds);return 0!==i?i:Pp(n.nanos,r.nanos)}function Gv(e){return Hv(e)}function Hv(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Tv(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Nv(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,zp.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=ge(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Hv(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=ge(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Hv(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):yp();var t,n}function Wv(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Qv(e){return!!e&&"integerValue"in e}function $v(e){return!!e&&"arrayValue"in e}function Yv(e){return!!e&&"nullValue"in e}function Jv(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Xv(e){return!!e&&"mapValue"in e}function Zv(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return mv(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Zv(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Zv(e.arrayValue.values[r]);return n}return Object.assign({},e)}function em(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function tm(e){return"nullValue"in e?Uv:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Wv(Ov.empty(),zp.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:yp()}function nm(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Wv(Ov.empty(),zp.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?jv:yp()}function rm(e,t){var n=qv(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function im(e,t){var n=qv(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var am=function(){function e(t){ve(this,e),this.value=t}return ye(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Xv(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zv(t)}},{key:"setAll",value:function(e){var t=this,n=Bp.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Zv(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Xv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Bv(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Xv(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){mv(t,(function(t,n){return e[t]=n}));var r,i=ge(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Zv(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function om(e){var t=[];return mv(e.fields,(function(e,n){var r=new Bp([e]);if(Xv(n)){var i=om(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=ge(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Iv(t)}var um=function(){function e(t,n,r,i,a,o){ve(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return ye(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=am.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=am.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Fp.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Fp.min(),Fp.min(),am.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,Fp.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Fp.min(),am.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Fp.min(),am.empty(),2)}}]),e}(),sm=ye((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;ve(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ut=null}));function cm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new sm(e,t,n,r,i,a,o)}function lm(e){var t=kp(e);if(null===t.ut){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+Gv(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Lv(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Gv(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Gv(e)})).join(",")),t.ut=n}return t.ut}function fm(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Tm(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!Bv(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Nm(e.startAt,t.startAt)&&Nm(e.endAt,t.endAt)}function hm(e){return zp.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function dm(e,t){return e.filters.filter((function(e){return e instanceof mm&&e.field.isEqual(t)}))}function pm(e,t,n){var r,i=Uv,a=!0,o=ge(dm(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Uv,c=!0;switch(u.op){case"<":case"<=":s=tm(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=Uv}rm({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];rm({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function vm(e,t,n){var r,i=jv,a=!0,o=ge(dm(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=jv,c=!0;switch(u.op){case">=":case">":s=nm(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=jv}im({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];im({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var mm=function(e){be(n,e);var t=Ee(n);function n(e,r,i){var a;return ve(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return ye(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(qv(t,this.value)):null!==t&&Vv(this.value)===Vv(t)&&this.at(qv(t,this.value))}},{key:"at",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return yp()}}},{key:"ht",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new ym(e,t,r):"array-contains"===t?new bm(e,r):"in"===t?new xm(e,r):"not-in"===t?new _m(e,r):"array-contains-any"===t?new Im(e,r):new n(e,t,r)}},{key:"ct",value:function(e,t,n){return"in"===t?new gm(e,n):new km(e,n)}}]),n}(function(){return ye((function e(){ve(this,e)}))}()),ym=function(e){be(n,e);var t=Ee(n);function n(e,r,i){var a;return ve(this,n),(a=t.call(this,e,r,i)).key=zp.fromName(i.referenceValue),a}return ye(n,[{key:"matches",value:function(e){var t=zp.comparator(e.key,this.key);return this.at(t)}}]),n}(mm),gm=function(e){be(n,e);var t=Ee(n);function n(e,r){var i;return ve(this,n),(i=t.call(this,e,"in",r)).keys=wm("in",r),i}return ye(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(mm),km=function(e){be(n,e);var t=Ee(n);function n(e,r){var i;return ve(this,n),(i=t.call(this,e,"not-in",r)).keys=wm("not-in",r),i}return ye(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(mm);function wm(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return zp.fromName(e.referenceValue)}))}var bm=function(e){be(n,e);var t=Ee(n);function n(e,r){return ve(this,n),t.call(this,e,"array-contains",r)}return ye(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return $v(t)&&zv(t.arrayValue,this.value)}}]),n}(mm),xm=function(e){be(n,e);var t=Ee(n);function n(e,r){return ve(this,n),t.call(this,e,"in",r)}return ye(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&zv(this.value.arrayValue,t)}}]),n}(mm),_m=function(e){be(n,e);var t=Ee(n);function n(e,r){return ve(this,n),t.call(this,e,"not-in",r)}return ye(n,[{key:"matches",value:function(e){if(zv(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!zv(this.value.arrayValue,t)}}]),n}(mm),Im=function(e){be(n,e);var t=Ee(n);function n(e,r){return ve(this,n),t.call(this,e,"array-contains-any",r)}return ye(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!$v(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return zv(t.value.arrayValue,e)}))}}]),n}(mm),Sm=ye((function e(t,n){ve(this,e),this.position=t,this.inclusive=n})),Em=ye((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";ve(this,e),this.field=t,this.dir=n}));function Tm(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Cm(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?zp.comparator(zp.fromName(o.referenceValue),n.key):qv(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Nm(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Bv(e.position[n],t.position[n]))return!1;return!0}var Am=ye((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;ve(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.lt=null,this.ft=null,this.startAt,this.endAt}));function Rm(e,t,n,r,i,a,o,u){return new Am(e,t,n,r,i,a,o,u)}function Dm(e){return new Am(e)}function Pm(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Om(e){var t,n=ge(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.ht())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function Lm(e){return null!==e.collectionGroup}function Mm(e){var t=kp(e);if(null===t.lt){t.lt=[];var n=Om(t),r=Pm(t);if(null!==n&&null===r)n.isKeyField()||t.lt.push(new Em(n)),t.lt.push(new Em(Bp.keyField(),"asc"));else{var i,a=!1,o=ge(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.lt.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.lt.push(new Em(Bp.keyField(),s))}}}return t.lt}function Fm(e){var t=kp(e);if(!t.ft)if("F"===t.limitType)t.ft=cm(t.path,t.collectionGroup,Mm(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=ge(Mm(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Em(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new Sm(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Sm(t.startAt.position,t.startAt.inclusive):null;t.ft=cm(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.ft}function jm(e,t,n){return new Am(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Um(e,t){return fm(Fm(e),Fm(t))&&e.limitType===t.limitType}function Vm(e){return"".concat(lm(Fm(e)),"|lt:").concat(e.limitType)}function Bm(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(Gv(t.value));var t})).join(", "),"]")),Lv(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Gv(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Gv(e)})).join(",")),"Target(".concat(t,")")}(Fm(e)),"; limitType=").concat(e.limitType,")")}function zm(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):zp.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=ge(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=ge(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Cm(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Mm(e),t))&&!(e.endAt&&!function(e,t,n){var r=Cm(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Mm(e),t))}(e,t)}function qm(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Km(e){return function(t,n){var r,i=!1,a=ge(Mm(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Gm(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Gm(e,t,n){var r=e.field.isKeyField()?zp.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?qv(r,i):yp()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return yp()}}function Hm(e,t){if(e.dt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mv(t)?"-0":t}}function Wm(e){return{integerValue:""+e}}function Qm(e,t){return Fv(t)?Wm(t):Hm(e,t)}var $m=ye((function e(){ve(this,e),this._=void 0}));function Ym(e,t,n){return e instanceof Zm?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof ey?ty(e,t):e instanceof ny?ry(e,t):function(e,t){var n=Xm(e,t),r=ay(n)+ay(e._t);return Qv(n)&&Qv(e._t)?Wm(r):Hm(e.wt,r)}(e,t)}function Jm(e,t,n){return e instanceof ey?ty(e,t):e instanceof ny?ry(e,t):n}function Xm(e,t){return e instanceof iy?Qv(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Zm=function(e){be(n,e);var t=Ee(n);function n(){return ve(this,n),t.apply(this,arguments)}return ye(n)}($m),ey=function(e){be(n,e);var t=Ee(n);function n(e){var r;return ve(this,n),(r=t.call(this)).elements=e,r}return ye(n)}($m);function ty(e,t){var n,r=oy(t),i=ge(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Bv(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var ny=function(e){be(n,e);var t=Ee(n);function n(e){var r;return ve(this,n),(r=t.call(this)).elements=e,r}return ye(n)}($m);function ry(e,t){var n,r=oy(t),i=ge(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Bv(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var iy=function(e){be(n,e);var t=Ee(n);function n(e,r){var i;return ve(this,n),(i=t.call(this)).wt=e,i._t=r,i}return ye(n)}($m);function ay(e){return Cv(e.integerValue||e.doubleValue)}function oy(e){return $v(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var uy=ye((function e(t,n){ve(this,e),this.field=t,this.transform=n}));var sy=ye((function e(t,n){ve(this,e),this.version=t,this.transformResults=n})),cy=function(){function e(t,n){ve(this,e),this.updateTime=t,this.exists=n}return ye(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function ly(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var fy=ye((function e(){ve(this,e)}));function hy(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Iy(e.key,cy.none()):new yy(e.key,e.data,cy.none());var n,r=e.data,i=am.empty(),a=new bv(Bp.comparator),o=ge(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new gy(e.key,i,new Iv(a.toArray()),cy.none())}function dy(e,t,n){e instanceof yy?function(e,t,n){var r=e.value.clone(),i=wy(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof gy?function(e,t,n){if(ly(e.precondition,t)){var r=wy(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(ky(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function py(e,t,n,r){return e instanceof yy?function(e,t,n,r){if(!ly(e.precondition,t))return n;var i=e.value.clone(),a=by(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof gy?function(e,t,n,r){if(!ly(e.precondition,t))return n;var i=by(e.fieldTransforms,r,t),a=t.data;return a.setAll(ky(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return ly(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function vy(e,t){var n,r=null,i=ge(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Xm(a.transform,o||null);null!=u&&(null===r&&(r=am.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function my(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Op(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof ey&&t instanceof ey||e instanceof ny&&t instanceof ny?Op(e.elements,t.elements,Bv):e instanceof iy&&t instanceof iy?Bv(e._t,t._t):e instanceof Zm&&t instanceof Zm}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var yy=function(e){be(n,e);var t=Ee(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return ve(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return ye(n,[{key:"getFieldMask",value:function(){return null}}]),n}(fy),gy=function(e){be(n,e);var t=Ee(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return ve(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return ye(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(fy);function ky(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function wy(e,t,n){var r=new Map;gp(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Jm(o,u,n[i]))}return r}function by(e,t,n){var r,i=new Map,a=ge(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Ym(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var xy,_y,Iy=function(e){be(n,e);var t=Ee(n);function n(e,r){var i;return ve(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return ye(n,[{key:"getFieldMask",value:function(){return null}}]),n}(fy),Sy=function(e){be(n,e);var t=Ee(n);function n(e,r){var i;return ve(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return ye(n,[{key:"getFieldMask",value:function(){return null}}]),n}(fy),Ey=ye((function e(t){ve(this,e),this.count=t}));function Ty(e){switch(e){default:return yp();case wp.CANCELLED:case wp.UNKNOWN:case wp.DEADLINE_EXCEEDED:case wp.RESOURCE_EXHAUSTED:case wp.INTERNAL:case wp.UNAVAILABLE:case wp.UNAUTHENTICATED:return!1;case wp.INVALID_ARGUMENT:case wp.NOT_FOUND:case wp.ALREADY_EXISTS:case wp.PERMISSION_DENIED:case wp.FAILED_PRECONDITION:case wp.ABORTED:case wp.OUT_OF_RANGE:case wp.UNIMPLEMENTED:case wp.DATA_LOSS:return!0}}function Cy(e){if(void 0===e)return pp("GRPC error has no .code"),wp.UNKNOWN;switch(e){case xy.OK:return wp.OK;case xy.CANCELLED:return wp.CANCELLED;case xy.UNKNOWN:return wp.UNKNOWN;case xy.DEADLINE_EXCEEDED:return wp.DEADLINE_EXCEEDED;case xy.RESOURCE_EXHAUSTED:return wp.RESOURCE_EXHAUSTED;case xy.INTERNAL:return wp.INTERNAL;case xy.UNAVAILABLE:return wp.UNAVAILABLE;case xy.UNAUTHENTICATED:return wp.UNAUTHENTICATED;case xy.INVALID_ARGUMENT:return wp.INVALID_ARGUMENT;case xy.NOT_FOUND:return wp.NOT_FOUND;case xy.ALREADY_EXISTS:return wp.ALREADY_EXISTS;case xy.PERMISSION_DENIED:return wp.PERMISSION_DENIED;case xy.FAILED_PRECONDITION:return wp.FAILED_PRECONDITION;case xy.ABORTED:return wp.ABORTED;case xy.OUT_OF_RANGE:return wp.OUT_OF_RANGE;case xy.UNIMPLEMENTED:return wp.UNIMPLEMENTED;case xy.DATA_LOSS:return wp.DATA_LOSS;default:return yp()}}(_y=xy||(xy={}))[_y.OK=0]="OK",_y[_y.CANCELLED=1]="CANCELLED",_y[_y.UNKNOWN=2]="UNKNOWN",_y[_y.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_y[_y.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_y[_y.NOT_FOUND=5]="NOT_FOUND",_y[_y.ALREADY_EXISTS=6]="ALREADY_EXISTS",_y[_y.PERMISSION_DENIED=7]="PERMISSION_DENIED",_y[_y.UNAUTHENTICATED=16]="UNAUTHENTICATED",_y[_y.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_y[_y.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_y[_y.ABORTED=10]="ABORTED",_y[_y.OUT_OF_RANGE=11]="OUT_OF_RANGE",_y[_y.UNIMPLEMENTED=12]="UNIMPLEMENTED",_y[_y.INTERNAL=13]="INTERNAL",_y[_y.UNAVAILABLE=14]="UNAVAILABLE",_y[_y.DATA_LOSS=15]="DATA_LOSS";var Ny=function(){function e(t,n){ve(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return ye(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=ge(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){mv(this.inner,(function(t,n){var r,i=ge(n);try{for(i.s();!(r=i.n()).done;){var a=c(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return yv(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Ay=new gv(zp.comparator);function Ry(){return Ay}var Dy=new gv(zp.comparator);function Py(){for(var e=Dy,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function Oy(e){var t=Dy;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Ly(){return Fy()}function My(){return Fy()}function Fy(){return new Ny((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var jy=new gv(zp.comparator),Uy=new bv(zp.comparator);function Vy(){for(var e=Uy,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var By=new bv(Pp);function zy(){return By}var qy=function(){function e(t,n,r,i,a){ve(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return ye(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,Ky.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Fp.min(),r,zy(),Ry(),Vy())}}]),e}(),Ky=function(){function e(t,n,r,i,a){ve(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return ye(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Sv.EMPTY_BYTE_STRING,n,Vy(),Vy(),Vy())}}]),e}(),Gy=ye((function e(t,n,r,i){ve(this,e),this.gt=t,this.removedTargetIds=n,this.key=r,this.yt=i})),Hy=ye((function e(t,n){ve(this,e),this.targetId=t,this.It=n})),Wy=ye((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Sv.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;ve(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Qy=function(){function e(){ve(this,e),this.Tt=0,this.Et=Jy(),this.At=Sv.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}return ye(e,[{key:"current",get:function(){return this.Rt}},{key:"resumeToken",get:function(){return this.At}},{key:"Pt",get:function(){return 0!==this.Tt}},{key:"vt",get:function(){return this.bt}},{key:"Vt",value:function(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}},{key:"St",value:function(){var e=Vy(),t=Vy(),n=Vy();return this.Et.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:yp()}})),new Ky(this.At,this.Rt,e,t,n)}},{key:"Dt",value:function(){this.bt=!1,this.Et=Jy()}},{key:"Ct",value:function(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}},{key:"xt",value:function(e){this.bt=!0,this.Et=this.Et.remove(e)}},{key:"Nt",value:function(){this.Tt+=1}},{key:"kt",value:function(){this.Tt-=1}},{key:"Ot",value:function(){this.bt=!0,this.Rt=!0}}]),e}(),$y=function(){function e(t){ve(this,e),this.Mt=t,this.Ft=new Map,this.$t=Ry(),this.Bt=Yy(),this.Lt=new bv(Pp)}return ye(e,[{key:"Ut",value:function(e){var t,n=ge(e.gt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.yt&&e.yt.isFoundDocument()?this.qt(r,e.yt):this.Kt(r,e.key,e.yt)}}catch(u){n.e(u)}finally{n.f()}var i,a=ge(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Kt(o,e.key,e.yt)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Gt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Qt(n);switch(e.state){case 0:t.jt(n)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||t.removeTarget(n);break;case 3:t.jt(n)&&(r.Ot(),r.Vt(e.resumeToken));break;case 4:t.jt(n)&&(t.Wt(n),r.Vt(e.resumeToken));break;default:yp()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((function(e,r){n.jt(r)&&t(r)}))}},{key:"zt",value:function(e){var t=e.targetId,n=e.It.count,r=this.Ht(t);if(r){var i=r.target;if(hm(i))if(0===n){var a=new zp(i.path);this.Kt(t,a,um.newNoDocument(a,Fp.min()))}else gp(1===n);else this.Jt(t)!==n&&(this.Wt(t),this.Lt=this.Lt.add(t))}}},{key:"Yt",value:function(e){var t=this,n=new Map;this.Ft.forEach((function(r,i){var a=t.Ht(i);if(a){if(r.current&&hm(a.target)){var o=new zp(a.target.path);null!==t.$t.get(o)||t.Xt(i,o)||t.Kt(i,o,um.newNoDocument(o,e))}r.vt&&(n.set(i,r.St()),r.Dt())}}));var r=Vy();this.Bt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Ht(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.$t.forEach((function(t,n){return n.setReadTime(e)}));var i=new qy(e,n,this.Lt,this.$t,r);return this.$t=Ry(),this.Bt=Yy(),this.Lt=new bv(Pp),i}},{key:"qt",value:function(e,t){if(this.jt(e)){var n=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,n),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}}},{key:"Kt",value:function(e,t,n){if(this.jt(e)){var r=this.Qt(e);this.Xt(e,t)?r.Ct(t,1):r.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),n&&(this.$t=this.$t.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Ft.delete(e)}},{key:"Jt",value:function(e){var t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Nt",value:function(e){this.Qt(e).Nt()}},{key:"Qt",value:function(e){var t=this.Ft.get(e);return t||(t=new Qy,this.Ft.set(e,t)),t}},{key:"Zt",value:function(e){var t=this.Bt.get(e);return t||(t=new bv(Pp),this.Bt=this.Bt.insert(e,t)),t}},{key:"jt",value:function(e){var t=null!==this.Ht(e);return t||dp("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Ht",value:function(e){var t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}},{key:"Wt",value:function(e){var t=this;this.Ft.set(e,new Qy),this.Mt.getRemoteKeysForTarget(e).forEach((function(n){t.Kt(e,n,null)}))}},{key:"Xt",value:function(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}]),e}();function Yy(){return new gv(zp.comparator)}function Jy(){return new gv(zp.comparator)}var Xy={asc:"ASCENDING",desc:"DESCENDING"},Zy={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},eg=ye((function e(t,n){ve(this,e),this.databaseId=t,this.dt=n}));function tg(e,t){return e.dt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function ng(e,t){return e.dt?t.toBase64():t.toUint8Array()}function rg(e,t){return tg(e,t.toTimestamp())}function ig(e){return gp(!!e),Fp.fromTimestamp(function(e){var t=Tv(e);return new Mp(t.seconds,t.nanos)}(e))}function ag(e,t){return function(e){return new Up(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function og(e){var t=Up.fromString(e);return gp(Ng(t)),t}function ug(e,t){return ag(e.databaseId,t.path)}function sg(e,t){var n=og(t);if(n.get(1)!==e.databaseId.projectId)throw new bp(wp.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new bp(wp.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new zp(hg(n))}function cg(e,t){return ag(e.databaseId,t)}function lg(e){var t=og(e);return 4===t.length?Up.emptyPath():hg(t)}function fg(e){return new Up(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function hg(e){return gp(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function dg(e,t,n){return{name:ug(e,t),fields:n.value.mapValue.fields}}function pg(e,t,n){var r=sg(e,t.name),i=ig(t.updateTime),a=new am({mapValue:{fields:t.fields}}),o=um.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function vg(e,t){return"found"in t?function(e,t){gp(!!t.found),t.found.name,t.found.updateTime;var n=sg(e,t.found.name),r=ig(t.found.updateTime),i=new am({mapValue:{fields:t.found.fields}});return um.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){gp(!!t.missing),gp(!!t.readTime);var n=sg(e,t.missing),r=ig(t.readTime);return um.newNoDocument(n,r)}(e,t):yp()}function mg(e,t){var n;if(t instanceof yy)n={update:dg(e,t.key,t.value)};else if(t instanceof Iy)n={delete:ug(e,t.key)};else if(t instanceof gy)n={update:dg(e,t.key,t.data),updateMask:Cg(t.fieldMask)};else{if(!(t instanceof Sy))return yp();n={verify:ug(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Zm)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ey)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ny)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof iy)return{fieldPath:t.field.canonicalString(),increment:n._t};throw yp()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:rg(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:yp()}(e,t.precondition)),n}function yg(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?cy.updateTime(ig(e.updateTime)):void 0!==e.exists?cy.exists(e.exists):cy.none()}(t.currentDocument):cy.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)gp("REQUEST_TIME"===t.setToServerValue),n=new Zm;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new ey(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new ny(i)}else"increment"in t?n=new iy(e,t.increment):yp();var a=Bp.fromServerFormat(t.fieldPath);return new uy(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=sg(e,t.update.name),a=new am({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Iv(t.map((function(e){return Bp.fromServerFormat(e)})))}(t.updateMask);return new gy(i,a,o,n,r)}return new yy(i,a,n,r)}if(t.delete){var u=sg(e,t.delete);return new Iy(u,n)}if(t.verify){var s=sg(e,t.verify);return new Sy(s,n)}return yp()}function gg(e,t){return{documents:[cg(e,t.path)]}}function kg(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=cg(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=cg(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(Jv(e.value))return{unaryFilter:{field:Ig(e.field),op:"IS_NAN"}};if(Yv(e.value))return{unaryFilter:{field:Ig(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Jv(e.value))return{unaryFilter:{field:Ig(e.field),op:"IS_NOT_NAN"}};if(Yv(e.value))return{unaryFilter:{field:Ig(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ig(e.field),op:_g(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Ig(e.field),direction:xg(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.dt||Lv(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function wg(e){var t=lg(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){gp(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=bg(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new Em(Sg(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return Lv(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Sm(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Sm(n,t)}(n.endAt)),Rm(t,i,u,o,s,"F",c,l)}function bg(e){return e?void 0!==e.unaryFilter?[Tg(e)]:void 0!==e.fieldFilter?[Eg(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return bg(e)})).reduce((function(e,t){return e.concat(t)})):yp():[]}function xg(e){return Xy[e]}function _g(e){return Zy[e]}function Ig(e){return{fieldPath:e.canonicalString()}}function Sg(e){return Bp.fromServerFormat(e.fieldPath)}function Eg(e){return mm.create(Sg(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return yp()}}(e.fieldFilter.op),e.fieldFilter.value)}function Tg(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Sg(e.unaryFilter.field);return mm.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Sg(e.unaryFilter.field);return mm.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Sg(e.unaryFilter.field);return mm.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Sg(e.unaryFilter.field);return mm.create(i,"!=",{nullValue:"NULL_VALUE"});default:return yp()}}function Cg(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Ng(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Ag(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Dg(t)),t=Rg(e.get(n),t);return Dg(t)}function Rg(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Dg(e){return e+"\x01\x01"}function Pg(e){var t=e.length;if(gp(t>=2),2===t)return gp("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Up.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&yp(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:yp()}a=o+2}return new Up(r)}var Og=["userId","batchId"];function Lg(e,t){return[e,Ag(t)]}function Mg(e,t,n){return[e,Ag(t),n]}var Fg={},jg=["prefixPath","collectionGroup","readTime","documentId"],Ug=["prefixPath","collectionGroup","documentId"],Vg=["collectionGroup","readTime","prefixPath","documentId"],Bg=["canonicalId","targetId"],zg=["targetId","path"],qg=["path","targetId"],Kg=["collectionId","parent"],Gg=["indexId","uid"],Hg=["uid","sequenceNumber"],Wg=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Qg=["indexId","uid","orderedDocumentKey"],$g=["userId","collectionPath","documentId"],Yg=["userId","collectionPath","largestBatchId"],Jg=["userId","collectionGroup","largestBatchId"],Xg=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Zg=[].concat(at(Xg),["documentOverlays"]),ek=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],tk=ek,nk=[].concat(tk,["indexConfiguration","indexState","indexEntries"]),rk=function(e){be(n,e);var t=Ee(n);function n(e,r){var i;return ve(this,n),(i=t.call(this)).ee=e,i.currentSequenceNumber=r,i}return ye(n)}(Zp);function ik(e,t){var n=kp(e);return iv.N(n.ee,t)}var ak=function(){function e(t,n,r,i){ve(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return ye(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&dy(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=ge(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=py(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=ge(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=py(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=My();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=hy(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(Fp.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Vy())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Op(this.mutations,e.mutations,(function(e,t){return my(e,t)}))&&Op(this.baseMutations,e.baseMutations,(function(e,t){return my(e,t)}))}}]),e}(),ok=function(){function e(t,n,r,i){ve(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return ye(e,null,[{key:"from",value:function(t,n,r){gp(t.mutations.length===r.length);for(var i=jy,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),uk=function(){function e(t,n){ve(this,e),this.largestBatchId=t,this.mutation=n}return ye(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),sk=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Fp.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Fp.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Sv.EMPTY_BYTE_STRING;ve(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return ye(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),ck=ye((function e(t){ve(this,e),this.ne=t}));function lk(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:fk(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:ug(e,t.key),fields:t.data.value.mapValue.fields,updateTime:tg(e,t.version.toTimestamp())}}(e.ne,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:hk(t.version)};else{if(!t.isUnknownDocument())return yp();r.unknownDocument={path:n.path.toArray(),version:hk(t.version)}}return r}function fk(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function hk(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function dk(e){var t=new Mp(e.seconds,e.nanoseconds);return Fp.fromTimestamp(t)}function pk(e,t){for(var n=(t.baseMutations||[]).map((function(t){return yg(e.ne,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return yg(e.ne,t)})),u=Mp.fromMillis(t.localWriteTimeMs);return new ak(t.batchId,u,n,o)}function vk(e){var t,n,r=dk(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?dk(e.lastLimboFreeSnapshotVersion):Fp.min();return void 0!==e.query.documents?(gp(1===(n=e.query).documents.length),t=Fm(Dm(lg(n.documents[0])))):t=function(e){return Fm(wg(e))}(e.query),new sk(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Sv.fromBase64String(e.resumeToken))}function mk(e,t){var n,r=hk(t.snapshotVersion),i=hk(t.lastLimboFreeSnapshotVersion);n=hm(t.target)?gg(e.ne,t.target):kg(e.ne,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:lm(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function yk(e){var t=wg({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?jm(t,t.limit,"L"):t}function gk(e,t){return new uk(t.largestBatchId,yg(e.ne,t.overlayMutation))}function kk(e,t){var n=t.path.lastSegment();return[e,Ag(t.path.popLast()),n]}function wk(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:hk(r.readTime),documentKey:Ag(r.documentKey.path),largestBatchId:r.largestBatchId}}var bk=function(){function e(){ve(this,e)}return ye(e,[{key:"getBundleMetadata",value:function(e,t){return xk(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:dk(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return xk(e).put({bundleId:(n=t).id,createTime:hk(ig(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return _k(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:yk(t.bundledQuery),readTime:dk(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return _k(e).put(function(e){return{name:e.name,readTime:hk(ig(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function xk(e){return ik(e,"bundles")}function _k(e){return ik(e,"namedQueries")}var Ik=function(){function e(t,n){ve(this,e),this.wt=t,this.userId=n}return ye(e,[{key:"getOverlay",value:function(e,t){var n=this;return Sk(e).get(kk(this.userId,t)).next((function(e){return e?gk(n.wt,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=Ly();return nv.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new uk(t,a);i.push(r.ie(e,o))})),nv.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(Ag(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(Sk(e).W("collectionPathOverlayIndex",i))})),nv.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=Ly(),a=Ag(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Sk(e).K("collectionPathOverlayIndex",o).next((function(e){var t,n=ge(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=gk(r.wt,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=Ly(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Sk(e).J({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=gk(a.wt,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"ie",value:function(e,t){return Sk(e).put(function(e,t,n){var r=c(kk(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:mg(e.ne,n.mutation)}}(this.wt,this.userId,t))}}],[{key:"se",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function Sk(e){return ik(e,"documentOverlays")}var Ek=function(){function e(){ve(this,e)}return ye(e,[{key:"re",value:function(e,t){this.oe(e,t),t.ue()}},{key:"oe",value:function(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(Cv(e.integerValue));else if("doubleValue"in e){var n=Cv(e.doubleValue);isNaN(n)?this.ce(t,13):(this.ce(t,15),Mv(n)?t.ae(0):t.ae(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he("".concat(r.seconds||"")),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(Nv(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ce(t,45),t.ae(i.latitude||0),t.ae(i.longitude||0)}else"mapValue"in e?em(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):yp()}},{key:"le",value:function(e,t){this.ce(t,25),this.ge(e,t)}},{key:"ge",value:function(e,t){t.he(e)}},{key:"we",value:function(e,t){var n=e.fields||{};this.ce(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.le(a,t),this.oe(n[a],t)}}},{key:"me",value:function(e,t){var n=e.values||[];this.ce(t,50);var r,i=ge(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.oe(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"_e",value:function(e,t){var n=this;this.ce(t,37),zp.fromName(e).path.forEach((function(e){n.ce(t,60),n.ge(e,t)}))}},{key:"ce",value:function(e,t){e.ae(t)}},{key:"fe",value:function(e){e.ae(2)}}]),e}();function Tk(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Ck(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=Tk(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Ek.ye=new Ek;var Nk=function(){function e(){ve(this,e),this.buffer=new Uint8Array(1024),this.position=0}return ye(e,[{key:"pe",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ie(n.value),n=t.next();this.Te()}},{key:"Ee",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ae(n.value),n=t.next();this.Re()}},{key:"be",value:function(e){var t,n=ge(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ie(i);else if(i<2048)this.Ie(960|i>>>6),this.Ie(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ie(480|i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i);else{var a=r.codePointAt(0);this.Ie(240|a>>>18),this.Ie(128|63&a>>>12),this.Ie(128|63&a>>>6),this.Ie(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Te()}},{key:"Pe",value:function(e){var t,n=ge(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{var a=r.codePointAt(0);this.Ae(240|a>>>18),this.Ae(128|63&a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Re()}},{key:"ve",value:function(e){var t=this.Ve(e),n=Ck(t);this.Se(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"De",value:function(e){var t=this.Ve(e),n=Ck(t);this.Se(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Ce",value:function(){this.xe(255),this.xe(255)}},{key:"Ne",value:function(){this.ke(255),this.ke(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Oe",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ve",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ie",value:function(e){var t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}},{key:"Ae",value:function(e){var t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}},{key:"Te",value:function(){this.xe(0),this.xe(1)}},{key:"Re",value:function(){this.ke(0),this.ke(1)}},{key:"xe",value:function(e){this.Se(1),this.buffer[this.position++]=e}},{key:"ke",value:function(e){this.Se(1),this.buffer[this.position++]=~e}},{key:"Se",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Ak=function(){function e(t){ve(this,e),this.Me=t}return ye(e,[{key:"de",value:function(e){this.Me.pe(e)}},{key:"he",value:function(e){this.Me.be(e)}},{key:"ae",value:function(e){this.Me.ve(e)}},{key:"ue",value:function(){this.Me.Ce()}}]),e}(),Rk=function(){function e(t){ve(this,e),this.Me=t}return ye(e,[{key:"de",value:function(e){this.Me.Ee(e)}},{key:"he",value:function(e){this.Me.Pe(e)}},{key:"ae",value:function(e){this.Me.De(e)}},{key:"ue",value:function(){this.Me.Ne()}}]),e}(),Dk=function(){function e(){ve(this,e),this.Me=new Nk,this.Fe=new Ak(this.Me),this.$e=new Rk(this.Me)}return ye(e,[{key:"seed",value:function(e){this.Me.seed(e)}},{key:"Be",value:function(e){return 0===e?this.Fe:this.$e}},{key:"Oe",value:function(){return this.Me.Oe()}},{key:"reset",value:function(){this.Me.reset()}}]),e}(),Pk=function(){function e(t,n,r,i){ve(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return ye(e,[{key:"Le",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Ok(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=Lk(e.arrayValue,t.arrayValue))?n:0!==(n=Lk(e.directionalValue,t.directionalValue))?n:zp.comparator(e.documentKey,t.documentKey)}function Lk(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Mk=function(){function e(t){ve(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ue=t.orderBy,this.qe=[];var n,r=ge(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.ht()?this.Ke=i:this.qe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return ye(e,[{key:"Ge",value:function(e){var t=Kp(e);if(void 0!==t&&!this.Qe(t))return!1;for(var n=Gp(e),r=0,i=0;r<n.length&&this.Qe(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Ke){var a=n[r];if(!this.je(this.Ke,a)||!this.We(this.Ue[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ue.length||!this.We(this.Ue[i++],o))return!1}return!0}},{key:"Qe",value:function(e){var t,n=ge(this.qe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.je(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"je",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"We",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),Fk=function(){function e(){ve(this,e),this.ze=new jk}return ye(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.ze.add(t),nv.resolve()}},{key:"getCollectionParents",value:function(e,t){return nv.resolve(this.ze.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return nv.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return nv.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return nv.resolve(null)}},{key:"getIndexType",value:function(e,t){return nv.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return nv.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return nv.resolve(null)}},{key:"getMinOffset",value:function(e,t){return nv.resolve(Yp.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return nv.resolve(Yp.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return nv.resolve()}},{key:"updateIndexEntries",value:function(e,t){return nv.resolve()}}]),e}(),jk=function(){function e(){ve(this,e),this.index={}}return ye(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new bv(Up.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new bv(Up.comparator)).toArray()}}]),e}(),Uk=new Uint8Array(0),Vk=function(){function e(t,n){ve(this,e),this.user=t,this.databaseId=n,this.He=new jk,this.Je=new Ny((function(e){return lm(e)}),(function(e,t){return fm(e,t)})),this.uid=t.uid||""}return ye(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.He.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.He.add(t)}));var a={collectionId:r,parent:Ag(i)};return Bk(e).put(a)}return nv.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Lp(t),""],!1,!0);return Bk(e).K(r).next((function(e){var r,i=ge(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Pg(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=qk(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=Kk(e);return a.next((function(e){o.put(wk(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=qk(e),r=Kk(e),i=zk(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=zk(e),i=!0,a=new Map;return nv.forEach(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Vy(),o=[];return nv.forEach(a,(function(i,a){var u;dp("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(lm(t)));var s=function(e,t){var n=Kp(t);if(void 0===n)return null;var r,i=ge(dm(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=ge(Gp(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=ge(dm(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=ge(Gp(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?pm(e,o.fieldPath,e.startAt):vm(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Sm(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=ge(Gp(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?vm(e,o.fieldPath,e.endAt):pm(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Sm(r,i)}(a,i),h=n.Ze(i,a,l),d=n.Ze(i,a,f),p=n.tn(i,a,c),v=n.en(i.indexId,s,h,l.inclusive,d,f.inclusive,p);return nv.forEach(v,(function(n){return r.j(n,t.limit).next((function(t){t.forEach((function(t){var n=zp.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return nv.resolve(null)}))}},{key:"Ye",value:function(e){var t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}},{key:"en",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(s){var f=t?u.nn(t[s/c]):Uk,h=u.sn(e,f,n[s%c],r),d=u.rn(e,f,i[s%c],a),p=o.map((function(t){return u.sn(e,f,t,!0)}));l.push.apply(l,at(u.createRange(h,d,p)))},h=0;h<s;++h)f(h);return l}},{key:"sn",value:function(e,t,n,r){var i=new Pk(e,zp.empty(),t,n);return r?i:i.Le()}},{key:"rn",value:function(e,t,n,r){var i=new Pk(e,zp.empty(),t,n);return r?i.Le():i}},{key:"Xe",value:function(e,t){var n=new Mk(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=ge(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.Ge(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2;return nv.forEach(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new bv(Bp.comparator),r=!1,i=ge(e.filters);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.field.isKeyField()||("array-contains"===a.op||"array-contains-any"===a.op?r=!0:n=n.add(a.field))}}catch(c){i.e(c)}finally{i.f()}var o,u=ge(e.orderBy);try{for(u.s();!(o=u.n()).done;){var s=o.value;s.field.isKeyField()||(n=n.add(s.field))}}catch(c){u.e(c)}finally{u.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return r}))}},{key:"on",value:function(e,t){var n,r=new Dk,i=ge(Gp(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Be(a.kind);Ek.ye.re(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Oe()}},{key:"nn",value:function(e){var t=new Dk;return Ek.ye.re(e,t.Be(0)),t.Oe()}},{key:"un",value:function(e,t){var n=new Dk;return Ek.ye.re(Wv(this.databaseId,t),n.Be(function(e){var t=Gp(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Oe()}},{key:"tn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Dk);var i,a=0,o=ge(Gp(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=ge(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.cn(t,s.fieldPath)&&$v(c))r=this.an(r,s,c);else{var h=f.Be(s.kind);Ek.ye.re(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.hn(r)}},{key:"Ze",value:function(e,t,n){return this.tn(e,t,n.position)}},{key:"hn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Oe();return t}},{key:"an",value:function(e,t,n){var r,i=at(e),a=[],o=ge(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=ge(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new Dk;f.seed(l.Oe()),Ek.ye.re(s,f.Be(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"cn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof mm&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=qk(e),i=Kk(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next((function(e){var t=[];return nv.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Wp(t.sequenceNumber,new Yp(dk(t.readTime),new zp(Pg(t.documentKey)),t.largestBatchId)):Wp.empty(),r=e.fields.map((function(e){var t=c(e,2),n=t[0],r=t[1];return new Hp(Bp.fromServerFormat(n),r)}));return new qp(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Pp(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=qk(e),a=Kk(e);return this.ln(e).next((function(e){return i.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return nv.forEach(t,(function(t){return a.put(wk(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return nv.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?nv.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),nv.forEach(a,(function(r){return n.fn(e,t,r).next((function(t){var a=n.dn(i,r);return t.isEqual(a)?nv.resolve():n._n(e,i,r,t,a)}))}))}))}))}},{key:"wn",value:function(e,t,n,r){return zk(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.un(n,t.key),documentKey:t.key.path.toArray()})}},{key:"mn",value:function(e,t,n,r){return zk(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.un(n,t.key),t.key.path.toArray()])}},{key:"fn",value:function(e,t,n){var r=zk(e),i=new bv(Ok);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.un(n,t)])},(function(e,r){i=i.add(new Pk(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"dn",value:function(e,t){var n=new bv(Ok),r=this.on(t,e);if(null==r)return n;var i=Kp(t);if(null!=i){var a=e.data.field(i.fieldPath);if($v(a)){var o,u=ge(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new Pk(t.indexId,e.key,this.nn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new Pk(t.indexId,e.key,Uk,r));return n}},{key:"_n",value:function(e,t,n,r,i){var a=this;dp("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=_v(a),s=_v(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=_v(o)):l?(i(u),u=_v(a)):(u=_v(a),s=_v(o))}}(r,i,Ok,(function(r){o.push(a.wn(e,t,n,r))}),(function(r){o.push(a.mn(e,t,n,r))})),nv.waitFor(o)}},{key:"ln",value:function(e){var t=1;return Kk(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return Ok(e,t)})).filter((function(e,t,n){return!t||0!==Ok(e,n[t-1])}));var r=[];r.push(e);var i,a=ge(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=Ok(o,e),s=Ok(o,t);if(0===u)r[0]=e.Le();else if(u>0&&s<0)r.push(o),r.push(o.Le());else if(s>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,Uk,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,Uk,[]]));return c}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(Gk)}},{key:"getMinOffset",value:function(e,t){var n=this;return nv.mapArray(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){return e||yp()}))})).next(Gk)}}]),e}();function Bk(e){return ik(e,"collectionParents")}function zk(e){return ik(e,"indexEntries")}function qk(e){return ik(e,"indexConfiguration")}function Kk(e){return ik(e,"indexState")}function Gk(e){gp(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;Jp(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Yp(t.readTime,t.documentKey,n)}var Hk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Wk=function(){function e(t,n,r){ve(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return ye(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Qk(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.J({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){gp(1===u)})));var c,l=[],f=ge(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=Mg(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return nv.waitFor(a).next((function(){return l}))}function $k(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw yp();t=e.noDocument}return JSON.stringify(t).length}Wk.DEFAULT_COLLECTION_PERCENTILE=10,Wk.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wk.DEFAULT=new Wk(41943040,Wk.DEFAULT_COLLECTION_PERCENTILE,Wk.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wk.DISABLED=new Wk(-1,0,0);var Yk=function(){function e(t,n,r,i){ve(this,e),this.userId=t,this.wt=n,this.indexManager=r,this.referenceDelegate=i,this.gn={}}return ye(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Xk(e).J({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Zk(e),o=Xk(e);return o.add({}).next((function(u){gp("number"==typeof u);var s,c=new ak(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return mg(e.ne,t)})),i=n.mutations.map((function(t){return mg(e.ne,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.wt,i.userId,c),f=[],h=new bv((function(e,t){return Pp(e.canonicalString(),t.canonicalString())})),d=ge(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=Mg(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,Fg))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.gn[u]=c.keys()})),nv.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Xk(e).get(t).next((function(e){return e?(gp(e.userId===n.userId),pk(n.wt,e)):null}))}},{key:"yn",value:function(e,t){var n=this;return this.gn[t]?nv.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.gn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Xk(e).J({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(gp(t.batchId>=r),a=pk(n.wt,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Xk(e).J({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Xk(e).K("userMutationsIndex",n).next((function(e){return e.map((function(e){return pk(t.wt,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Lg(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Zk(e).J({range:i},(function(r,i,o){var u=c(r,3),s=u[0],l=u[1],f=u[2],h=Pg(l);if(s===n.userId&&t.path.isEqual(h))return Xk(e).get(f).next((function(e){if(!e)throw yp();gp(e.userId===n.userId),a.push(pk(n.wt,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new bv(Pp),i=[];return t.forEach((function(t){var a=Lg(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=Zk(e).J({range:o},(function(e,i,a){var o=c(e,3),u=o[0],s=o[1],l=o[2],f=Pg(s);u===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(u)})),nv.waitFor(i).next((function(){return n.pn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=Lg(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new bv(Pp);return Zk(e).J({range:o},(function(e,t,a){var o=c(e,3),s=o[0],l=o[1],f=o[2],h=Pg(l);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(f)):a.done()})).next((function(){return n.pn(e,u)}))}},{key:"pn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Xk(e).get(t).next((function(e){if(null===e)throw yp();gp(e.userId===n.userId),r.push(pk(n.wt,e))})))})),nv.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Qk(e.ee,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.In(t.batchId)})),nv.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"In",value:function(e){delete this.gn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return nv.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return Zk(e).J({range:r},(function(e,n,r){if(e[0]===t.userId){var a=Pg(e[1]);i.push(a)}else r.done()})).next((function(){gp(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Jk(e,this.userId,t)}},{key:"Tn",value:function(e){var t=this;return ew(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"se",value:function(t,n,r,i){return gp(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Jk(e,t,n){var r=Lg(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Zk(e).J({range:a,H:!0},(function(e,n,r){var a=c(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function Xk(e){return ik(e,"mutations")}function Zk(e){return ik(e,"documentMutations")}function ew(e){return ik(e,"mutationQueues")}var tw=function(){function e(t){ve(this,e),this.En=t}return ye(e,[{key:"next",value:function(){return this.En+=2,this.En}}],[{key:"An",value:function(){return new e(0)}},{key:"Rn",value:function(){return new e(-1)}}]),e}(),nw=function(){function e(t,n){ve(this,e),this.referenceDelegate=t,this.wt=n}return ye(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.bn(e).next((function(n){var r=new tw(n.highestTargetId);return n.highestTargetId=r.next(),t.Pn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.bn(e).next((function(e){return Fp.fromTimestamp(new Mp(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.bn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.bn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Pn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.vn(e,t).next((function(){return n.bn(e).next((function(r){return r.targetCount+=1,n.Vn(t,r),n.Pn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.vn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return rw(e).delete(t.targetId)})).next((function(){return n.bn(e)})).next((function(t){return gp(t.targetCount>0),t.targetCount-=1,n.Pn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return rw(e).J((function(o,u){var s=vk(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return nv.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return rw(e).J((function(e,n){var r=vk(n);t(r)}))}},{key:"bn",value:function(e){return iw(e).get("targetGlobalKey").next((function(e){return gp(null!==e),e}))}},{key:"Pn",value:function(e,t){return iw(e).put("targetGlobalKey",t)}},{key:"vn",value:function(e,t){return rw(e).put(mk(this.wt,t))}},{key:"Vn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.bn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=lm(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return rw(e).J({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=vk(n);fm(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=aw(e);return t.forEach((function(t){var o=Ag(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),nv.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=aw(e);return nv.forEach(t,(function(t){var a=Ag(t.path);return nv.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=aw(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=aw(e),i=Vy();return r.J({range:n,H:!0},(function(e,t,n){var r=Pg(e[1]),a=new zp(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Ag(t.path),r=IDBKeyRange.bound([n],[Lp(n)],!1,!0),i=0;return aw(e).J({index:"documentTargetsIndex",H:!0,range:r},(function(e,t,n){var r=c(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"te",value:function(e,t){return rw(e).get(t).next((function(e){return e?vk(e):null}))}}]),e}();function rw(e){return ik(e,"targets")}function iw(e){return ik(e,"targetGlobal")}function aw(e){return ik(e,"targetDocuments")}function ow(e,t){var n=c(e,2),r=n[0],i=n[1],a=c(t,2),o=a[0],u=a[1],s=Pp(r,o);return 0===s?Pp(i,u):s}var uw=function(){function e(t){ve(this,e),this.Sn=t,this.buffer=new bv(ow),this.Dn=0}return ye(e,[{key:"Cn",value:function(){return++this.Dn}},{key:"xn",value:function(e){var t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();ow(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),sw=function(){function e(t,n,r){ve(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Nn=null}return ye(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}},{key:"stop",value:function(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}},{key:"started",get:function(){return null!==this.Nn}},{key:"kn",value:function(e){var t=this;dp("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,ut(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Nn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!uv(e.t0)){e.next=12;break}dp("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,ev(e.t0);case 14:return e.next=16,t.kn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),cw=function(){function e(t,n){ve(this,e),this.On=t,this.params=n}return ye(e,[{key:"calculateTargetCount",value:function(e,t){return this.On.Mn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return nv.resolve(pv.ot);var r=new uw(t);return this.On.forEachTarget(e,(function(e){return r.xn(e.sequenceNumber)})).next((function(){return n.On.Fn(e,(function(e){return r.xn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.On.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.On.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(dp("LruGarbageCollector","Garbage collection skipped; disabled"),nv.resolve(Hk)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(dp("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Hk):n.$n(e,t)}))}},{key:"getCacheSize",value:function(e){return this.On.getCacheSize(e)}},{key:"$n",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(dp("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),hp()<=ht.DEBUG&&dp("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),nv.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),lw=function(){function e(t,n){ve(this,e),this.db=t,this.garbageCollector=function(e,t){return new cw(e,t)}(this,n)}return ye(e,[{key:"Mn",value:function(e){var t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Bn",value:function(e){var t=0;return this.Fn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Fn",value:function(e,t){return this.Ln(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return fw(e,n)}},{key:"removeReference",value:function(e,t,n){return fw(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return fw(e,t)}},{key:"Un",value:function(e,t){return function(e,t){var n=!1;return ew(e).Y((function(r){return Jk(e,r,t).next((function(e){return e&&(n=!0),nv.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Ln(e,(function(o,u){if(u<=t){var s=n.Un(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Fp.min()),aw(e).delete([0,Ag(o.path)])}))}));i.push(s)}})).next((function(){return nv.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return fw(e,t)}},{key:"Ln",value:function(e,t){var n,r=aw(e),i=pv.ot;return r.J({index:"documentTargetsIndex"},(function(e,r){var a=c(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==pv.ot&&t(new zp(Pg(n)),i),i=s,n=u):i=pv.ot})).next((function(){i!==pv.ot&&t(new zp(Pg(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function fw(e,t){return aw(e).put(function(e,t){return{targetId:0,path:Ag(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var hw=function(){function e(){ve(this,e),this.changes=new Ny((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return ye(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,um.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?nv.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),dw=function(){function e(t){ve(this,e),this.wt=t}return ye(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return yw(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return yw(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],fk(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.qn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=um.newInvalidDocument(t);return yw(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(gw(t))},(function(e,i){r=n.Kn(t,i)})).next((function(){return r}))}},{key:"Gn",value:function(e,t){var n=this,r={size:0,document:um.newInvalidDocument(t)};return yw(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(gw(t))},(function(e,i){r={document:n.Kn(t,i),size:$k(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=Ry();return this.Qn(e,t,(function(e,t){var i=n.Kn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"jn",value:function(e,t){var n=this,r=Ry(),i=new gv(zp.comparator);return this.Qn(e,t,(function(e,t){var a=n.Kn(e,t);r=r.insert(e,a),i=i.insert(e,$k(t))})).next((function(){return{documents:r,Wn:i}}))}},{key:"Qn",value:function(e,t,n){if(t.isEmpty())return nv.resolve();var r=new bv(ww);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(gw(r.first()),gw(r.last())),a=r.getIterator(),o=a.getNext();return yw(e).J({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=zp.fromSegments([].concat(at(t.prefixPath),[t.collectionGroup,t.documentId]));o&&ww(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.q(gw(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),fk(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return yw(e).K(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=Ry(),i=ge(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.Kn(zp.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=Ry(),o=kw(t,n),u=kw(t,Yp.max());return yw(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.Kn(zp.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new vw(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return mw(e).get("remoteDocumentGlobalKey").next((function(e){return gp(!!e),e}))}},{key:"qn",value:function(e,t){return mw(e).put("remoteDocumentGlobalKey",t)}},{key:"Kn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=pg(e.ne,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=zp.fromSegments(t.noDocument.path),i=dk(t.noDocument.readTime);n=um.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return yp();var a=zp.fromSegments(t.unknownDocument.path),o=dk(t.unknownDocument.version);n=um.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Mp(e[0],e[1]);return Fp.fromTimestamp(t)}(t.readTime)),n}(this.wt,t);if(!n.isNoDocument()||!n.version.isEqual(Fp.min()))return n}return um.newInvalidDocument(e)}}]),e}();function pw(e){return new dw(e)}var vw=function(e){be(n,e);var t=Ee(n);function n(e,r){var i;return ve(this,n),(i=t.call(this)).zn=e,i.trackRemovals=r,i.Hn=new Ny((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return ye(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new bv((function(e,t){return Pp(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Hn.get(a);if(n.push(t.zn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=lk(t.zn.wt,o);i=i.add(a.path.popLast());var c=$k(s);r+=c-u.size,n.push(t.zn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=lk(t.zn.wt,o.convertToNoDocument(Fp.min()));n.push(t.zn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.zn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.zn.updateMetadata(e,r)),nv.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.zn.Gn(e,t).next((function(e){return n.Hn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.zn.jn(e,t).next((function(e){var t=e.documents;return e.Wn.forEach((function(e,r){n.Hn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(hw);function mw(e){return ik(e,"remoteDocumentGlobal")}function yw(e){return ik(e,"remoteDocumentsV14")}function gw(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function kw(e,t){var n=t.documentKey.path.toArray();return[e,fk(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function ww(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Pp(n[a],r[a]))return i;return(i=Pp(n.length,r.length))||((i=Pp(n[n.length-2],r[r.length-2]))||Pp(n[n.length-1],r[r.length-1]))}var bw=ye((function e(t,n){ve(this,e),this.overlayedDocument=t,this.mutatedFields=n})),xw=function(){function e(t,n,r,i){ve(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return ye(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.getBaseDocument(e,t,r)})).next((function(e){return null!==r&&py(r.mutation,e,Iv.empty(),Mp.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Vy()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Vy(),i=Ly();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=Py();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Ly();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Vy())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=Ry(),a=Fy(),o=Fy();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof gy)?i=i.insert(t.key,t):void 0!==o&&(a.set(t.key,o.mutation.getFieldMask()),py(o.mutation,t,o.mutation.getFieldMask(),Mp.now()))})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new bw(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Fy(),i=new gv((function(e,t){return e-t})),a=Vy();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=ge(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||Iv.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||Vy()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=My();c.forEach((function(e){if(!a.has(e)){var n=hy(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return nv.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return zp.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Lm(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):nv.resolve(Ly()),u=-1,s=a;return o.next((function(t){return nv.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?nv.resolve():i.getBaseDocument(e,t,n).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,Vy())})).next((function(e){return{batchId:u,changes:Oy(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new zp(t)).next((function(e){var t=Py();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Py();return this.indexManager.getCollectionParents(e,i).next((function(o){return nv.forEach(o,(function(o){var u=function(e,t){return new Am(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((function(a){return r=a,i.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)})).next((function(e){e.forEach((function(e,t){var n=t.getKey();null===r.get(n)&&(r=r.insert(n,um.newInvalidDocument(n)))}));var n=Py();return r.forEach((function(r,i){var a=e.get(r);void 0!==a&&py(a.mutation,i,Iv.empty(),Mp.now()),zm(t,i)&&(n=n.insert(r,i))})),n}))}},{key:"getBaseDocument",value:function(e,t,n){return null===n||1===n.mutation.type?this.remoteDocumentCache.getEntry(e,t):nv.resolve(um.newInvalidDocument(t))}}]),e}(),_w=function(){function e(t){ve(this,e),this.wt=t,this.Jn=new Map,this.Yn=new Map}return ye(e,[{key:"getBundleMetadata",value:function(e,t){return nv.resolve(this.Jn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Jn.set(t.id,{id:(n=t).id,version:n.version,createTime:ig(n.createTime)}),nv.resolve()}},{key:"getNamedQuery",value:function(e,t){return nv.resolve(this.Yn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Yn.set(t.name,function(e){return{name:e.name,query:yk(e.bundledQuery),readTime:ig(e.readTime)}}(t)),nv.resolve()}}]),e}(),Iw=function(){function e(){ve(this,e),this.overlays=new gv(zp.comparator),this.Xn=new Map}return ye(e,[{key:"getOverlay",value:function(e,t){return nv.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Ly();return nv.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ie(e,t,i)})),nv.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Xn.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Xn.delete(n)),nv.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Ly(),i=t.length+1,a=new zp(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return nv.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new gv((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=Ly(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=Ly(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return nv.resolve(s)}},{key:"ie",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Xn.get(r.largestBatchId).delete(n.key);this.Xn.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new uk(t,n));var a=this.Xn.get(t);void 0===a&&(a=Vy(),this.Xn.set(t,a)),this.Xn.set(t,a.add(n.key))}}]),e}(),Sw=function(){function e(){ve(this,e),this.Zn=new bv(Ew.ts),this.es=new bv(Ew.ns)}return ye(e,[{key:"isEmpty",value:function(){return this.Zn.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Ew(e,t);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}},{key:"ss",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.rs(new Ew(e,t))}},{key:"os",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"us",value:function(e){var t=this,n=new zp(new Up([])),r=new Ew(n,e),i=new Ew(n,e+1),a=[];return this.es.forEachInRange([r,i],(function(e){t.rs(e),a.push(e.key)})),a}},{key:"cs",value:function(){var e=this;this.Zn.forEach((function(t){return e.rs(t)}))}},{key:"rs",value:function(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}},{key:"hs",value:function(e){var t=new zp(new Up([])),n=new Ew(t,e),r=new Ew(t,e+1),i=Vy();return this.es.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Ew(e,0),n=this.Zn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Ew=function(){function e(t,n){ve(this,e),this.key=t,this.ls=n}return ye(e,null,[{key:"ts",value:function(e,t){return zp.comparator(e.key,t.key)||Pp(e.ls,t.ls)}},{key:"ns",value:function(e,t){return Pp(e.ls,t.ls)||zp.comparator(e.key,t.key)}}]),e}(),Tw=function(){function e(t,n){ve(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.fs=1,this.ds=new bv(Ew.ts)}return ye(e,[{key:"checkEmpty",value:function(e){return nv.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.fs;this.fs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new ak(i,t,n,r);this.mutationQueue.push(a);var o,u=ge(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.ds=this.ds.add(new Ew(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return nv.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return nv.resolve(this._s(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ws(n),i=r<0?0:r;return nv.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return nv.resolve(0===this.mutationQueue.length?-1:this.fs-1)}},{key:"getAllMutationBatches",value:function(e){return nv.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Ew(t,0),i=new Ew(t,Number.POSITIVE_INFINITY),a=[];return this.ds.forEachInRange([r,i],(function(e){var t=n._s(e.ls);a.push(t)})),nv.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new bv(Pp);return t.forEach((function(e){var t=new Ew(e,0),i=new Ew(e,Number.POSITIVE_INFINITY);n.ds.forEachInRange([t,i],(function(e){r=r.add(e.ls)}))})),nv.resolve(this.gs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;zp.isDocumentKey(i)||(i=i.child(""));var a=new Ew(new zp(i),0),o=new bv(Pp);return this.ds.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ls)),!0)}),a),nv.resolve(this.gs(o))}},{key:"gs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t._s(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;gp(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();var r=this.ds;return nv.forEach(t.mutations,(function(i){var a=new Ew(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.ds=r}))}},{key:"In",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Ew(t,0),r=this.ds.firstAfterOrEqual(n);return nv.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,nv.resolve()}},{key:"ys",value:function(e,t){return this.ws(e)}},{key:"ws",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"_s",value:function(e){var t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),Cw=function(){function e(t){ve(this,e),this.ps=t,this.docs=new gv(zp.comparator),this.size=0}return ye(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ps(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return nv.resolve(n?n.document.mutableCopy():um.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Ry();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():um.newInvalidDocument(e))})),nv.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=Ry(),i=new zp(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||Jp($p(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return nv.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){yp()}},{key:"Is",value:function(e,t){return nv.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Nw(this)}},{key:"getSize",value:function(e){return nv.resolve(this.size)}}]),e}(),Nw=function(e){be(n,e);var t=Ee(n);function n(e){var r;return ve(this,n),(r=t.call(this)).zn=e,r}return ye(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.zn.addEntry(e,i)):t.zn.removeEntry(r)})),nv.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.zn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.zn.getEntries(e,t)}}]),n}(hw),Aw=function(){function e(t){ve(this,e),this.persistence=t,this.Ts=new Ny((function(e){return lm(e)}),fm),this.lastRemoteSnapshotVersion=Fp.min(),this.highestTargetId=0,this.Es=0,this.As=new Sw,this.targetCount=0,this.Rs=tw.An()}return ye(e,[{key:"forEachTarget",value:function(e,t){return this.Ts.forEach((function(e,n){return t(n)})),nv.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return nv.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return nv.resolve(this.Es)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Rs.next(),nv.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Es&&(this.Es=t),nv.resolve()}},{key:"vn",value:function(e){this.Ts.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Rs=new tw(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.vn(t),this.targetCount+=1,nv.resolve()}},{key:"updateTargetData",value:function(e,t){return this.vn(t),nv.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,nv.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Ts.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Ts.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),nv.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return nv.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Ts.get(t)||null;return nv.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.As.ss(t,n),nv.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.As.os(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),nv.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.As.us(t),nv.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.As.hs(t);return nv.resolve(n)}},{key:"containsKey",value:function(e,t){return nv.resolve(this.As.containsKey(t))}}]),e}(),Rw=function(){function e(t,n){var r=this;ve(this,e),this.bs={},this.overlays={},this.Ps=new pv(0),this.vs=!1,this.vs=!0,this.referenceDelegate=t(this),this.Vs=new Aw(this),this.indexManager=new Fk,this.remoteDocumentCache=new Cw((function(e){return r.referenceDelegate.Ss(e)})),this.wt=new ck(n),this.Ds=new _w(this.wt)}return ye(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.vs=!1,Promise.resolve()}},{key:"started",get:function(){return this.vs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Iw,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.bs[e.toKey()];return n||(n=new Tw(t,this.referenceDelegate),this.bs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Vs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ds}},{key:"runTransaction",value:function(e,t,n){var r=this;dp("MemoryPersistence","Starting transaction:",e);var i=new Dw(this.Ps.next());return this.referenceDelegate.Cs(),n(i).next((function(e){return r.referenceDelegate.xs(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ns",value:function(e,t){return nv.or(Object.values(this.bs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Dw=function(e){be(n,e);var t=Ee(n);function n(e){var r;return ve(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return ye(n)}(Zp),Pw=function(){function e(t){ve(this,e),this.persistence=t,this.ks=new Sw,this.Os=null}return ye(e,[{key:"Fs",get:function(){if(this.Os)return this.Os;throw yp()}},{key:"addReference",value:function(e,t,n){return this.ks.addReference(n,t),this.Fs.delete(n.toString()),nv.resolve()}},{key:"removeReference",value:function(e,t,n){return this.ks.removeReference(n,t),this.Fs.add(n.toString()),nv.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Fs.add(t.toString()),nv.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.ks.us(t.targetId).forEach((function(e){return n.Fs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Fs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Cs",value:function(){this.Os=new Set}},{key:"xs",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return nv.forEach(this.Fs,(function(r){var i=zp.fromPath(r);return t.$s(e,i).next((function(e){e||n.removeEntry(i,Fp.min())}))})).next((function(){return t.Os=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.$s(e,t).next((function(e){e?n.Fs.delete(t.toString()):n.Fs.add(t.toString())}))}},{key:"Ss",value:function(e){return 0}},{key:"$s",value:function(e,t){var n=this;return nv.or([function(){return nv.resolve(n.ks.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ns(e,t)}])}}],[{key:"Ms",value:function(t){return new e(t)}}]),e}(),Ow=function(){function e(t){ve(this,e),this.wt=t}return ye(e,[{key:"O",value:function(e,t,n,r){var i=this,a=new rv("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Og,{unique:!0}),e.createObjectStore("documentMutations")}(e),Lw(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=nv.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Lw(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Fp.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").K().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Og,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return nv.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Bs(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Ls(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Us(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.qs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Ks(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:$g});t.createIndex("collectionPathOverlayIndex",Yg,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Jg,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:jg});t.createIndex("documentKeyIndex",Ug),t.createIndex("collectionGroupIndex",Vg)}(e)})).next((function(){return i.Gs(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.Qs(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Gg}).createIndex("sequenceNumberIndex",Hg,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Wg}).createIndex("documentKeyIndex",Qg,{unique:!1})}(e)}))),o}},{key:"Ls",value:function(e){var t=0;return e.store("remoteDocuments").J((function(e,n){t+=$k(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Bs",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.K().next((function(n){return nv.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",i).next((function(r){return nv.forEach(r,(function(r){gp(r.userId===n.userId);var i=pk(t.wt,r);return Qk(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Us",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.J((function(n,i){var a=new Up(n),o=function(e){return[0,Ag(e)]}(a);r.push(t.get(o).next((function(n){return n?nv.resolve():function(n){return t.put({targetId:0,path:Ag(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return nv.waitFor(r)}))}))}},{key:"qs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Kg});var n=t.store("collectionParents"),r=new jk,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Ag(i)})}};return t.store("remoteDocuments").J({H:!0},(function(e,t){var n=new Up(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").J({H:!0},(function(e,t){var n=c(e,3),r=(n[0],n[1]),a=(n[2],Pg(r));return i(a.popLast())}))}))}},{key:"Ks",value:function(e){var t=this,n=e.store("targets");return n.J((function(e,r){var i=vk(r),a=mk(t.wt,i);return n.put(a)}))}},{key:"Gs",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.J((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new zp(Up.fromString(i.document.name).popFirst(5)):i.noDocument?zp.fromSegments(i.noDocument.path):i.unknownDocument?zp.fromSegments(i.unknownDocument.path):yp()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return nv.waitFor(r)}))}},{key:"Qs",value:function(e,t){var n=this,r=t.store("mutations"),i=pw(this.wt),a=new Rw(Pw.Ms,this.wt.ne);return r.K().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:Vy();pk(n.wt,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),nv.forEach(r,(function(e,r){var o=new cp(r),u=Ik.se(n.wt,o),s=a.getIndexManager(o),c=Yk.se(o,n.wt,s,a.referenceDelegate);return new xw(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new rk(t,pv.ot),e).next()}))}))}}]),e}();function Lw(e){e.createObjectStore("targetDocuments",{keyPath:zg}).createIndex("documentTargetsIndex",qg,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Bg,{unique:!0}),e.createObjectStore("targetGlobal")}var Mw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Fw=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:14;if(ve(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.js=a,this.window=o,this.document=u,this.Ws=c,this.zs=l,this.Hs=f,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=function(e){return Promise.resolve()},!e.V())throw new bp(wp.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new lw(this,i),this.ei=n+"main",this.wt=new ck(s),this.ni=new iv(this.ei,this.Hs,new Ow(this.wt)),this.Vs=new nw(this.referenceDelegate,this.wt),this.remoteDocumentCache=pw(this.wt),this.Ds=new bk,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===l&&pp("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return ye(e,[{key:"start",value:function(){var e=this;return this.ii().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new bp(wp.FAILED_PRECONDITION,Mw);return e.ri(),e.oi(),e.ui(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Vs.getHighestSequenceNumber(t)}))})).then((function(t){e.Ps=new pv(t,e.Ws)})).then((function(){e.vs=!0})).catch((function(t){return e.ni&&e.ni.close(),Promise.reject(t)}))}},{key:"ci",value:function(e){var t=this;return this.ti=function(){var n=ut(rt().mark((function n(r){return rt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ni.F(function(){var t=ut(rt().mark((function t(n){return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget(ut(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ii();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ii",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return Uw(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.ai(t).next((function(t){t||(e.isPrimary=!1,e.js.enqueueRetryable((function(){return e.ti(!1)})))}))})).next((function(){return e.hi(t)})).next((function(n){return e.isPrimary&&!n?e.li(t).next((function(){return!1})):!!n&&e.fi(t).next((function(){return!0}))}))})).catch((function(t){if(uv(t))return dp("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return dp("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.js.enqueueRetryable((function(){return e.ti(t)})),e.isPrimary=t}))}},{key:"ai",value:function(e){var t=this;return jw(e).get("owner").next((function(e){return nv.resolve(t.di(e))}))}},{key:"_i",value:function(e){return Uw(e).delete(this.clientId)}},{key:"wi",value:function(){var e=ut(rt().mark((function e(){var t,n,r,i,a=this;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.mi(this.Zs,18e5)){e.next=6;break}return this.Zs=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=ik(e,"clientMetadata");return t.K().next((function(e){var n=a.gi(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return nv.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.si){n=ge(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.si.removeItem(this.yi(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ui",value:function(){var e=this;this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ii().then((function(){return e.wi()})).then((function(){return e.ui()}))}))}},{key:"di",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"hi",value:function(e){var t=this;return this.zs?nv.resolve(!0):jw(e).get("owner").next((function(n){if(null!==n&&t.mi(n.leaseTimestampMs,5e3)&&!t.pi(n.ownerId)){if(t.di(n)&&t.networkEnabled)return!0;if(!t.di(n)){if(!n.allowTabSynchronization)throw new bp(wp.FAILED_PRECONDITION,Mw);return!1}}return!(!t.networkEnabled||!t.inForeground)||Uw(e).K().next((function(e){return void 0===t.gi(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&dp("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=ut(rt().mark((function e(){var t=this;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.vs=!1,this.Ii(),this.Xs&&(this.Xs.cancel(),this.Xs=null),this.Ti(),this.Ei(),e.next=7,this.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new rk(e,pv.ot);return t.li(n).next((function(){return t._i(n)}))}));case 7:this.ni.close(),this.Ai();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"gi",value:function(e,t){var n=this;return e.filter((function(e){return n.mi(e.updateTimeMs,t)&&!n.pi(e.clientId)}))}},{key:"Ri",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return Uw(t).K().next((function(t){return e.gi(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.vs}},{key:"getMutationQueue",value:function(e,t){return Yk.se(e,this.wt,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Vs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new Vk(e,this.wt.ne.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return Ik.se(this.wt,e)}},{key:"getBundleCache",value:function(){return this.Ds}},{key:"runTransaction",value:function(e,t,n){var r=this;dp("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.Hs)?nk:14===i?tk:13===i?ek:12===i?Zg:11===i?Xg:void yp();return this.ni.runTransaction(e,o,u,(function(i){return a=new rk(i,r.Ps?r.Ps.next():pv.ot),"readwrite-primary"===t?r.ai(a).next((function(e){return!!e||r.hi(a)})).next((function(t){if(!t)throw pp("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.js.enqueueRetryable((function(){return r.ti(!1)})),new bp(wp.FAILED_PRECONDITION,Xp);return n(a)})).next((function(e){return r.fi(a).next((function(){return e}))})):r.bi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"bi",value:function(e){var t=this;return jw(e).get("owner").next((function(e){if(null!==e&&t.mi(e.leaseTimestampMs,5e3)&&!t.pi(e.ownerId)&&!t.di(e)&&!(t.zs||t.allowTabSynchronization&&e.allowTabSynchronization))throw new bp(wp.FAILED_PRECONDITION,Mw)}))}},{key:"fi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return jw(e).put("owner",t)}},{key:"li",value:function(e){var t=this,n=jw(e);return n.get("owner").next((function(e){return t.di(e)?(dp("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):nv.resolve()}))}},{key:"mi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(pp("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ri",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=function(){e.js.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ii()}))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ti",value:function(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}},{key:"oi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=function(){t.Ii(),!je()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.js.enterRestrictedMode(!0),t.js.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Js))}},{key:"Ei",value:function(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}},{key:"pi",value:function(e){var t;try{var n=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return dp("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return pp("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ii",value:function(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(sl){pp("Failed to set zombie client id.",sl)}}},{key:"Ai",value:function(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch(sl){}}},{key:"yi",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"V",value:function(){return iv.V()}}]),e}();function jw(e){return ik(e,"owner")}function Uw(e){return ik(e,"clientMetadata")}function Vw(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Bw=function(){function e(t,n,r,i){ve(this,e),this.targetId=t,this.fromCache=n,this.Pi=r,this.vi=i}return ye(e,null,[{key:"Vi",value:function(t,n){var r,i=Vy(),a=Vy(),o=ge(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),zw=function(){function e(){ve(this,e),this.Si=!1}return ye(e,[{key:"initialize",value:function(e,t){this.Di=e,this.indexManager=t,this.Si=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ci(e,t).next((function(a){return a||i.xi(e,t,r,n)})).next((function(n){return n||i.Ni(e,t)}))}},{key:"Ci",value:function(e,t){return nv.resolve(null)}},{key:"xi",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||r.isEqual(Fp.min())?this.Ni(e,t):this.Di.getDocuments(e,n).next((function(a){var o=i.ki(t,a);return i.Oi(t,o,n,r)?i.Ni(e,t):(hp()<=ht.DEBUG&&dp("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Bm(t)),i.Mi(e,o,t,Qp(r,-1)))}))}},{key:"ki",value:function(e,t){var n=new bv(Km(e));return t.forEach((function(t,r){zm(e,r)&&(n=n.add(r))})),n}},{key:"Oi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Ni",value:function(e,t){return hp()<=ht.DEBUG&&dp("QueryEngine","Using full collection scan to execute query:",Bm(t)),this.Di.getDocumentsMatchingQuery(e,t,Yp.min())}},{key:"Mi",value:function(e,t,n,r){return this.Di.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),qw=function(){function e(t,n,r,i){ve(this,e),this.persistence=t,this.Fi=n,this.wt=i,this.$i=new gv(Pp),this.Bi=new Ny((function(e){return lm(e)}),fm),this.Li=new Map,this.Ui=t.getRemoteDocumentCache(),this.Vs=t.getTargetCache(),this.Ds=t.getBundleCache(),this.qi(r)}return ye(e,[{key:"qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xw(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.$i)}))}}]),e}();function Kw(e,t,n,r){return new qw(e,t,n,r)}function Gw(e,t){return Hw.apply(this,arguments)}function Hw(){return Hw=ut(rt().mark((function e(t,n){var r;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=kp(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=Vy(),s=ge(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=ge(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=ge(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=ge(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;u=u.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{Ki:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Hw.apply(this,arguments)}function Ww(e,t){var n=kp(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Ui.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=nv.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);gp(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Vy(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function Qw(e){var t=kp(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Vs.getLastRemoteSnapshotVersion(e)}))}function $w(e,t){var n=kp(e),r=t.snapshotVersion,i=n.$i;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Ui.newChangeBuffer({trackRemovals:!0});i=n.$i;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Vs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Vs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(Sv.EMPTY_BYTE_STRING,Fp.min()).withLastLimboFreeSnapshotVersion(Fp.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Vs.updateTargetData(e,c))}}));var u=Ry(),s=Vy();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Yw(e,a,t.documentUpdates).next((function(e){u=e.Gi,s=e.Qi}))),!r.isEqual(Fp.min())){var c=n.Vs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Vs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return nv.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.$i=i,e}))}function Yw(e,t,n){var r=Vy(),i=Vy();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Ry();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Fp.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):dp("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Gi:r,Qi:i}}))}function Jw(e,t){var n=kp(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function Xw(e,t){var n=kp(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Vs.getTargetData(e,t).next((function(i){return i?(r=i,nv.resolve(r)):n.Vs.allocateTargetId(e).next((function(i){return r=new sk(t,i,0,e.currentSequenceNumber),n.Vs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.$i.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.$i=n.$i.insert(e.targetId,e),n.Bi.set(t,e.targetId)),e}))}function Zw(e,t,n){return eb.apply(this,arguments)}function eb(){return eb=ut(rt().mark((function e(t,n,r){var i,a,o;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=kp(t),a=i.$i.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),uv(e.t1)){e.next=12;break}throw e.t1;case 12:dp("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.$i=i.$i.remove(n),i.Bi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),eb.apply(this,arguments)}function tb(e,t,n){var r=kp(e),i=Fp.min(),a=Vy();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=kp(e),i=r.Bi.get(n);return void 0!==i?nv.resolve(r.$i.get(i)):r.Vs.getTargetData(t,n)}(r,e,Fm(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Fi.getDocumentsMatchingQuery(e,t,n?i:Fp.min(),n?a:Vy())})).next((function(e){return ib(r,qm(t),e),{documents:e,ji:a}}))}))}function nb(e,t){var n=kp(e),r=kp(n.Vs),i=n.$i.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.te(e,t).next((function(e){return e?e.target:null}))}))}function rb(e,t){var n=kp(e),r=n.Li.get(t)||Fp.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Ui.getAllFromCollectionGroup(e,t,Qp(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return ib(n,t,e),e}))}function ib(e,t,n){var r=Fp.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Li.set(t,r)}function ab(e,t,n,r){return ob.apply(this,arguments)}function ob(){return ob=ut(rt().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=kp(t),o=Vy(),u=Ry(),s=ge(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.Wi(l.metadata.name),l.document&&(o=o.add(f)),(h=n.zi(l)).setReadTime(n.Hi(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.Ui.newChangeBuffer({trackRemovals:!0}),e.next=7,Xw(a,function(e){return Fm(Dm(Up.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Yw(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Vs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Vs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.Gi,t.Qi)})).next((function(){return t.Gi}))}))})));case 9:case"end":return e.stop()}}),e)}))),ob.apply(this,arguments)}function ub(e,t){return sb.apply(this,arguments)}function sb(){return sb=ut(rt().mark((function e(t,n){var r,i,a,o=arguments;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Vy(),e.next=3,Xw(t,Fm(yk(n.bundledQuery)));case 3:return i=e.sent,a=kp(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=ig(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ds.saveNamedQuery(e,n);var o=i.withResumeToken(Sv.EMPTY_BYTE_STRING,t);return a.$i=a.$i.insert(o.targetId,o),a.Vs.updateTargetData(e,o).next((function(){return a.Vs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Vs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ds.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),sb.apply(this,arguments)}function cb(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function lb(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function fb(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var hb=function(){function e(t,n,r,i){ve(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return ye(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new bp(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(pp("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),db=function(){function e(t,n,r){ve(this,e),this.targetId=t,this.state=n,this.error=r}return ye(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new bp(i.error.code,i.error.message))),a?new e(t,i.state,r):(pp("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),pb=function(){function e(t,n){ve(this,e),this.clientId=t,this.activeTargetIds=n}return ye(e,null,[{key:"Ji",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=zy(),o=0;i&&o<r.activeTargetIds.length;++o)i=Fv(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(pp("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),vb=function(){function e(t,n){ve(this,e),this.clientId=t,this.onlineState=n}return ye(e,null,[{key:"Ji",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(pp("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),mb=function(){function e(){ve(this,e),this.activeTargetIds=zy()}return ye(e,[{key:"Xi",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Zi",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Yi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),yb=function(){function e(t,n,r,i,a){ve(this,e),this.window=t,this.js=n,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new gv(Pp),this.started=!1,this.ir=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.rr=cb(this.persistenceKey,this.tr),this.ur=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.sr=this.sr.insert(this.tr,new mb),this.cr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.ar=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.hr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.lr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.dr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.er)}return ye(e,[{key:"start",value:function(){var e=ut(rt().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Ri();case 2:t=e.sent,n=ge(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.tr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(cb(this.persistenceKey,i)))&&(o=pb.Ji(i,a))&&(this.sr=this.sr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this._r(),(u=this.storage.getItem(this.lr))&&(s=this.wr(u))&&this.mr(s),c=ge(this.ir);try{for(c.s();!(l=c.n()).done;)f=l.value,this.nr(f)}catch(d){c.e(d)}finally{c.f()}this.ir=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ur,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.gr(this.sr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.sr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.yr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.yr(e,t,n),this.pr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(fb(this.persistenceKey,e));if(n){var r=db.Ji(e,n);r&&(t=r.state)}}return this.Ir.Xi(e),this._r(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ir.Zi(e),this._r()}},{key:"isLocalQueryTarget",value:function(e){return this.Ir.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(fb(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Tr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.pr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Er(e)}},{key:"notifyBundleLoaded",value:function(e){this.Ar(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return dp("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){dp("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){dp("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"nr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(dp("SharedClientState","EVENT",n.key,n.newValue),n.key===this.rr)return void pp("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable(ut(rt().mark((function e(){var r,i,a,o,u,s,c;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.cr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Rr(n.key),e.abrupt("return",t.br(r,null));case 6:if(!(i=t.Pr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.br(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.ar.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.vr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Vr(a));case 16:e.next=41;break;case 18:if(!t.hr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Sr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Dr(o));case 23:e.next=41;break;case 25:if(n.key!==t.lr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.wr(n.newValue))){e.next=30;break}return e.abrupt("return",t.mr(u));case 30:e.next=41;break;case 32:if(n.key!==t.ur){e.next=37;break}s=function(e){var t=pv.ot;if(null!=e)try{var n=JSON.parse(e);gp("number"==typeof n),t=n}catch(e){pp("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==pv.ot&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.dr){e.next=41;break}return c=t.Cr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Nr(e)})));case 41:e.next=44;break;case 43:t.ir.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ir",get:function(){return this.sr.get(this.tr)}},{key:"_r",value:function(){this.setItem(this.rr,this.Ir.Yi())}},{key:"yr",value:function(e,t,n){var r=new hb(this.currentUser,e,t,n),i=lb(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Yi())}},{key:"pr",value:function(e){var t=lb(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Er",value:function(e){var t={clientId:this.tr,onlineState:e};this.storage.setItem(this.lr,JSON.stringify(t))}},{key:"Tr",value:function(e,t,n){var r=fb(this.persistenceKey,e),i=new db(e,t,n);this.setItem(r,i.Yi())}},{key:"Ar",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}},{key:"Rr",value:function(e){var t=this.cr.exec(e);return t?t[1]:null}},{key:"Pr",value:function(e,t){var n=this.Rr(e);return pb.Ji(n,t)}},{key:"vr",value:function(e,t){var n=this.ar.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return hb.Ji(new cp(i),r,t)}},{key:"Sr",value:function(e,t){var n=this.hr.exec(e),r=Number(n[1]);return db.Ji(r,t)}},{key:"wr",value:function(e){return vb.Ji(e)}},{key:"Cr",value:function(e){return JSON.parse(e)}},{key:"Vr",value:function(){var e=ut(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.kr(t.batchId,t.state,t.error));case 2:dp("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Dr",value:function(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}},{key:"br",value:function(e,t){var n=this,r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),a=this.gr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Mr(o,u).then((function(){n.sr=r}))}},{key:"mr",value:function(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"gr",value:function(e){var t=zy();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"V",value:function(e){return!(!e||!e.localStorage)}}]),e}(),gb=function(){function e(){ve(this,e),this.Fr=new mb,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return ye(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.$r[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Fr.Zi(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.$r[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Fr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Fr=new mb,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),kb=function(){function e(){ve(this,e)}return ye(e,[{key:"Br",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),wb=function(){function e(){var t=this;ve(this,e),this.Lr=function(){return t.Ur()},this.qr=function(){return t.Kr()},this.Gr=[],this.Qr()}return ye(e,[{key:"Br",value:function(e){this.Gr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}},{key:"Qr",value:function(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}},{key:"Ur",value:function(){dp("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=ge(this.Gr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Kr",value:function(){dp("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=ge(this.Gr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"V",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),bb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},xb=function(){function e(t){ve(this,e),this.jr=t.jr,this.Wr=t.Wr}return ye(e,[{key:"zr",value:function(e){this.Hr=e}},{key:"Jr",value:function(e){this.Yr=e}},{key:"onMessage",value:function(e){this.Xr=e}},{key:"close",value:function(){this.Wr()}},{key:"send",value:function(e){this.jr(e)}},{key:"Zr",value:function(){this.Hr()}},{key:"eo",value:function(e){this.Yr(e)}},{key:"no",value:function(e){this.Xr(e)}}]),e}(),_b=function(e){be(n,e);var t=Ee(n);function n(e){var r;return ve(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return ye(n,[{key:"co",value:function(e,t,n,r){return new Promise((function(i,a){var o=new up;o.listenOnce(np.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case tp.NO_ERROR:var t=o.getResponseJson();dp("Connection","XHR received:",JSON.stringify(t)),i(t);break;case tp.TIMEOUT:dp("Connection",'RPC "'+e+'" timed out'),a(new bp(wp.DEADLINE_EXCEEDED,"Request time out"));break;case tp.HTTP_ERROR:var n=o.getStatus();if(dp("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(wp).indexOf(t)>=0?t:wp.UNKNOWN}(r.status);a(new bp(u,r.message))}else a(new bp(wp.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new bp(wp.UNAVAILABLE,"Connection failed."));break;default:yp()}}finally{dp("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"ho",value:function(e,t,n){var r=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Zd(),a=ep(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new ap({})),this.uo(o.initMessageHeaders,t,n),Fe()||Ve()||Me().indexOf("Electron/")>=0||Be()||Me().indexOf("MSAppHost/")>=0||Ue()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");dp("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new xb({jr:function(e){l?dp("Connection","Not sending because WebChannel is closed:",e):(c||(dp("Connection","Opening WebChannel transport."),s.open(),c=!0),dp("Connection","WebChannel sending:",e),s.send(e))},Wr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,op.EventType.OPEN,(function(){l||dp("Connection","WebChannel transport opened.")})),h(s,op.EventType.CLOSE,(function(){l||(l=!0,dp("Connection","WebChannel transport closed"),f.eo())})),h(s,op.EventType.ERROR,(function(e){l||(l=!0,vp("Connection","WebChannel transport errored:",e),f.eo(new bp(wp.UNAVAILABLE,"The operation could not be completed")))})),h(s,op.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];gp(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){dp("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=xy[e];if(void 0!==t)return Cy(t)}(a),u=i.message;void 0===o&&(o=wp.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.eo(new bp(o,u)),s.close()}else dp("Connection","WebChannel received:",n),f.no(n)}})),h(a,rp.STAT_EVENT,(function(e){e.stat===ip.PROXY?dp("Connection","Detected buffering proxy"):e.stat===ip.NOPROXY&&dp("Connection","Detected no buffering proxy")})),setTimeout((function(){f.Zr()}),0),f}}]),n}(function(){function e(t){ve(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.so=n+"://"+t.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return ye(e,[{key:"ro",value:function(e,t,n,r,i){var a=this.oo(e,t);dp("RestConnection","Sending: ",a,n);var o={};return this.uo(o,r,i),this.co(e,a,o,n).then((function(e){return dp("RestConnection","Received: ",e),e}),(function(t){throw vp("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"ao",value:function(e,t,n,r,i,a){return this.ro(e,t,n,r,i)}},{key:"uo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+lp,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"oo",value:function(e,t){var n=bb[e];return"".concat(this.so,"/v1/").concat(t,":").concat(n)}}]),e}());function Ib(){return"undefined"!=typeof window?window:null}function Sb(){return"undefined"!=typeof document?document:null}function Eb(e){return new eg(e,!0)}var Tb=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;ve(this,e),this.js=t,this.timerId=n,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}return ye(e,[{key:"reset",value:function(){this.wo=0}},{key:"po",value:function(){this.wo=this._o}},{key:"Io",value:function(e){var t=this;this.cancel();var n=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,n-r);i>0&&dp("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.wo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.mo=this.js.enqueueAfterDelay(this.timerId,i,(function(){return t.yo=Date.now(),e()})),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}},{key:"Eo",value:function(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}},{key:"cancel",value:function(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}},{key:"To",value:function(){return(Math.random()-.5)*this.wo}}]),e}(),Cb=function(){function e(t,n,r,i,a,o,u,s){ve(this,e),this.js=t,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new Tb(t,n)}return ye(e,[{key:"Do",value:function(){return 1===this.state||5===this.state||this.Co()}},{key:"Co",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.xo()}},{key:"stop",value:function(){var e=ut(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Do(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"No",value:function(){this.state=0,this.So.reset()}},{key:"ko",value:function(){var e=this;this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,(function(){return e.Oo()})))}},{key:"Mo",value:function(e){this.Fo(),this.stream.send(e)}},{key:"Oo",value:function(){var e=ut(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Co()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.vo&&(this.vo.cancel(),this.vo=null)}},{key:"$o",value:function(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}},{key:"close",value:function(){var e=ut(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fo(),this.$o(),this.So.cancel(),this.Po++,4!==t?this.So.reset():n&&n.code===wp.RESOURCE_EXHAUSTED?(pp(n.toString()),pp("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):n&&n.code===wp.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Bo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Jr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Bo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Lo(this.Po),n=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=c(t,2),i=r[0],a=r[1];e.Po===n&&e.Uo(i,a)}),(function(n){t((function(){var t=new bp(wp.UNKNOWN,"Fetching auth token failed: "+n.message);return e.qo(t)}))}))}},{key:"Uo",value:function(e,t){var n=this,r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr((function(){r((function(){return n.state=2,n.Vo=n.js.enqueueAfterDelay(n.Ro,1e4,(function(){return n.Co()&&(n.state=3),Promise.resolve()})),n.listener.zr()}))})),this.stream.Jr((function(e){r((function(){return n.qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"xo",value:function(){var e=this;this.state=5,this.So.Io(ut(rt().mark((function t(){return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"qo",value:function(e){return dp("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Lo",value:function(e){var t=this;return function(n){t.js.enqueueAndForget((function(){return t.Po===e?n():(dp("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Nb=function(e){be(n,e);var t=Ee(n);function n(e,r,i,a,o,u){var s;return ve(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).wt=o,s}return ye(n,[{key:"Ko",value:function(e,t){return this.bo.ho("Listen",e,t)}},{key:"onMessage",value:function(e){this.So.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:yp()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.dt?(gp(void 0===t||"string"==typeof t),Sv.fromBase64String(t||"")):(gp(void 0===t||t instanceof Uint8Array),Sv.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?wp.UNKNOWN:Cy(e.code);return new bp(t,e.message||"")}(o);n=new Wy(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=sg(e,s.document.name),l=ig(s.document.updateTime),f=new am({mapValue:{fields:s.document.fields}}),h=um.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new Gy(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var m=sg(e,v.document),y=v.readTime?ig(v.readTime):Fp.min(),g=um.newNoDocument(m,y),k=v.removedTargetIds||[];n=new Gy([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var b=sg(e,w.document),x=w.removedTargetIds||[];n=new Gy([],x,b,null)}else{if(!("filter"in t))return yp();t.filter;var _=t.filter;_.targetId;var I=_.count||0,S=new Ey(I),E=_.targetId;n=new Hy(E,S)}return n}(this.wt,e),n=function(e){if(!("targetChange"in e))return Fp.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Fp.min():t.readTime?ig(t.readTime):Fp.min()}(e);return this.listener.Go(t,n)}},{key:"Qo",value:function(e){var t={};t.database=fg(this.wt),t.addTarget=function(e,t){var n,r=t.target;return(n=hm(r)?{documents:gg(e,r)}:{query:kg(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=ng(e,t.resumeToken):t.snapshotVersion.compareTo(Fp.min())>0&&(n.readTime=tg(e,t.snapshotVersion.toTimestamp())),n}(this.wt,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return yp()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.wt,e);n&&(t.labels=n),this.Mo(t)}},{key:"jo",value:function(e){var t={};t.database=fg(this.wt),t.removeTarget=e,this.Mo(t)}}]),n}(Cb),Ab=function(e){be(n,e);var t=Ee(n);function n(e,r,i,a,o,u){var s;return ve(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).wt=o,s.Wo=!1,s}return ye(n,[{key:"zo",get:function(){return this.Wo}},{key:"start",value:function(){this.Wo=!1,this.lastStreamToken=void 0,On(xe(n.prototype),"start",this).call(this)}},{key:"Bo",value:function(){this.Wo&&this.Ho([])}},{key:"Ko",value:function(e,t){return this.bo.ho("Write",e,t)}},{key:"onMessage",value:function(e){if(gp(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();var t=function(e,t){return e&&e.length>0?(gp(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?ig(e.updateTime):ig(t);return n.isEqual(Fp.min())&&(n=ig(t)),new sy(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=ig(e.commitTime);return this.listener.Jo(n,t)}return gp(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}},{key:"Xo",value:function(){var e={};e.database=fg(this.wt),this.Mo(e)}},{key:"Ho",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return mg(t.wt,e)}))};this.Mo(n)}}]),n}(Cb),Rb=function(e){be(n,e);var t=Ee(n);function n(e,r,i,a){var o;return ve(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.bo=i,o.wt=a,o.Zo=!1,o}return ye(n,[{key:"tu",value:function(){if(this.Zo)throw new bp(wp.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ro",value:function(e,t,n){var r=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=c(i,2),o=a[0],u=a[1];return r.bo.ro(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===wp.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new bp(wp.UNKNOWN,e.toString())}))}},{key:"ao",value:function(e,t,n,r){var i=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=c(a,2),u=o[0],s=o[1];return i.bo.ao(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===wp.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new bp(wp.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.Zo=!0}}]),n}(function(){return ye((function e(){ve(this,e)}))}()),Db=function(){function e(t,n){ve(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}return ye(e,[{key:"iu",value:function(){var e=this;0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.nu=null,e.ou("Backend didn't respond within 10 seconds."),e.ru("Offline"),Promise.resolve()})))}},{key:"uu",value:function(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ru("Offline")))}},{key:"set",value:function(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}},{key:"ru",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"ou",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.su?(pp(t),this.su=!1):dp("OnlineStateTracker",t)}},{key:"cu",value:function(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}]),e}(),Pb=ye((function e(t,n,r,i,a){var o=this;ve(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=a,this.du.Br((function(e){r.enqueueAndForget(ut(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Kb(o),!e.t0){e.next=5;break}return dp("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=ut(rt().mark((function e(t){var n;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=kp(t)).lu.add(4),e.next=4,Mb(n);case 4:return n._u.set("Unknown"),n.lu.delete(4),e.next=8,Ob(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this._u=new Db(r,i)}));function Ob(e){return Lb.apply(this,arguments)}function Lb(){return Lb=ut(rt().mark((function e(t){var n,r,i;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Kb(t)){e.next=18;break}n=ge(t.fu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),Lb.apply(this,arguments)}function Mb(e){return Fb.apply(this,arguments)}function Fb(){return Fb=ut(rt().mark((function e(t){var n,r,i;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=ge(t.fu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),Fb.apply(this,arguments)}function jb(e,t){var n=kp(e);n.hu.has(t.targetId)||(n.hu.set(t.targetId,t),qb(n)?zb(n):kx(n).Co()&&Vb(n,t))}function Ub(e,t){var n=kp(e),r=kx(n);n.hu.delete(t),r.Co()&&Bb(n,t),0===n.hu.size&&(r.Co()?r.ko():Kb(n)&&n._u.set("Unknown"))}function Vb(e,t){e.wu.Nt(t.targetId),kx(e).Qo(t)}function Bb(e,t){e.wu.Nt(t),kx(e).jo(t)}function zb(e){e.wu=new $y({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},te:function(t){return e.hu.get(t)||null}}),kx(e).start(),e._u.iu()}function qb(e){return Kb(e)&&!kx(e).Do()&&e.hu.size>0}function Kb(e){return 0===kp(e).lu.size}function Gb(e){e.wu=void 0}function Hb(e){return Wb.apply(this,arguments)}function Wb(){return Wb=ut(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.hu.forEach((function(e,n){Vb(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Wb.apply(this,arguments)}function Qb(e,t){return $b.apply(this,arguments)}function $b(){return $b=ut(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Gb(t),qb(t)?(t._u.uu(n),zb(t)):t._u.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),$b.apply(this,arguments)}function Yb(e,t,n){return Jb.apply(this,arguments)}function Jb(){return Jb=ut(rt().mark((function e(t,n,r){var i;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._u.set("Online"),!(n instanceof Wy&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=ut(rt().mark((function e(t,n){var r,i,a,o;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=ge(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.hu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.hu.delete(o),t.wu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),dp("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Xb(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Gy?t.wu.Ut(n):n instanceof Hy?t.wu.zt(n):t.wu.Gt(n),r.isEqual(Fp.min())){e.next=29;break}return e.prev=14,e.next=17,Qw(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.wu.Yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.hu.get(r);i&&e.hu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.hu.get(t);if(n){e.hu.set(t,n.withResumeToken(Sv.EMPTY_BYTE_STRING,n.snapshotVersion)),Bb(e,t);var r=new sk(n.target,t,1,n.sequenceNumber);Vb(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),dp("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Xb(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Jb.apply(this,arguments)}function Xb(e,t,n){return Zb.apply(this,arguments)}function Zb(){return Zb=ut(rt().mark((function e(t,n,r){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(uv(n)){e.next=2;break}throw n;case 2:return t.lu.add(1),e.next=5,Mb(t);case 5:t._u.set("Offline"),r||(r=function(){return Qw(t.localStore)}),t.asyncQueue.enqueueRetryable(ut(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return dp("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.lu.delete(1),e.next=6,Ob(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),Zb.apply(this,arguments)}function ex(e,t){return t().catch((function(n){return Xb(e,n,t)}))}function tx(e){return nx.apply(this,arguments)}function nx(){return nx=ut(rt().mark((function e(t){var n,r,i,a;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=kp(t),r=wx(n),i=n.au.length>0?n.au[n.au.length-1].batchId:-1;case 2:if(!rx(n)){e.next=19;break}return e.prev=3,e.next=6,Jw(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.au.length&&r.ko(),e.abrupt("break",19);case 10:i=a.batchId,ix(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Xb(n,e.t0);case 17:e.next=2;break;case 19:ax(n)&&ox(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),nx.apply(this,arguments)}function rx(e){return Kb(e)&&e.au.length<10}function ix(e,t){e.au.push(t);var n=wx(e);n.Co()&&n.zo&&n.Ho(t.mutations)}function ax(e){return Kb(e)&&!wx(e).Do()&&e.au.length>0}function ox(e){wx(e).start()}function ux(e){return sx.apply(this,arguments)}function sx(){return sx=ut(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:wx(t).Xo();case 1:case"end":return e.stop()}}),e)}))),sx.apply(this,arguments)}function cx(e){return lx.apply(this,arguments)}function lx(){return lx=ut(rt().mark((function e(t){var n,r,i,a;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=wx(t),r=ge(t.au);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Ho(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),lx.apply(this,arguments)}function fx(e,t,n){return hx.apply(this,arguments)}function hx(){return hx=ut(rt().mark((function e(t,n,r){var i,a;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.au.shift(),a=ok.from(i,n,r),e.next=3,ex(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,tx(t);case 5:case"end":return e.stop()}}),e)}))),hx.apply(this,arguments)}function dx(e,t){return px.apply(this,arguments)}function px(){return px=ut(rt().mark((function e(t,n){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&wx(t).zo,!e.t0){e.next=4;break}return e.next=4,function(){var e=ut(rt().mark((function e(t,n){var r,i;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ty(i=n.code)||i===wp.ABORTED){e.next=7;break}return r=t.au.shift(),wx(t).No(),e.next=5,ex(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,tx(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:ax(t)&&ox(t);case 5:case"end":return e.stop()}}),e)}))),px.apply(this,arguments)}function vx(e,t){return mx.apply(this,arguments)}function mx(){return mx=ut(rt().mark((function e(t,n){var r,i;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=kp(t)).asyncQueue.verifyOperationInProgress(),dp("RemoteStore","RemoteStore received new credentials"),i=Kb(r),r.lu.add(3),e.next=6,Mb(r);case 6:return i&&r._u.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.lu.delete(3),e.next=12,Ob(r);case 12:case"end":return e.stop()}}),e)}))),mx.apply(this,arguments)}function yx(e,t){return gx.apply(this,arguments)}function gx(){return gx=ut(rt().mark((function e(t,n){var r;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=kp(t),!n){e.next=7;break}return r.lu.delete(2),e.next=5,Ob(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.lu.add(2),e.next=12,Mb(r);case 12:r._u.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),gx.apply(this,arguments)}function kx(e){return e.mu||(e.mu=function(e,t,n){var r=kp(e);return r.tu(),new Nb(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:Hb.bind(null,e),Jr:Qb.bind(null,e),Go:Yb.bind(null,e)}),e.fu.push(function(){var t=ut(rt().mark((function t(n){return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.mu.No(),qb(e)?zb(e):e._u.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.mu.stop();case 6:Gb(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.mu}function wx(e){return e.gu||(e.gu=function(e,t,n){var r=kp(e);return r.tu(),new Ab(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:ux.bind(null,e),Jr:dx.bind(null,e),Yo:cx.bind(null,e),Jo:fx.bind(null,e)}),e.fu.push(function(){var t=ut(rt().mark((function t(n){return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.gu.No(),t.next=4,tx(e);case 4:t.next=9;break;case 6:return t.next=8,e.gu.stop();case 8:e.au.length>0&&(dp("RemoteStore","Stopping write stream with ".concat(e.au.length," pending writes")),e.au=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.gu}var bx=function(){function e(t,n,r,i,a){ve(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new xp,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return ye(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new bp(wp.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function xx(e,t){if(pp("AsyncQueue","".concat(t,": ").concat(e)),uv(e))return new bp(wp.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var _x=function(){function e(t){ve(this,e),this.comparator=t?function(e,n){return t(e,n)||zp.comparator(e.key,n.key)}:function(e,t){return zp.comparator(e.key,t.key)},this.keyedMap=Py(),this.sortedSet=new gv(this.comparator)}return ye(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),Ix=function(){function e(){ve(this,e),this.yu=new gv(zp.comparator)}return ye(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.yu.get(t);n?0!==e.type&&3===n.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==n.type?this.yu=this.yu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.yu=this.yu.remove(t):1===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):yp():this.yu=this.yu.insert(t,e)}},{key:"pu",value:function(){var e=[];return this.yu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),Sx=function(){function e(t,n,r,i,a,o,u,s){ve(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return ye(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Um(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,_x.emptySet(n),a,r,i,!0,!1)}}]),e}(),Ex=ye((function e(){ve(this,e),this.Iu=void 0,this.listeners=[]})),Tx=ye((function e(){ve(this,e),this.queries=new Ny((function(e){return Vm(e)}),Um),this.onlineState="Unknown",this.Tu=new Set}));function Cx(e,t){return Nx.apply(this,arguments)}function Nx(){return Nx=ut(rt().mark((function e(t,n){var r,i,a,o,u;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=kp(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new Ex),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Iu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=xx(e.t0,"Initialization of query '".concat(Bm(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Eu(r.onlineState),o.Iu&&n.Au(o.Iu)&&Ox(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),Nx.apply(this,arguments)}function Ax(e,t){return Rx.apply(this,arguments)}function Rx(){return Rx=ut(rt().mark((function e(t,n){var r,i,a,o,u;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=kp(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),Rx.apply(this,arguments)}function Dx(e,t){var n,r=kp(e),i=!1,a=ge(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=ge(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Au(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Iu=o}}}catch(f){a.e(f)}finally{a.f()}i&&Ox(r)}function Px(e,t,n){var r=kp(e),i=r.queries.get(t);if(i){var a,o=ge(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function Ox(e){e.Tu.forEach((function(e){e.next()}))}var Lx=function(){function e(t,n,r){ve(this,e),this.query=t,this.Ru=n,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}return ye(e,[{key:"Au",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=ge(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new Sx(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),a=!0):this.Vu(e,this.onlineState)&&(this.Su(e),a=!0),this.Pu=e,a}},{key:"onError",value:function(e){this.Ru.error(e)}},{key:"Eu",value:function(e){this.onlineState=e;var t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}},{key:"Vu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Du||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"vu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Su",value:function(e){e=Sx.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}]),e}(),Mx=function(){function e(t,n){ve(this,e),this.payload=t,this.byteLength=n}return ye(e,[{key:"Cu",value:function(){return"metadata"in this.payload}}]),e}(),Fx=function(){function e(t){ve(this,e),this.wt=t}return ye(e,[{key:"Wi",value:function(e){return sg(this.wt,e)}},{key:"zi",value:function(e){return e.metadata.exists?pg(this.wt,e.document,!1):um.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}},{key:"Hi",value:function(e){return ig(e)}}]),e}(),jx=function(){function e(t,n,r){ve(this,e),this.xu=t,this.localStore=n,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Ux(t)}return ye(e,[{key:"Nu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=Up.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"ku",value:function(e){var t,n=new Map,r=new Fx(this.wt),i=ge(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Wi(a.metadata.name),s=ge(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||Vy()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=ut(rt().mark((function e(){var t,n,r,i,a;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ab(this.localStore,new Fx(this.wt),this.documents,this.xu.id);case 2:t=e.sent,n=this.ku(this.documents),r=ge(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,ub(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Ou:this.collectionGroups,Mu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function Ux(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var Vx=ye((function e(t){ve(this,e),this.key=t})),Bx=ye((function e(t){ve(this,e),this.key=t})),zx=function(){function e(t,n){ve(this,e),this.query=t,this.Fu=n,this.$u=null,this.current=!1,this.Bu=Vy(),this.mutatedKeys=Vy(),this.Lu=Km(t),this.Uu=new _x(this.Lu)}return ye(e,[{key:"qu",get:function(){return this.Fu}},{key:"Ku",value:function(e,t){var n=this,r=t?t.Gu:new Ix,i=t?t.Uu:this.Uu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=zm(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Qu(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Lu(f,s)>0||c&&n.Lu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Uu:o,Gu:r,Oi:u,mutatedKeys:a}}},{key:"Qu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;var a=e.Gu.pu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return yp()}};return n(e)-n(t)}(e.type,t.type)||r.Lu(e.doc,t.doc)})),this.ju(n);var o=t?this.Wu():[],u=0===this.Bu.size&&this.current?1:0,s=u!==this.$u;return this.$u=u,0!==a.length||s?{snapshot:new Sx(this.query,e.Uu,i,a,e.mutatedKeys,0===u,s,!1),zu:o}:{zu:o}}},{key:"Eu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new Ix,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}},{key:"Hu",value:function(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}},{key:"ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Fu=t.Fu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Fu=t.Fu.delete(e)})),this.current=e.current)}},{key:"Wu",value:function(){var e=this;if(!this.current)return[];var t=this.Bu;this.Bu=Vy(),this.Uu.forEach((function(t){e.Hu(t.key)&&(e.Bu=e.Bu.add(t.key))}));var n=[];return t.forEach((function(t){e.Bu.has(t)||n.push(new Bx(t))})),this.Bu.forEach((function(e){t.has(e)||n.push(new Vx(e))})),n}},{key:"Ju",value:function(e){this.Fu=e.ji,this.Bu=Vy();var t=this.Ku(e.documents);return this.applyChanges(t,!0)}},{key:"Yu",value:function(){return Sx.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}]),e}(),qx=ye((function e(t,n,r){ve(this,e),this.query=t,this.targetId=n,this.view=r})),Kx=ye((function e(t){ve(this,e),this.key=t,this.Xu=!1})),Gx=function(){function e(t,n,r,i,a,o){ve(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Zu={},this.tc=new Ny((function(e){return Vm(e)}),Um),this.ec=new Map,this.nc=new Set,this.sc=new gv(zp.comparator),this.ic=new Map,this.rc=new Sw,this.oc={},this.uc=new Map,this.cc=tw.Rn(),this.onlineState="Unknown",this.ac=void 0}return ye(e,[{key:"isPrimaryClient",get:function(){return!0===this.ac}}]),e}();function Hx(e,t){return Wx.apply(this,arguments)}function Wx(){return Wx=ut(rt().mark((function e(t,n){var r,i,a,o,u,s;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=U_(t),!(o=r.tc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Yu(),e.next=15;break;case 6:return e.next=8,Xw(r.localStore,Fm(n));case 8:return u=e.sent,r.isPrimaryClient&&jb(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,Qx(r,n,i,"current"===s);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),Wx.apply(this,arguments)}function Qx(e,t,n,r){return $x.apply(this,arguments)}function $x(){return $x=ut(rt().mark((function e(t,n,r,i){var a,o,u,s,c,l;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.hc=function(e,n,r){return function(){var e=ut(rt().mark((function e(t,n,r,i){var a,o,u;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Ku(r),e.t0=a.Oi,!e.t0){e.next=6;break}return e.next=5,tb(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Ku(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(v_(t,n.targetId,u.zu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,tb(t.localStore,n,!0);case 3:return a=e.sent,o=new zx(n,a.ji),u=o.Ku(a.documents),s=Ky.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),v_(t,r,c.zu),l=new qx(n,r,o),e.abrupt("return",(t.tc.set(n,l),t.ec.has(r)?t.ec.get(r).push(n):t.ec.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),$x.apply(this,arguments)}function Yx(e,t){return Jx.apply(this,arguments)}function Jx(){return Jx=ut(rt().mark((function e(t,n){var r,i,a;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=kp(t),i=r.tc.get(n),!((a=r.ec.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ec.set(i.targetId,a.filter((function(e){return!Um(e,n)}))),void r.tc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Zw(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),Ub(r.remoteStore,i.targetId),d_(r,i.targetId)})).catch(ev);case 9:e.next=14;break;case 11:return d_(r,i.targetId),e.next=14,Zw(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),Jx.apply(this,arguments)}function Xx(e,t,n){return Zx.apply(this,arguments)}function Zx(){return Zx=ut(rt().mark((function e(t,n,r){var i,a,o;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=V_(t),e.prev=1,e.next=4,function(e,t){var n,r,i=kp(e),a=Mp.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Vy());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=Ry(),s=Vy();return i.Ui.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=ge(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=vy(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new gy(c.key,l,om(l.value.mapValue),cy.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:Oy(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.oc[e.currentUser.toKey()];r||(r=new gv(Pp)),r=r.insert(t,n),e.oc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,g_(i,a.changes);case 9:return e.next=11,tx(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=xx(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),Zx.apply(this,arguments)}function e_(e,t){return t_.apply(this,arguments)}function t_(){return t_=ut(rt().mark((function e(t,n){var r,i;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=kp(t),e.prev=1,e.next=4,$w(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.ic.get(t);n&&(gp(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Xu=!0:e.modifiedDocuments.size>0?gp(n.Xu):e.removedDocuments.size>0&&(gp(n.Xu),n.Xu=!1))})),e.next=8,g_(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,ev(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),t_.apply(this,arguments)}function n_(e,t,n){var r=kp(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.tc.forEach((function(e,n){var r=n.view.Eu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=kp(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=ge(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Eu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&Ox(n)}(r.eventManager,t),i.length&&r.Zu.Go(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function r_(e,t,n){return i_.apply(this,arguments)}function i_(){return i_=ut(rt().mark((function e(t,n,r){var i,a,o,u,s,c;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=kp(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.ic.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new gv(zp.comparator)).insert(o,um.newNoDocument(o,Fp.min())),s=Vy().add(o),c=new qy(Fp.min(),new Map,new bv(Pp),u,s),e.next=9,e_(i,c);case 9:i.sc=i.sc.remove(o),i.ic.delete(n),y_(i),e.next=16;break;case 14:return e.next=16,Zw(i.localStore,n,!1).then((function(){return d_(i,n,r)})).catch(ev);case 16:case"end":return e.stop()}}),e)}))),i_.apply(this,arguments)}function a_(e,t){return o_.apply(this,arguments)}function o_(){return o_=ut(rt().mark((function e(t,n){var r,i,a;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=kp(t),i=n.batch.batchId,e.prev=1,e.next=4,Ww(r.localStore,n);case 4:return a=e.sent,h_(r,i,null),f_(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,g_(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,ev(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),o_.apply(this,arguments)}function u_(e,t,n){return s_.apply(this,arguments)}function s_(){return s_=ut(rt().mark((function e(t,n,r){var i,a;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=kp(t),e.prev=1,e.next=4,function(e,t){var n=kp(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return gp(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,h_(i,n,r),f_(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,g_(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,ev(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),s_.apply(this,arguments)}function c_(e,t){return l_.apply(this,arguments)}function l_(){return l_=ut(rt().mark((function e(t,n){var r,i,a,o;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Kb((r=kp(t)).remoteStore)||dp("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=kp(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.uc.get(i)||[]).push(n),r.uc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=xx(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),l_.apply(this,arguments)}function f_(e,t){(e.uc.get(t)||[]).forEach((function(e){e.resolve()})),e.uc.delete(t)}function h_(e,t,n){var r=kp(e),i=r.oc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.oc[r.currentUser.toKey()]=i}}function d_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=ge(e.ec.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.tc.delete(a),n&&e.Zu.lc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ec.delete(t),e.isPrimaryClient&&e.rc.us(t).forEach((function(t){e.rc.containsKey(t)||p_(e,t)}))}function p_(e,t){e.nc.delete(t.path.canonicalString());var n=e.sc.get(t);null!==n&&(Ub(e.remoteStore,n),e.sc=e.sc.remove(t),e.ic.delete(n),y_(e))}function v_(e,t,n){var r,i=ge(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof Vx?(e.rc.addReference(a.key,t),m_(e,a)):a instanceof Bx?(dp("SyncEngine","Document no longer in limbo: "+a.key),e.rc.removeReference(a.key,t),e.rc.containsKey(a.key)||p_(e,a.key)):yp()}}catch(o){i.e(o)}finally{i.f()}}function m_(e,t){var n=t.key,r=n.path.canonicalString();e.sc.get(n)||e.nc.has(r)||(dp("SyncEngine","New document in limbo: "+n),e.nc.add(r),y_(e))}function y_(e){for(;e.nc.size>0&&e.sc.size<e.maxConcurrentLimboResolutions;){var t=e.nc.values().next().value;e.nc.delete(t);var n=new zp(Up.fromString(t)),r=e.cc.next();e.ic.set(r,new Kx(n)),e.sc=e.sc.insert(n,r),jb(e.remoteStore,new sk(Fm(Dm(n.path)),r,2,pv.ot))}}function g_(e,t,n){return k_.apply(this,arguments)}function k_(){return k_=ut(rt().mark((function e(t,n,r){var i,a,o,u;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=kp(t),a=[],o=[],u=[],e.t0=i.tc.isEmpty(),e.t0){e.next=9;break}return i.tc.forEach((function(e,t){u.push(i.hc(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=Bw.Vi(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.Zu.Go(a),e.next=9,function(){var e=ut(rt().mark((function e(t,n){var r,i,a,o,u,s,c,l;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=kp(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return nv.forEach(n,(function(t){return nv.forEach(t.Pi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return nv.forEach(t.vi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),uv(e.t0)){e.next=10;break}throw e.t0;case 10:dp("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=ge(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.$i.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.$i=r.$i.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),k_.apply(this,arguments)}function w_(e,t){return b_.apply(this,arguments)}function b_(){return b_=ut(rt().mark((function e(t,n){var r,i;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=kp(t)).currentUser.isEqual(n)){e.next=11;break}return dp("SyncEngine","User change. New user:",n.toKey()),e.next=5,Gw(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.uc.forEach((function(e){e.forEach((function(e){e.reject(new bp(wp.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.uc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,g_(r,i.Ki);case 11:case"end":return e.stop()}}),e)}))),b_.apply(this,arguments)}function x_(e,t){var n=kp(e),r=n.ic.get(t);if(r&&r.Xu)return Vy().add(r.key);var i=Vy(),a=n.ec.get(t);if(!a)return i;var o,u=ge(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.tc.get(s);i=i.unionWith(c.view.qu)}}catch(l){u.e(l)}finally{u.f()}return i}function __(e,t){return I_.apply(this,arguments)}function I_(){return I_=ut(rt().mark((function e(t,n){var r,i,a;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=kp(t),e.next=3,tb(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Ju(i),e.abrupt("return",(r.isPrimaryClient&&v_(r,n.targetId,a.zu),a));case 6:case"end":return e.stop()}}),e)}))),I_.apply(this,arguments)}function S_(e,t){return E_.apply(this,arguments)}function E_(){return E_=ut(rt().mark((function e(t,n){var r;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=kp(t),e.abrupt("return",rb(r.localStore,n).then((function(e){return g_(r,e)})));case 2:case"end":return e.stop()}}),e)}))),E_.apply(this,arguments)}function T_(e,t,n,r){return C_.apply(this,arguments)}function C_(){return C_=ut(rt().mark((function e(t,n,r,i){var a,o;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=kp(t),e.next=3,function(e,t){var n=kp(e),r=kp(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.yn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):nv.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,tx(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(h_(a,n,i||null),f_(a,n),function(e,t){kp(kp(e).mutationQueue).In(t)}(a.localStore,n)):yp();case 11:return e.next=13,g_(a,o);case 13:e.next=16;break;case 15:dp("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),C_.apply(this,arguments)}function N_(e,t){return A_.apply(this,arguments)}function A_(){return A_=ut(rt().mark((function e(t,n){var r,i,a,o,u,s,c,l;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U_(r=kp(t)),V_(r),!0!==n||!0===r.ac){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,R_(r,i.toArray());case 5:return a=e.sent,r.ac=!0,e.next=9,yx(r.remoteStore,!0);case 9:o=ge(a);try{for(o.s();!(u=o.n()).done;)s=u.value,jb(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.ac){e.next=25;break}return c=[],l=Promise.resolve(),r.ec.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return d_(r,t),Zw(r.localStore,t,!0)})),Ub(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,R_(r,c);case 21:return function(e){var t=kp(e);t.ic.forEach((function(e,n){Ub(t.remoteStore,n)})),t.rc.cs(),t.ic=new Map,t.sc=new gv(zp.comparator)}(r),r.ac=!1,e.next=25,yx(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),A_.apply(this,arguments)}function R_(e,t,n){return D_.apply(this,arguments)}function D_(){return D_=ut(rt().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,m,y;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=kp(t),a=[],o=[],u=ge(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.ec.get(c))||0===f.length){e.next=34;break}return e.next=11,Xw(i.localStore,Fm(f[0]));case 11:l=e.sent,h=ge(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.tc.get(p),e.next=20,__(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,nb(i.localStore,c);case 36:return y=e.sent,e.next=39,Xw(i.localStore,y);case 39:return l=e.sent,e.next=42,Qx(i,P_(y),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.Zu.Go(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),D_.apply(this,arguments)}function P_(e){return Rm(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function O_(e){var t=kp(e);return kp(kp(t.localStore).persistence).Ri()}function L_(e,t,n,r){return M_.apply(this,arguments)}function M_(){return M_=ut(rt().mark((function e(t,n,r,i){var a,o,u,s;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=kp(t)).ac){e.next=3;break}return e.abrupt("return",void dp("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ec.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,rb(a.localStore,qm(o[0]));case 10:return u=e.sent,s=qy.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,g_(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,Zw(a.localStore,n,!0);case 17:return d_(a,n,i),e.abrupt("break",20);case 19:yp();case 20:case"end":return e.stop()}}),e)}))),M_.apply(this,arguments)}function F_(e,t,n){return j_.apply(this,arguments)}function j_(){return j_=ut(rt().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=U_(t)).ac){e.next=45;break}a=ge(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.ec.has(u)){e.next=10;break}return dp("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,nb(i.localStore,u);case 12:return s=e.sent,e.next=15,Xw(i.localStore,s);case 15:return c=e.sent,e.next=18,Qx(i,P_(s),c.targetId,!1);case 18:jb(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=ge(r),e.prev=30,h=rt().mark((function e(){var t;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.ec.has(t),!e.t0){e.next=5;break}return e.next=5,Zw(i.localStore,t,!1).then((function(){Ub(i.remoteStore,t),d_(i,t)})).catch(ev);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),j_.apply(this,arguments)}function U_(e){var t=kp(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=e_.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=x_.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=r_.bind(null,t),t.Zu.Go=Dx.bind(null,t.eventManager),t.Zu.lc=Px.bind(null,t.eventManager),t}function V_(e){var t=kp(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=a_.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=u_.bind(null,t),t}function B_(e,t,n){var r=kp(e);(function(){var e=ut(rt().mark((function e(t,n,r){var i,a,o,u,s;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=kp(e),r=ig(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ds.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(Ux(i)),a=new jx(i,t.localStore,n.wt),e.next=15,n.fc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Nu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.fc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,g_(t,s.Mu,void 0);case 31:return e.next=33,function(e,t){var n=kp(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ds.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Ou));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(vp("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var z_=function(){function e(){ve(this,e),this.synchronizeTabs=!1}return ye(e,[{key:"initialize",value:function(){var e=ut(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.wt=Eb(t.databaseInfo.databaseId),this.sharedClientState=this.dc(t),this.persistence=this._c(t),e.next=5,this.persistence.start();case 5:this.localStore=this.wc(t),this.gcScheduler=this.mc(t,this.localStore),this.indexBackfillerScheduler=this.gc(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"mc",value:function(e,t){return null}},{key:"gc",value:function(e,t){return null}},{key:"wc",value:function(e){return Kw(this.persistence,new zw,e.initialUser,this.wt)}},{key:"_c",value:function(e){return new Rw(Pw.Ms,this.wt)}},{key:"dc",value:function(e){return new gb}},{key:"terminate",value:function(){var e=ut(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),q_=function(e){be(n,e);var t=Ee(n);function n(e,r,i){var a;return ve(this,n),(a=t.call(this)).yc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return ye(n,[{key:"initialize",value:function(){var e=ut(rt().mark((function e(t){var r=this;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,On(xe(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.yc.initialize(this,t);case 4:return e.next=6,V_(this.yc.syncEngine);case 6:return e.next=8,tx(this.yc.remoteStore);case 8:return e.next=10,this.persistence.ci((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"wc",value:function(e){return Kw(this.persistence,new zw,e.initialUser,this.wt)}},{key:"mc",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new sw(n,e.asyncQueue,t)}},{key:"gc",value:function(e,t){var n=new dv(t,this.persistence);return new hv(e.asyncQueue,n)}},{key:"_c",value:function(e){var t=Vw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Wk.withCacheSize(this.cacheSizeBytes):Wk.DEFAULT;return new Fw(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Ib(),Sb(),this.wt,this.sharedClientState,!!this.forceOwnership)}},{key:"dc",value:function(e){return new gb}}]),n}(z_),K_=function(e){be(n,e);var t=Ee(n);function n(e,r){var i;return ve(this,n),(i=t.call(this,e,r,!1)).yc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return ye(n,[{key:"initialize",value:function(){var e=ut(rt().mark((function e(t){var r,i=this;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,On(xe(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.yc.syncEngine,e.t0=this.sharedClientState instanceof yb,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={kr:T_.bind(null,r),Or:L_.bind(null,r),Mr:F_.bind(null,r),Ri:O_.bind(null,r),Nr:S_.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.ci(function(){var e=ut(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N_(i.yc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"dc",value:function(e){var t=Ib();if(!yb.V(t))throw new bp(wp.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Vw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new yb(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(q_),G_=function(){function e(){ve(this,e)}return ye(e,[{key:"initialize",value:function(){var e=ut(rt().mark((function e(t,n){var r=this;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return n_(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=w_.bind(null,this.syncEngine),e.next=12,yx(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new Tx}},{key:"createDatastore",value:function(e){var t,n=Eb(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new _b(t));return function(e,t,n,r){return new Rb(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return n_(o.syncEngine,e,0)},a=wb.V()?new wb:new kb,new Pb(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new Gx(e,t,n,r,i,a);return o&&(u.ac=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=ut(rt().mark((function e(t){var n;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=kp(t),dp("RemoteStore","RemoteStore shutting down."),n.lu.add(5),e.next=5,Mb(n);case 5:n.du.shutdown(),n._u.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function H_(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return ut(rt().mark((function r(){var i;return rt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return ut(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var W_=function(){function e(t){ve(this,e),this.observer=t,this.muted=!1}return ye(e,[{key:"next",value:function(e){this.observer.next&&this.Ic(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Tc",value:function(){this.muted=!0}},{key:"Ic",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),Q_=function(){function e(t,n){var r=this;ve(this,e),this.Ec=t,this.wt=n,this.metadata=new xp,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then((function(e){e&&e.Cu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return ye(e,[{key:"close",value:function(){return this.Ec.cancel()}},{key:"getMetadata",value:function(){var e=ut(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fc",value:function(){var e=ut(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Rc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Rc",value:function(){var e=ut(rt().mark((function e(){var t,n,r,i;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.bc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Ac.decode(t),r=Number(n),isNaN(r)&&this.Pc("length string (".concat(n,") is not valid number")),e.next=9,this.vc(r);case 9:return i=e.sent,e.abrupt("return",new Mx(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Vc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"bc",value:function(){var e=ut(rt().mark((function e(){var t,n;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Vc()<0)){e.next=7;break}return e.next=3,this.Sc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Vc())<0&&this.Pc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"vc",value:function(){var e=ut(rt().mark((function e(t){var n;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Sc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Pc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Ac.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Pc",value:function(e){throw this.Ec.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Sc",value:function(){var e=ut(rt().mark((function e(){var t,n;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ec.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),$_=function(){function e(t){ve(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return ye(e,[{key:"lookup",value:function(){var e=ut(rt().mark((function e(t){var n,r=this;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new bp(wp.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=ut(rt().mark((function e(t,n){var r,i,a,o,u,s;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=kp(t),i=fg(r.wt)+"/documents",a={documents:n.map((function(e){return ug(r.wt,e)}))},e.next=5,r.ao("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=vg(r.wt,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());gp(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Iy(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=ut(rt().mark((function e(){var t,n=this;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=zp.fromPath(t);n.mutations.push(new Sy(r,n.precondition(r)))})),e.next=7,function(){var e=ut(rt().mark((function e(t,n){var r,i,a;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=kp(t),i=fg(r.wt)+"/documents",a={writes:n.map((function(e){return mg(r.wt,e)}))},e.next=3,r.ro("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw yp();t=Fp.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new bp(wp.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?cy.updateTime(t):cy.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Fp.min()))throw new bp(wp.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return cy.updateTime(t)}return cy.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),Y_=function(){function e(t,n,r,i,a){ve(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Dc=r.maxAttempts,this.So=new Tb(this.asyncQueue,"transaction_retry")}return ye(e,[{key:"run",value:function(){this.Dc-=1,this.Cc()}},{key:"Cc",value:function(){var e=this;this.So.Io(ut(rt().mark((function t(){var n,r;return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new $_(e.datastore),(r=e.xc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Nc(t)}))}))})).catch((function(t){e.Nc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"xc",value:function(e){try{var t=this.updateFunction(e);return!Lv(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Nc",value:function(e){var t=this;this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Cc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"kc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!Ty(t)}return!1}}]),e}(),J_=function(){function e(t,n,r,i){var a=this;ve(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=cp.UNAUTHENTICATED,this.clientId=Dp.I(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=ut(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return dp("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return dp("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return ye(e,[{key:"getConfiguration",value:function(){var e=ut(rt().mark((function e(){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new bp(wp.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new xp;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(ut(rt().mark((function n(){var r;return rt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=xx(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function X_(e,t){return Z_.apply(this,arguments)}function Z_(){return Z_=ut(rt().mark((function e(t,n){var r,i;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),dp("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=ut(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Gw(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),Z_.apply(this,arguments)}function eI(e,t){return tI.apply(this,arguments)}function tI(){return tI=ut(rt().mark((function e(t,n){var r,i;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,nI(t);case 3:return r=e.sent,dp("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return vx(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return vx(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),tI.apply(this,arguments)}function nI(e){return rI.apply(this,arguments)}function rI(){return rI=ut(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return dp("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,X_(t,new z_);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),rI.apply(this,arguments)}function iI(e){return aI.apply(this,arguments)}function aI(){return aI=ut(rt().mark((function e(t){return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return dp("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,eI(t,new G_);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),aI.apply(this,arguments)}function oI(e){return nI(e).then((function(e){return e.persistence}))}function uI(e){return nI(e).then((function(e){return e.localStore}))}function sI(e){return iI(e).then((function(e){return e.remoteStore}))}function cI(e){return iI(e).then((function(e){return e.syncEngine}))}function lI(e){return fI.apply(this,arguments)}function fI(){return fI=ut(rt().mark((function e(t){var n,r;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,iI(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Hx.bind(null,n.syncEngine),r.onUnlisten=Yx.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),fI.apply(this,arguments)}function hI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new xp;return e.asyncQueue.enqueueAndForget(ut(rt().mark((function i(){return rt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new W_({next:function(a){t.enqueueAndForget((function(){return Ax(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new bp(wp.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new bp(wp.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new Lx(Dm(n.path),a,{includeMetadataChanges:!0,Du:!0});return Cx(e,o)},i.next=3,lI(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function dI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new xp;return e.asyncQueue.enqueueAndForget(ut(rt().mark((function i(){return rt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new W_({next:function(n){t.enqueueAndForget((function(){return Ax(e,o)})),n.fromCache&&"server"===r.source?i.reject(new bp(wp.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Lx(n,a,{includeMetadataChanges:!0,Du:!0});return Cx(e,o)},i.next=3,lI(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var pI=new Map;function vI(e,t,n){if(!n)throw new bp(wp.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function mI(e,t,n,r){if(!0===t&&!0===r)throw new bp(wp.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function yI(e){if(!zp.isDocumentKey(e))throw new bp(wp.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function gI(e){if(zp.isDocumentKey(e))throw new bp(wp.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function kI(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":yp()}function wI(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new bp(wp.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=kI(e);throw new bp(wp.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function bI(e,t){if(t<=0)throw new bp(wp.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var xI=function(){function e(t){var n;if(ve(this,e),void 0===t.host){if(void 0!==t.ssl)throw new bp(wp.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new bp(wp.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,mI("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return ye(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),_I=function(){function e(t,n,r){ve(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xI({}),this._settingsFrozen=!1,t instanceof Ov?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new bp(wp.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ov(e.options.projectId)}(t))}return ye(e,[{key:"app",get:function(){if(!this._app)throw new bp(wp.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new bp(wp.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xI(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Ip;switch(e.type){case"gapi":var t=e.client;return gp(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Cp(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new bp(wp.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=pI.get(e);t&&(dp("ComponentProvider","Removing Datastore"),pI.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function II(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=wI(e,_I))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&vp("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=cp.MOCK_USER;else{o=Le(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new bp(wp.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new cp(s)}e._authCredentials=new Sp(new _p(o,u))}}var SI=function(){function e(t,n,r){ve(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return ye(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new TI(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),EI=function(){function e(t,n,r){ve(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return ye(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),TI=function(e){be(n,e);var t=Ee(n);function n(e,r,i){var a;return ve(this,n),(a=t.call(this,e,r,Dm(i)))._path=i,a.type="collection",a}return ye(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new SI(this.firestore,null,new zp(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(EI);function CI(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=nt(e),vI("collection","path",t),e instanceof _I){var a=Up.fromString.apply(Up,[t].concat(r));return gI(a),new TI(e,null,a)}if(!(e instanceof SI||e instanceof TI))throw new bp(wp.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Up.fromString.apply(Up,[t].concat(r)));return gI(o),new TI(e.firestore,null,o)}function NI(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=nt(e),1===arguments.length&&(t=Dp.I()),vI("doc","path",t),e instanceof _I){var a=Up.fromString.apply(Up,[t].concat(r));return yI(a),new SI(e,null,new zp(a))}if(!(e instanceof SI||e instanceof TI))throw new bp(wp.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Up.fromString.apply(Up,[t].concat(r)));return yI(o),new SI(e.firestore,e instanceof TI?e.converter:null,new zp(o))}function AI(e,t){return e=nt(e),t=nt(t),(e instanceof SI||e instanceof TI)&&(t instanceof SI||t instanceof TI)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function RI(e,t){return e=nt(e),t=nt(t),e instanceof EI&&t instanceof EI&&e.firestore===t.firestore&&Um(e._query,t._query)&&e.converter===t.converter}var DI=function(){function e(){var t=this;ve(this,e),this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new Tb(this,"async_queue_retry"),this.Kc=function(){var e=Sb();e&&dp("AsyncQueue","Visibility state changed to "+e.visibilityState),t.So.Eo()};var n=Sb();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Kc)}return ye(e,[{key:"isShuttingDown",get:function(){return this.Fc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Gc(),this.Qc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;var t=Sb();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Gc(),this.Fc)return new Promise((function(){}));var n=new xp;return this.Qc((function(){return t.Fc&&t.Uc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Mc.push(e),t.jc()}))}},{key:"jc",value:function(){var e=ut(rt().mark((function e(){var t=this;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Mc.length){e.next=14;break}return e.prev=1,e.next=4,this.Mc[0]();case 4:this.Mc.shift(),this.So.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),uv(e.t0)){e.next=12;break}throw e.t0;case 12:dp("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Mc.length>0&&this.So.Io((function(){return t.jc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Qc",value:function(e){var t=this,n=this.Oc.then((function(){return t.Lc=!0,e().catch((function(e){t.Bc=e,t.Lc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw pp("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Lc=!1,e}))}));return this.Oc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Gc(),this.qc.indexOf(e)>-1&&(t=0);var i=bx.createAndSchedule(this,e,t,n,(function(e){return r.Wc(e)}));return this.$c.push(i),i}},{key:"Gc",value:function(){this.Bc&&yp()}},{key:"verifyOperationInProgress",value:function(){}},{key:"zc",value:function(){var e=ut(rt().mark((function e(){var t;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Oc,e.next=3,t;case 3:if(t!==this.Oc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Hc",value:function(e){var t,n=ge(this.$c);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Jc",value:function(e){var t=this;return this.zc().then((function(){t.$c.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=ge(t.$c);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.zc()}))}},{key:"Yc",value:function(e){this.qc.push(e)}},{key:"Wc",value:function(e){var t=this.$c.indexOf(e);this.$c.splice(t,1)}}]),e}();function PI(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=ge(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var OI=function(){function e(){ve(this,e),this._progressObserver={},this._taskCompletionResolver=new xp,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return ye(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),LI=function(e){be(n,e);var t=Ee(n);function n(e,r,i){var a;return ve(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new DI,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return ye(n,[{key:"_terminate",value:function(){return this._firestoreClient||FI(this),this._firestoreClient.terminate()}}]),n}(_I);function MI(e){return e._firestoreClient||FI(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function FI(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new Pv(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new J_(e._authCredentials,e._appCheckCredentials,e._queue,r)}function jI(e,t,n){var r=new xp;return e.asyncQueue.enqueue(ut(rt().mark((function i(){var a;return rt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,X_(e,n);case 3:return i.next=5,eI(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===wp.FAILED_PRECONDITION||e.code===wp.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(a=i.t0)){i.next=13;break}throw a;case 13:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function UI(e){return function(e){return e.asyncQueue.enqueue(ut(rt().mark((function t(){var n,r;return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,oI(e);case 2:return n=t.sent,t.next=5,sI(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=kp(e);return t.lu.delete(0),Ob(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(MI(e=wI(e,LI)))}function VI(e){return function(e){return e.asyncQueue.enqueue(ut(rt().mark((function t(){var n,r;return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,oI(e);case 2:return n=t.sent,t.next=5,sI(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=ut(rt().mark((function e(t){var n;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=kp(t)).lu.add(0),e.next=4,Mb(n);case 4:n._u.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(MI(e=wI(e,LI)))}function BI(e,t){var n=MI(e=wI(e,LI)),r=new OI;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new Q_(e,t)}(function(e,t){if(e instanceof Uint8Array)return H_(e,t);if(e instanceof ArrayBuffer)return H_(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,Eb(t));e.asyncQueue.enqueueAndForget(ut(rt().mark((function t(){return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=B_,t.next=3,cI(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function zI(e,t){return function(e,t){return e.asyncQueue.enqueue(ut(rt().mark((function n(){return rt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=kp(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ds.getNamedQuery(e,t)}))},n.next=3,uI(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(MI(e=wI(e,LI)),t).then((function(t){return t?new EI(e,null,t.query):null}))}function qI(e){if(e._initialized||e._terminated)throw new bp(wp.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var KI=function(){function e(){ve(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new bp(wp.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bp(n)}return ye(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var GI=function(){function e(t){ve(this,e),this._byteString=t}return ye(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Sv.fromBase64String(t))}catch(t){throw new bp(wp.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Sv.fromUint8Array(t))}}]),e}(),HI=ye((function e(t){ve(this,e),this._methodName=t})),WI=function(){function e(t,n){if(ve(this,e),!isFinite(t)||t<-90||t>90)throw new bp(wp.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new bp(wp.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return ye(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Pp(this._lat,e._lat)||Pp(this._long,e._long)}}]),e}(),QI=/^__.*__$/,$I=function(){function e(t,n,r){ve(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return ye(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new gy(e,this.data,this.fieldMask,t,this.fieldTransforms):new yy(e,this.data,t,this.fieldTransforms)}}]),e}(),YI=function(){function e(t,n,r){ve(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return ye(e,[{key:"toMutation",value:function(e,t){return new gy(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function JI(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw yp()}}var XI=function(){function e(t,n,r,i,a,o){ve(this,e),this.settings=t,this.databaseId=n,this.wt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Xc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return ye(e,[{key:"path",get:function(){return this.settings.path}},{key:"Zc",get:function(){return this.settings.Zc}},{key:"ta",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ea",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.sa(e),r}},{key:"ia",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.Xc(),r}},{key:"ra",value:function(e){return this.ta({path:void 0,na:!0})}},{key:"oa",value:function(e){return gS(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Xc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.sa(this.path.get(e))}},{key:"sa",value:function(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(JI(this.Zc)&&QI.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}]),e}(),ZI=function(){function e(t,n,r){ve(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.wt=r||Eb(t)}return ye(e,[{key:"aa",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new XI({Zc:e,methodName:t,ca:n,path:Bp.emptyPath(),na:!1,ua:r},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}]),e}();function eS(e){var t=e._freezeSettings(),n=Eb(e._databaseId);return new ZI(e._databaseId,!!t.ignoreUndefinedProperties,n)}function tS(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.aa(a.merge||a.mergeFields?2:0,t,n,i);pS("Data must be an object, but it was:",o,r);var u,s,c=hS(r,o);if(a.merge)u=new Iv(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=ge(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=vS(t,d,n);if(!o.contains(p))throw new bp(wp.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));kS(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new Iv(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new $I(new am(c),u,s)}var nS=function(e){be(n,e);var t=Ee(n);function n(){return ve(this,n),t.apply(this,arguments)}return ye(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Zc)throw 1===e.Zc?e.oa("".concat(this._methodName,"() can only appear at the top level of your update data")):e.oa("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(HI);function rS(e,t,n){return new XI({Zc:3,ca:t.settings.ca,methodName:e._methodName,na:n},t.databaseId,t.wt,t.ignoreUndefinedProperties)}var iS=function(e){be(n,e);var t=Ee(n);function n(){return ve(this,n),t.apply(this,arguments)}return ye(n,[{key:"_toFieldTransform",value:function(e){return new uy(e.path,new Zm)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(HI),aS=function(e){be(n,e);var t=Ee(n);function n(e,r){var i;return ve(this,n),(i=t.call(this,e)).ha=r,i}return ye(n,[{key:"_toFieldTransform",value:function(e){var t=rS(this,e,!0),n=this.ha.map((function(e){return fS(e,t)})),r=new ey(n);return new uy(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(HI),oS=function(e){be(n,e);var t=Ee(n);function n(e,r){var i;return ve(this,n),(i=t.call(this,e)).ha=r,i}return ye(n,[{key:"_toFieldTransform",value:function(e){var t=rS(this,e,!0),n=this.ha.map((function(e){return fS(e,t)})),r=new ny(n);return new uy(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(HI),uS=function(e){be(n,e);var t=Ee(n);function n(e,r){var i;return ve(this,n),(i=t.call(this,e)).la=r,i}return ye(n,[{key:"_toFieldTransform",value:function(e){var t=new iy(e.wt,Qm(e.wt,this.la));return new uy(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(HI);function sS(e,t,n,r){var i=e.aa(1,t,n);pS("Data must be an object, but it was:",i,r);var a=[],o=am.empty();mv(r,(function(e,r){var u=yS(t,e,n);r=nt(r);var s=i.ia(u);if(r instanceof nS)a.push(u);else{var c=fS(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new Iv(a);return new YI(o,u,i.fieldTransforms)}function cS(e,t,n,r,i,a){var o=e.aa(1,t,n),u=[vS(t,r,n)],s=[i];if(a.length%2!=0)throw new bp(wp.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(vS(t,a[c])),s.push(a[c+1]);for(var l=[],f=am.empty(),h=u.length-1;h>=0;--h)if(!kS(l,u[h])){var d=u[h],p=s[h];p=nt(p);var v=o.ia(d);if(p instanceof nS)l.push(d);else{var m=fS(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new Iv(l);return new YI(f,y,o.fieldTransforms)}function lS(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return fS(n,e.aa(r?4:3,t))}function fS(e,t){if(dS(e=nt(e)))return pS("Unsupported field value:",t,e),hS(e,t);if(e instanceof HI)return function(e,t){if(!JI(t.Zc))throw t.oa("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.oa("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.na&&4!==t.Zc)throw t.oa("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=ge(e);try{for(a.s();!(n=a.n()).done;){var o=fS(n.value,t.ra(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=nt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Qm(t.wt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Mp.fromDate(e);return{timestampValue:tg(t.wt,n)}}if(e instanceof Mp){var r=new Mp(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:tg(t.wt,r)}}if(e instanceof WI)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof GI)return{bytesValue:ng(t.wt,e._byteString)};if(e instanceof SI){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.oa("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:ag(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.oa("Unsupported field value: ".concat(kI(e)))}(e,t)}function hS(e,t){var n={};return yv(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):mv(e,(function(e,r){var i=fS(r,t.ea(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function dS(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Mp||e instanceof WI||e instanceof GI||e instanceof SI||e instanceof HI)}function pS(e,t,n){if(!dS(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=kI(n);throw"an object"===r?t.oa(e+" a custom object"):t.oa(e+" "+r)}}function vS(e,t,n){if((t=nt(t))instanceof KI)return t._internalPath;if("string"==typeof t)return yS(e,t);throw gS("Field path arguments must be of type string or ",e,!1,void 0,n)}var mS=new RegExp("[~\\*/\\[\\]]");function yS(e,t,n){if(t.search(mS)>=0)throw gS("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return Te(KI,at(t.split(".")))._internalPath}catch(r){throw gS("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function gS(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new bp(wp.INVALID_ARGUMENT,u+e+s)}function kS(e,t){return e.some((function(e){return e.isEqual(t)}))}var wS=function(){function e(t,n,r,i,a){ve(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return ye(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new SI(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new bS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(xS("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),bS=function(e){be(n,e);var t=Ee(n);function n(){return ve(this,n),t.apply(this,arguments)}return ye(n,[{key:"data",value:function(){return On(xe(n.prototype),"data",this).call(this)}}]),n}(wS);function xS(e,t){return"string"==typeof t?yS(e,t):t instanceof KI?t._internalPath:t._delegate._internalPath}var _S=function(){function e(t,n){ve(this,e),this.hasPendingWrites=t,this.fromCache=n}return ye(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),IS=function(e){be(n,e);var t=Ee(n);function n(e,r,i,a,o,u){var s;return ve(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return ye(n,[{key:"exists",value:function(){return On(xe(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new SS(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(xS("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(wS),SS=function(e){be(n,e);var t=Ee(n);function n(){return ve(this,n),t.apply(this,arguments)}return ye(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return On(xe(n.prototype),"data",this).call(this,e)}}]),n}(IS),ES=function(){function e(t,n,r,i){ve(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new _S(i.hasPendingWrites,i.fromCache),this.query=r}return ye(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new SS(n._firestore,n._userDataWriter,r.key,r,new _S(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new bp(wp.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new SS(e._firestore,e._userDataWriter,t.doc.key,t.doc,new _S(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new SS(e._firestore,e._userDataWriter,t.doc.key,t.doc,new _S(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:TS(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function TS(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return yp()}}function CS(e,t){return e instanceof IS&&t instanceof IS?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof ES&&t instanceof ES&&e._firestore===t._firestore&&RI(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function NS(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new bp(wp.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var AS=ye((function e(){ve(this,e)}));function RS(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var DS=function(e){be(n,e);var t=Ee(n);function n(e,r,i){var a;return ve(this,n),(a=t.call(this)).fa=e,a.da=r,a._a=i,a.type="where",a}return ye(n,[{key:"_apply",value:function(e){var t=eS(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new bp(wp.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){qS(o,a);var s,c=[],l=ge(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(zS(r,e,f))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=zS(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||qS(o,a),u=lS(n,"where",o,"in"===a||"not-in"===a);var h=mm.create(i,a,u);return function(e,t){if(t.ht()){var n=Om(e);if(null!==n&&!n.isEqual(t.field))throw new bp(wp.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=Pm(e);null!==r&&KS(e,t.field,r)}var i=function(e,t){var n,r=ge(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new bp(wp.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new bp(wp.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new EI(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new Am(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(AS);var PS=function(e){be(n,e);var t=Ee(n);function n(e,r){var i;return ve(this,n),(i=t.call(this)).fa=e,i.wa=r,i.type="orderBy",i}return ye(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new bp(wp.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new bp(wp.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Em(t,n);return function(e,t){if(null===Pm(e)){var n=Om(e);null!==n&&KS(e,n,t.field)}}(e,r),r}(e._query,this.fa,this.wa);return new EI(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Am(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(AS);var OS=function(e){be(n,e);var t=Ee(n);function n(e,r,i){var a;return ve(this,n),(a=t.call(this)).type=e,a.ma=r,a.ga=i,a}return ye(n,[{key:"_apply",value:function(e){return new EI(e.firestore,e.converter,jm(e._query,this.ma,this.ga))}}]),n}(AS);var LS=function(e){be(n,e);var t=Ee(n);function n(e,r,i){var a;return ve(this,n),(a=t.call(this)).type=e,a.ya=r,a.pa=i,a}return ye(n,[{key:"_apply",value:function(e){var t=BS(e,this.type,this.ya,this.pa);return new EI(e.firestore,e.converter,function(e,t){return new Am(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(AS);function MS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new LS("startAt",t,!0)}function FS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new LS("startAfter",t,!1)}var jS=function(e){be(n,e);var t=Ee(n);function n(e,r,i){var a;return ve(this,n),(a=t.call(this)).type=e,a.ya=r,a.pa=i,a}return ye(n,[{key:"_apply",value:function(e){var t=BS(e,this.type,this.ya,this.pa);return new EI(e.firestore,e.converter,function(e,t){return new Am(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(AS);function US(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new jS("endBefore",t,!1)}function VS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new jS("endAt",t,!0)}function BS(e,t,n,r){if(n[0]=nt(n[0]),n[0]instanceof wS)return function(e,t,n,r,i){if(!r)throw new bp(wp.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=ge(Mm(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(Wv(t,r.key));else{var c=r.data.field(s.field);if(Av(c))throw new bp(wp.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new bp(wp.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new Sm(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=eS(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new bp(wp.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new bp(wp.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Lm(e)&&-1!==c.indexOf("/"))throw new bp(wp.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Up.fromString(c));if(!zp.isDocumentKey(l))throw new bp(wp.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new zp(l);u.push(Wv(t,f))}else{var h=lS(n,r,c);u.push(h)}}return new Sm(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function zS(e,t,n){if("string"==typeof(n=nt(n))){if(""===n)throw new bp(wp.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Lm(t)&&-1!==n.indexOf("/"))throw new bp(wp.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Up.fromString(n));if(!zp.isDocumentKey(r))throw new bp(wp.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Wv(e,new zp(r))}if(n instanceof SI)return Wv(e,n._key);throw new bp(wp.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(kI(n),"."))}function qS(e,t){if(!Array.isArray(e)||0===e.length)throw new bp(wp.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new bp(wp.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function KS(e,t,n){if(!n.isEqual(t))throw new bp(wp.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var GS={maxAttempts:5},HS=function(){function e(){ve(this,e)}return ye(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Vv(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Cv(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Nv(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw yp()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return mv(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new WI(Cv(e.latitude),Cv(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Rv(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Dv(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Tv(e);return new Mp(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Up.fromString(e);gp(Ng(n));var r=new Ov(n.get(1),n.get(3)),i=new zp(n.popFirst(5));return r.isEqual(t)||pp("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function WS(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var QS=function(e){be(n,e);var t=Ee(n);function n(e){var r;return ve(this,n),(r=t.call(this)).firestore=e,r}return ye(n,[{key:"convertBytes",value:function(e){return new GI(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new SI(this.firestore,null,t)}}]),n}(HS),$S=function(){function e(t,n){ve(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=eS(t)}return ye(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=YS(e,this._firestore),i=WS(r.converter,t,n),a=tS(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,cy.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=YS(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=nt(t))||t instanceof KI?cS(this._dataReader,"WriteBatch.update",i._key,t,n,o):sS(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,cy.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=YS(e,this._firestore);return this._mutations=this._mutations.concat(new Iy(t._key,cy.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new bp(wp.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function YS(e,t){if((e=nt(e)).firestore!==t)throw new bp(wp.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var JS=function(e){be(n,e);var t=Ee(n);function n(e){var r;return ve(this,n),(r=t.call(this)).firestore=e,r}return ye(n,[{key:"convertBytes",value:function(e){return new GI(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new SI(this.firestore,null,t)}}]),n}(HS);function XS(e){e=wI(e,SI);var t=wI(e.firestore,LI),n=MI(t),r=new JS(t);return function(e,t){var n=new xp;return e.asyncQueue.enqueueAndForget(ut(rt().mark((function r(){return rt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=ut(rt().mark((function e(t,n,r){var i,a;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=kp(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new bp(wp.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=xx(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,uI(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new IS(t,r,e._key,n,new _S(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function ZS(e){e=wI(e,EI);var t=wI(e.firestore,LI),n=MI(t),r=new JS(t);return function(e,t){var n=new xp;return e.asyncQueue.enqueueAndForget(ut(rt().mark((function r(){return rt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=ut(rt().mark((function e(t,n,r){var i,a,o,u,s;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,tb(t,n,!0);case 3:i=e.sent,a=new zx(n,i.ji),o=a.Ku(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=xx(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,uI(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new ES(t,r,e,n)}))}function eE(e,t,n){e=wI(e,SI);var r=wI(e.firestore,LI),i=WS(e.converter,t,n);return iE(r,[tS(eS(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,cy.none())])}function tE(e,t,n){e=wI(e,SI);for(var r=wI(e.firestore,LI),i=eS(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return iE(r,[("string"==typeof(t=nt(t))||t instanceof KI?cS(i,"updateDoc",e._key,t,n,o):sS(i,"updateDoc",e._key,t)).toMutation(e._key,cy.exists(!0))])}function nE(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=nt(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||PI(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(PI(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof SI)l=wI(e.firestore,LI),f=Dm(e._key.path),c={next:function(t){n[s]&&n[s](aE(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=wI(e,EI);l=wI(p.firestore,LI),f=p._query;var v=new JS(l);c={next:function(e){n[s]&&n[s](new ES(l,v,p,e))},error:n[s+1],complete:n[s+2]},NS(e._query)}return function(e,t,n,r){var i=new W_(r),a=new Lx(t,i,n);return e.asyncQueue.enqueueAndForget(ut(rt().mark((function t(){return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Cx,t.next=3,lI(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Tc(),e.asyncQueue.enqueueAndForget(ut(rt().mark((function t(){return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Ax,t.next=3,lI(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(MI(l),f,h,c)}function rE(e,t){return function(e,t){var n=new W_(t);return e.asyncQueue.enqueueAndForget(ut(rt().mark((function t(){return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){kp(e).Tu.add(t),t.next()},t.next=3,lI(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Tc(),e.asyncQueue.enqueueAndForget(ut(rt().mark((function t(){return rt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){kp(e).Tu.delete(t)},t.next=3,lI(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(MI(e=wI(e,LI)),PI(t)?t:{next:t})}function iE(e,t){return function(e,t){var n=new xp;return e.asyncQueue.enqueueAndForget(ut(rt().mark((function r(){return rt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Xx,r.next=3,cI(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(MI(e),t)}function aE(e,t,n){var r=n.docs.get(t._key),i=new JS(e);return new IS(e,i,t._key,r,new _S(n.hasPendingWrites,n.fromCache),t.converter)}var oE=function(e){be(n,e);var t=Ee(n);function n(e,r){var i;return ve(this,n),(i=t.call(this,e,r))._firestore=e,i}return ye(n,[{key:"get",value:function(e){var t=this,r=YS(e,this._firestore),i=new JS(this._firestore);return On(xe(n.prototype),"get",this).call(this,e).then((function(e){return new IS(t._firestore,i,r._key,e._document,new _S(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){ve(this,e),this._firestore=t,this._transaction=n,this._dataReader=eS(t)}return ye(e,[{key:"get",value:function(e){var t=this,n=YS(e,this._firestore),r=new QS(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return yp();var i=e[0];if(i.isFoundDocument())return new wS(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new wS(t._firestore,r,n._key,null,n.converter);throw yp()}))}},{key:"set",value:function(e,t,n){var r=YS(e,this._firestore),i=WS(r.converter,t,n),a=tS(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=YS(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=nt(t))||t instanceof KI?cS(this._dataReader,"Transaction.update",i._key,t,n,o):sS(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=YS(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function uE(e,t,n){e=wI(e,LI);var r=Object.assign(Object.assign({},GS),n);return function(e){if(e.maxAttempts<1)throw new bp(wp.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new xp;return e.asyncQueue.enqueueAndForget(ut(rt().mark((function i(){var a;return rt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,function(e){return iI(e).then((function(e){return e.datastore}))}(e);case 2:a=i.sent,new Y_(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(MI(e),(function(n){return t(new oE(e,n))}),r)}function sE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new aS("arrayUnion",t)}function cE(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new oS("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){lp=e}(tn),Qt(new st("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new LI(i,new Ep(e.getProvider("auth-internal")),new Ap(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),sn(sp,"3.4.11",e),sn(sp,"3.4.11","esm2017")}();function lE(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new bp("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function fE(){if("undefined"===typeof Uint8Array)throw new bp("unimplemented","Uint8Arrays are not available in this environment.")}function hE(){if("undefined"==typeof atob)throw new bp("unimplemented","Blobs are unavailable in Firestore in this environment.")}var dE=function(){function e(t){ve(this,e),this._delegate=t}return ye(e,[{key:"toBase64",value:function(){return hE(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return fE(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return hE(),new e(GI.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return fE(),new e(GI.fromUint8Array(t))}}]),e}();function pE(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=ge(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var vE=function(){function e(){ve(this,e)}return ye(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){qI(e=wI(e,LI));var n=MI(e),r=e._freezeSettings(),i=new G_;return jI(n,i,new q_(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){qI(e=wI(e,LI));var t=MI(e),n=e._freezeSettings(),r=new G_;return jI(t,r,new K_(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new bp(wp.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new xp;return e._queue.enqueueAndForgetEvenWhileRestricted(ut(rt().mark((function n(){return rt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=ut(rt().mark((function e(t){var n;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(iv.V()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,iv.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(Vw(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),mE=function(){function e(t,n,r){var i=this;ve(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Ov||(this._appCompat=t)}return ye(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||vp("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};II(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return UI(this._delegate)}},{key:"disableNetwork",value:function(){return VI(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&mI("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new xp;return e.asyncQueue.enqueueAndForget(ut(rt().mark((function n(){return rt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=c_,n.next=3,cI(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(MI(e=wI(e,LI)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return rE(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new bp("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new AE(this,CI(this._delegate,e))}catch(t){throw xE(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new bE(this,NI(this._delegate,e))}catch(t){throw xE(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new TE(this,function(e,t){if(e=wI(e,_I),vI("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new bp(wp.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new EI(e,null,function(e){return new Am(Up.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw xE(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return uE(this._delegate,(function(n){return e(new gE(t,n))}))}},{key:"batch",value:function(){var e=this;return MI(this._delegate),new kE(new $S(this._delegate,(function(t){return iE(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return BI(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return zI(this._delegate,e).then((function(e){return e?new TE(t,e):null}))}}]),e}(),yE=function(e){be(n,e);var t=Ee(n);function n(e){var r;return ve(this,n),(r=t.call(this)).firestore=e,r}return ye(n,[{key:"convertBytes",value:function(e){return new dE(new GI(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return bE.forKey(t,this.firestore,null)}}]),n}(HS);var gE=function(){function e(t,n){ve(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new yE(t)}return ye(e,[{key:"get",value:function(e){var t=this,n=RE(e);return this._delegate.get(n).then((function(e){return new SE(t._firestore,new IS(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=RE(e);return n?(lE("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=RE(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=RE(e);return this._delegate.delete(t),this}}]),e}(),kE=function(){function e(t){ve(this,e),this._delegate=t}return ye(e,[{key:"set",value:function(e,t,n){var r=RE(e);return n?(lE("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=RE(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=RE(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),wE=function(){function e(t,n,r){ve(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return ye(e,[{key:"fromFirestore",value:function(e,t){var n=new SS(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new EE(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new yE(t),n),i.set(n,a)),a}}]),e}();wE.INSTANCES=new WeakMap;var bE=function(){function e(t,n){ve(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new yE(t)}return ye(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new AE(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new AE(this.firestore,CI(this._delegate,e))}catch(t){throw xE(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=nt(e))instanceof SI&&AI(this._delegate,e)}},{key:"set",value:function(e,t){t=lE("DocumentReference.set",t);try{return t?eE(this._delegate,e,t):eE(this._delegate,e)}catch(n){throw xE(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?tE(this._delegate,e):tE.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw xE(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return iE(wI(e.firestore,LI),[new Iy(e._key,cy.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=_E(n),a=IE(n,(function(t){return new SE(e.firestore,new IS(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return nE(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?XS(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=wI(e,SI);var t=wI(e.firestore,LI);return hI(MI(t),e._key,{source:"server"}).then((function(n){return aE(t,e,n)}))}(this._delegate):function(e){e=wI(e,SI);var t=wI(e.firestore,LI);return hI(MI(t),e._key).then((function(n){return aE(t,e,n)}))}(this._delegate),t.then((function(e){return new SE(n.firestore,new IS(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(wE.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new bp("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new SI(n._delegate,r,new zp(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new SI(n._delegate,r,t))}}]),e}();function xE(e,t,n){return e.message=e.message.replace(t,n),e}function _E(e){var t,n=ge(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!pE(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function IE(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=pE(e[0])?e[0]:pE(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var SE=function(){function e(t,n){ve(this,e),this._firestore=t,this._delegate=n}return ye(e,[{key:"ref",get:function(){return new bE(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return CS(this._delegate,e._delegate)}}]),e}(),EE=function(e){be(n,e);var t=Ee(n);function n(){return ve(this,n),t.apply(this,arguments)}return ye(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||yp()}(void 0!==t),t}}]),n}(SE),TE=function(){function e(t,n){ve(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new yE(t)}return ye(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,RS(this._delegate,function(e,t,n){var r=t,i=xS("where",e);return new DS(i,r,n)}(t,n,r)))}catch(i){throw xE(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,RS(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=xS("orderBy",e);return new PS(n,t)}(t,n)))}catch(r){throw xE(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,RS(this._delegate,function(e){return bI("limit",e),new OS("limit",e,"F")}(t)))}catch(n){throw xE(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,RS(this._delegate,function(e){return bI("limitToLast",e),new OS("limitToLast",e,"L")}(t)))}catch(n){throw xE(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,RS(this._delegate,MS.apply(void 0,arguments)))}catch(t){throw xE(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,RS(this._delegate,FS.apply(void 0,arguments)))}catch(t){throw xE(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,RS(this._delegate,US.apply(void 0,arguments)))}catch(t){throw xE(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,RS(this._delegate,VS.apply(void 0,arguments)))}catch(t){throw xE(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return RI(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?ZS(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=wI(e,EI);var t=wI(e.firestore,LI),n=MI(t),r=new JS(t);return dI(n,e._query,{source:"server"}).then((function(n){return new ES(t,r,e,n)}))}(this._delegate):function(e){e=wI(e,EI);var t=wI(e.firestore,LI),n=MI(t),r=new JS(t);return NS(e._query),dI(n,e._query).then((function(n){return new ES(t,r,e,n)}))}(this._delegate),t.then((function(e){return new NE(n.firestore,new ES(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=_E(n),a=IE(n,(function(t){return new NE(e.firestore,new ES(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return nE(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(wE.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),CE=function(){function e(t,n){ve(this,e),this._firestore=t,this._delegate=n}return ye(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new EE(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),NE=function(){function e(t,n){ve(this,e),this._firestore=t,this._delegate=n}return ye(e,[{key:"query",get:function(){return new TE(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new EE(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new CE(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new EE(n._firestore,r))}))}},{key:"isEqual",value:function(e){return CS(this._delegate,e._delegate)}}]),e}(),AE=function(e){be(n,e);var t=Ee(n);function n(e,r){var i;return ve(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return ye(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new bE(this.firestore,e):null}},{key:"doc",value:function(e){try{return new bE(this.firestore,void 0===e?NI(this._delegate):NI(this._delegate,e))}catch(t){throw xE(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=wI(e.firestore,LI),r=NI(e),i=WS(e.converter,t);return iE(n,[tS(eS(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,cy.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new bE(t.firestore,e)}))}},{key:"isEqual",value:function(e){return AI(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(wE.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(TE);function RE(e){return wI(e,SI)}var DE=function(){function e(){ve(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=Te(KI,n)}return ye(e,[{key:"isEqual",value:function(e){return(e=nt(e))instanceof KI&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Bp.keyField().canonicalString())}}]),e}(),PE=function(){function e(t){ve(this,e),this._delegate=t}return ye(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new iS("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new nS("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=sE.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=cE.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new uS("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),OE={Firestore:mE,GeoPoint:WI,Timestamp:Mp,Blob:dE,Transaction:gE,WriteBatch:kE,DocumentReference:bE,DocumentSnapshot:SE,Query:TE,QueryDocumentSnapshot:EE,QuerySnapshot:NE,CollectionReference:AE,FieldPath:DE,FieldValue:PE,setLogLevel:function(e){!function(e){fp.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new st("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},OE)))}(e,(function(e,t){return new mE(e,t,new vE)})),e.registerVersion("@firebase/firestore-compat","0.1.20")}(Dn);var LE="firebasestorage.googleapis.com",ME=function(e){be(n,e);var t=Ee(n);function n(e,r){var i;return ve(this,n),(i=t.call(this,FE(e),"Firebase Storage: ".concat(r," (").concat(FE(e),")"))).customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(ke(i),n.prototype),i}return ye(n,[{key:"_codeEquals",value:function(e){return FE(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(qe);function FE(e){return"storage/"+e}function jE(){return new ME("unknown","An unknown error occurred, please check the error payload for server response.")}function UE(){return new ME("canceled","User canceled the upload/download.")}function VE(){return new ME("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function BE(e){return new ME("invalid-argument",e)}function zE(){return new ME("app-deleted","The Firebase app was deleted.")}function qE(e){return new ME("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function KE(e,t){return new ME("invalid-format","String does not match format '"+e+"': "+t)}function GE(e){throw new ME("internal-error","Internal error: "+e)}var HE,WE=function(){function e(t,n){ve(this,e),this.bucket=t,this.path_=n}return ye(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(i){return new e(t,"")}if(""===r.path)return r;throw new ME("invalid-default-bucket","Invalid default bucket '"+t+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var u=n.replace(/[.]/g,"\\."),s=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(u,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===LE?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<s.length;c++){var l=s[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new ME("invalid-url","Invalid URL '"+e+"'.")}(t);return r}}]),e}(),QE=function(){function e(t){ve(this,e),this.promise_=Promise.reject(t)}return ye(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function $E(e){return"string"===typeof e||e instanceof String}function YE(e){return JE()&&e instanceof Blob}function JE(){return"undefined"!==typeof Blob}function XE(e,t,n,r){if(r<t)throw BE("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw BE("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function ZE(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function eT(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(HE||(HE={}));var tT=function(){function e(t,n,r,i,a,o,u,s,c,l,f){var h=this;ve(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=s,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return ye(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(s){i(s)}else if(null!==a){var u=jE();u.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,u)):i(u)}else{if(n.canceled)i(e.appDelete_?zE():UE());else i(new ME("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}};this.canceled_?t(0,new nT(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,u=0;function s(){return 2===u}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,s())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a;if(s()||o)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===u?(u=2,a=0):a=1e3*(r+Math.random()),f(a)}}var p=!1;function v(e){p||(p=!0,h(),c||(null!==i?(e||(u=2),clearTimeout(i),f(0)):e||(u=1)))}return f(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new nT(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===HE.NO_ERROR,a=r.getStatus();if(n&&!e.isRetryStatusCode_(a)){var o=-1!==e.successCodes_.indexOf(a);t(!0,new nT(o,r))}else{var u=r.getErrorCode()===HE.ABORT;t(!1,new nT(!1,null,u))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}},{key:"isRetryStatusCode_",value:function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r}}]),e}(),nT=ye((function e(t,n,r){ve(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function rT(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function iT(){for(var e=rT(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(JE())return new Blob(n);throw new ME("unsupported-environment","This browser doesn't seem to support creating Blobs")}var aT={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},oT=ye((function e(t,n){ve(this,e),this.data=t,this.contentType=n||null}));function uT(e,t){switch(e){case aT.RAW:return new oT(sT(t));case aT.BASE64:case aT.BASE64URL:return new oT(cT(e,t));case aT.DATA_URL:return new oT(function(e){var t=new lT(e);return t.base64?cT(aT.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw KE(aT.DATA_URL,"Malformed data URL.")}return sT(t)}(t.rest)}(t),new lT(t).contentType)}throw jE()}function sT(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function cT(e,t){switch(e){case aT.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw KE(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case aT.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw KE(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=atob(t)}catch(c){throw KE(e,"Invalid character found")}for(var u=new Uint8Array(o.length),s=0;s<o.length;s++)u[s]=o.charCodeAt(s);return u}var lT=ye((function e(t){ve(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw KE(aT.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}));var fT=function(){function e(t,n){ve(this,e);var r=0,i="";YE(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return ye(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(YE(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(JE()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(iT.apply(null,i))}var a=n.map((function(e){return $E(e)?uT(aT.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var u=new Uint8Array(o),s=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)u[s++]=e[t]})),new e(u,!0)}}]),e}();function hT(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function dT(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function pT(e,t){return t}var vT=ye((function e(t,n,r,i){ve(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||pT})),mT=null;function yT(){if(mT)return mT;var e=[];e.push(new vT("bucket")),e.push(new vT("generation")),e.push(new vT("metageneration")),e.push(new vT("name","fullPath",!0));var t=new vT("name");t.xform=function(e,t){return function(e){return!$E(e)||e.length<2?e:dT(e)}(t)},e.push(t);var n=new vT("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new vT("timeCreated")),e.push(new vT("updated")),e.push(new vT("md5Hash",null,!0)),e.push(new vT("cacheControl",null,!0)),e.push(new vT("contentDisposition",null,!0)),e.push(new vT("contentEncoding",null,!0)),e.push(new vT("contentLanguage",null,!0)),e.push(new vT("contentType",null,!0)),e.push(new vT("metadata","customMetadata",!0)),mT=e}function gT(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new WE(n,r);return t._makeStorageReference(i)}})}(r,e),r}function kT(e,t,n){var r=hT(t);return null===r?null:gT(e,r,n)}function wT(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}function bT(e,t,n){var r=hT(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes){var i,a=ge(n.prefixes);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),u=e._makeStorageReference(new WE(t,o));r.prefixes.push(u)}}catch(h){a.e(h)}finally{a.f()}}if(n.items){var s,c=ge(n.items);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=e._makeStorageReference(new WE(t,l.name));r.items.push(f)}}catch(h){c.e(h)}finally{c.f()}}return r}(e,t,r)}var xT=ye((function e(t,n,r,i){ve(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function _T(e){if(!e)throw jE()}function IT(e,t){return function(n,r){var i=kT(e,r,t);return _T(null!==i),i}}function ST(e,t){return function(n,r){var i=kT(e,r,t);return _T(null!==i),function(e,t,n,r){var i=hT(t);if(null===i)return null;if(!$E(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return ZE("/b/"+o(i)+"/o/"+o(a),n,r)+eT({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function ET(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new ME("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new ME("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new ME("quota-exceeded","Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new ME("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function TT(e){var t=ET(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new ME("object-not-found","Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function CT(e,t,n){var r=ZE(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new xT(r,"GET",IT(e,n),i);return a.errorHandler=TT(t),a}function NT(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=ZE(t.bucketOnlyServerUrl(),e.host,e._protocol),u=e.maxOperationRetryTime,s=new xT(o,"GET",function(e,t){return function(n,r){var i=bT(e,t,r);return _T(null!==i),i}}(e,t.bucket),u);return s.urlParams=a,s.errorHandler=ET(t),s}function AT(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function RT(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var u=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+u;var s=AT(t,r,i),c="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+wT(s,n)+"\r\n--"+u+"\r\nContent-Type: "+s.contentType+"\r\n\r\n",l="\r\n--"+u+"--",f=fT.getBlob(c,r,l);if(null===f)throw VE();var h={name:s.fullPath},d=ZE(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new xT(d,"POST",IT(e,n),p);return v.urlParams=h,v.headers=o,v.body=f.uploadData(),v.errorHandler=ET(t),v}var DT=ye((function e(t,n,r,i){ve(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function PT(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){_T(!1)}return _T(!!n&&-1!==(t||["active"]).indexOf(n)),n}var OT=262144;function LT(e,t,n,r,i,a,o,u){var s=new DT(0,0);if(o?(s.current=o.current,s.total=o.total):(s.current=0,s.total=r.size()),r.size()!==s.total)throw new ME("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=s.total-s.current,l=c;i>0&&(l=Math.min(l,i));var f=s.current,h=f+l,d={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(s.current)},p=r.slice(f,h);if(null===p)throw VE();var v=t.maxUploadRetryTime,m=new xT(n,"POST",(function(e,n){var i,o=PT(e,["active","final"]),u=s.current+l,c=r.size();return i="final"===o?IT(t,a)(e,n):null,new DT(u,c,"final"===o,i)}),v);return m.headers=d,m.body=p.uploadData(),m.progressCallback=u||null,m.errorHandler=ET(e),m}var MT={STATE_CHANGED:"state_changed"},FT={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function jT(e){switch(e){case"running":case"pausing":case"canceling":return FT.RUNNING;case"paused":return FT.PAUSED;case"success":return FT.SUCCESS;case"canceled":return FT.CANCELED;default:return FT.ERROR}}var UT=ye((function e(t,n,r){ve(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function VT(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var BT=function(){function e(){var t=this;ve(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=HE.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=HE.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=HE.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return ye(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw GE("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw GE("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw GE("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw GE("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw GE("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),zT=function(e){be(n,e);var t=Ee(n);function n(){return ve(this,n),t.apply(this,arguments)}return ye(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(BT);function qT(){return new zT}var KT=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;ve(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=yT(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=e,r._transition("error"))},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return ye(e,[{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=c(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=AT(t,r,i),u={name:o.fullPath},s=ZE(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=wT(o,n),f=e.maxUploadRetryTime,h=new xT(s,"POST",(function(e){var t;PT(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){_T(!1)}return _T($E(t)),t}),f);return h.urlParams=u,h.headers=c,h.body=l,h.errorHandler=ET(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,qT,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new xT(n,"POST",(function(e){var t=PT(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){_T(!1)}n||_T(!1);var i=Number(n);return _T(!isNaN(i)),new DT(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=ET(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,qT,n,r);e._request=a,a.getPromise().then((function(t){e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=OT*this._chunkMultiplier,n=new DT(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=LT(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(s){return e._error=s,void e._transition("error")}var u=e._ref.storage._makeRequest(o,qT,i,a);e._request=u,u.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){OT*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=CT(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,qT,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=RT(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,qT,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=UE(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=jT(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new UT(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(jT(this._state)){case FT.SUCCESS:VT(this._resolve.bind(null,this.snapshot))();break;case FT.CANCELED:case FT.ERROR:VT(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(jT(this._state)){case FT.RUNNING:case FT.PAUSED:e.next&&VT(e.next.bind(e,this.snapshot))();break;case FT.SUCCESS:e.complete&&VT(e.complete.bind(e))();break;default:e.error&&VT(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),GT=function(){function e(t,n){ve(this,e),this._service=t,this._location=n instanceof WE?n:WE.makeFromUrl(n,t.host)}return ye(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new WE(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return dT(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new WE(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw qE(e)}}]),e}();function HT(e,t,n){return WT.apply(this,arguments)}function WT(){return(WT=ut(rt().mark((function e(t,n,r){var i,a,o,u;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageToken:r},e.next=3,QT(t,o);case 3:if(u=e.sent,(i=n.prefixes).push.apply(i,at(u.prefixes)),(a=n.items).push.apply(a,at(u.items)),null==u.nextPageToken){e.next=9;break}return e.next=9,HT(t,n,u.nextPageToken);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function QT(e,t){null!=t&&"number"===typeof t.maxResults&&XE("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=NT(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,qT)}function $T(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=ZE(t.fullServerUrl(),e.host,e._protocol),a=wT(n,r),o=e.maxOperationRetryTime,u=new xT(i,"PATCH",IT(e,r),o);return u.headers={"Content-Type":"application/json; charset=utf-8"},u.body=a,u.errorHandler=TT(t),u}(e.storage,e._location,t,yT());return e.storage.makeRequestWithTokens(n,qT)}function YT(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=ZE(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new xT(r,"GET",ST(e,n),i);return a.errorHandler=TT(t),a}(e.storage,e._location,yT());return e.storage.makeRequestWithTokens(t,qT).then((function(e){if(null===e)throw new ME("no-download-url","The given file does not have any download URLs.");return e}))}function JT(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=ZE(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new xT(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=TT(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,qT)}function XT(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new WE(e._location.bucket,n);return new GT(e.storage,r)}function ZT(e,t){if(e instanceof rC){var n=e;if(null==n._bucket)throw new ME("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new GT(n,n._bucket);return null!=t?ZT(r,t):r}return void 0!==t?XT(e,t):e}function eC(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof rC)return new GT(e,t);throw BE("To use ref(service, url), the first argument must be a Storage instance.")}return ZT(e,t)}function tC(e,t){var n=null===t||void 0===t?void 0:t.storageBucket;return null==n?null:WE.makeFromBucketSpec(n,e)}function nC(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:Le(i,e.app.options.projectId))}var rC=function(){function e(t,n,r,i,a){ve(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=LE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?WE.makeFromBucketSpec(i,this._host):tC(this._host,this.app.options)}return ye(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=WE.makeFromBucketSpec(this._url,e):this._bucket=tC(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){XE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){XE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=ut(rt().mark((function e(){var t,n;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=ut(rt().mark((function e(){var t,n;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new GT(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this;if(this._deleted)return new QE(zE());var a=function(e,t,n,r,i,a){var o=eT(e.urlParams),u=e.url+o,s=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(s,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(s,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(s,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(s,r),new tT(u,e.method,s,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}(e,this._appId,n,r,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then((function(){return i._requests.delete(a)}),(function(){return i._requests.delete(a)})),a}},{key:"makeRequestWithTokens",value:function(){var e=ut(rt().mark((function e(t,n){var r,i,a,o;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=c(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),iC="@firebase/storage",aC="0.9.8",oC="storage";function uC(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new KT(e,new fT(t),n)}(e=nt(e),t,n)}function sC(e){return function(e){e._throwIfRoot("getMetadata");var t=CT(e.storage,e._location,yT());return e.storage.makeRequestWithTokens(t,qT)}(e=nt(e))}function cC(e){return function(e){var t={prefixes:[],items:[]};return HT(e,t).then((function(){return t}))}(e=nt(e))}function lC(e,t){return eC(e=nt(e),t)}function fC(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};nC(e,t,n,r)}function hC(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new rC(r,i,a,n,tn)}Qt(new st(oC,hC,"PUBLIC").setMultipleInstances(!0)),sn(iC,aC,""),sn(iC,aC,"esm2017");var dC=function(){function e(t,n,r){ve(this,e),this._delegate=t,this.task=n,this.ref=r}return ye(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),pC=function(){function e(t,n){ve(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return ye(e,[{key:"snapshot",get:function(){return new dC(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new dC(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new dC(e,i,i._ref))}:{next:t.next?function(e){return t.next(new dC(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)}}]),e}(),vC=function(){function e(t,n){ve(this,e),this._delegate=t,this._service=n}return ye(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new mC(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new mC(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),mC=function(){function e(t,n){ve(this,e),this._delegate=t,this.storage=n}return ye(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return XT(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new pC(uC(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:aT.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=uT(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new pC(new KT(this._delegate,new fT(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return cC(this._delegate).then((function(t){return new vC(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return QT(e=nt(e),t)}(this._delegate,e||void 0).then((function(e){return new vC(e,t.storage)}))}},{key:"getMetadata",value:function(){return sC(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return $T(e=nt(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return YT(nt(this._delegate))}},{key:"delete",value:function(){return this._throwIfRoot("delete"),JT(nt(this._delegate))}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw qE(e)}}]),e}(),yC=function(){function e(t,n){ve(this,e),this.app=t,this._delegate=n}return ye(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(gC(e))throw BE("ref() expected a child path but got a URL, use refFromURL instead.");return new mC(lC(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!gC(e))throw BE("refFromURL() expected a full URL but got a child path, use ref() instead.");try{WE.makeFromUrl(e,this._delegate.host)}catch(t){throw BE("refFromUrl() expected a valid full URL but got an invalid one.")}return new mC(lC(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};fC(this._delegate,e,t,n)}}]),e}();function gC(e){return/^[A-Za-z]+:\/\//.test(e)}function kC(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new yC(r,i)}!function(e){var t={TaskState:FT,TaskEvent:MT,StringFormat:aT,Storage:yC,Reference:mC};e.INTERNAL.registerComponent(new st("storage-compat",kC,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.1.16")}(Dn);Dn.initializeApp({apiKey:"AIzaSyAxHc42wsmBY16r3VyP-9soYQe-5jUvdEE",authDomain:"olx-com-15368.firebaseapp.com",projectId:"olx-com-15368",storageBucket:"olx-com-15368.appspot.com",messagingSenderId:"233743171422",appId:"1:233743171422:web:0d4d172d635b40cd14d9cf",measurementId:"G-CN23HP4GXP"});var wC=Dn.storage(),bC=Dn,xC=function(){var e=c((0,r.useState)(""),2),t=e[0],n=e[1],i=c((0,r.useState)(""),2),a=i[0],o=i[1],u=c((0,r.useState)(""),2),s=u[0],l=u[1],f=c((0,r.useState)(null),2),h=f[0],d=f[1],p=(0,r.useContext)(Y).firebase,v=(0,r.useContext)(J).user,m=j(),y=new Date;return(0,K.jsxs)(r.Fragment,{children:[(0,K.jsx)(Z,{}),(0,K.jsx)("card",{children:(0,K.jsxs)("div",{className:"centerDiv",children:[(0,K.jsx)("label",{htmlFor:"fname",children:"Name"}),(0,K.jsx)("br",{}),(0,K.jsx)("input",{className:"input",type:"text",id:"fname",value:t,onChange:function(e){n(e.target.value)},name:"Name",defaultValue:"John"}),(0,K.jsx)("br",{}),(0,K.jsx)("label",{htmlFor:"fname",children:"Category"}),(0,K.jsx)("br",{}),(0,K.jsx)("input",{className:"input",type:"text",value:a,onChange:function(e){o(e.target.value)},id:"fname",name:"category",defaultValue:"John"}),(0,K.jsx)("br",{}),(0,K.jsx)("label",{htmlFor:"fname",children:"Price"}),(0,K.jsx)("br",{}),(0,K.jsx)("input",{className:"input",type:"number",value:s,onChange:function(e){l(e.target.value)},id:"fname",name:"Price"}),(0,K.jsx)("br",{}),(0,K.jsx)("br",{}),(0,K.jsx)("img",{alt:"Posts",width:"200px",height:"200px",src:h?URL.createObjectURL(h):""}),(0,K.jsx)("br",{}),(0,K.jsx)("input",{onChange:function(e){d(e.target.files[0])},type:"file"}),(0,K.jsx)("br",{}),(0,K.jsx)("br",{}),(0,K.jsx)("button",{className:"reset",onClick:function(){n(""),o(""),l(""),d(null)},children:"Reset"}),(0,K.jsx)("button",{onClick:function(){(t||a||""==s)&&alert("please enter all the details "),console.log("hello"),wC.ref("/Img/".concat(h.name)).put(h).then((function(e){e.ref.getDownloadURL().then((function(e){p.firestore().collection("products").add({name:t,category:a,price:s,url:e,userId:v.uid,createdAt:y.toDateString()}),alert("product added")}))}))},className:"uploadBtn",children:"upload and Submit"}),(0,K.jsx)("button",{className:"uploadBtn",onClick:function(){m("/sellme")},children:"home"})]})})]})},_C=function(){return(0,K.jsxs)(r.Fragment,{children:[(0,K.jsx)(Z,{}),(0,K.jsx)(xC,{})]})};var IC=function(){var e=c((0,r.useState)(),2),t=e[0],n=e[1],i=(0,r.useContext)(ae).postDetails,a=(0,r.useContext)(Y).firebase;return(0,r.useEffect)((function(){var e=i.userId;a.firestore().collection("users").where("id","==",e).get().then((function(e){e.forEach((function(e){n(e.data())}))}))}),[]),(0,K.jsxs)("div",{className:"viewParentDiv",children:[(0,K.jsx)("div",{className:"imageShowDiv",children:(0,K.jsx)("img",{src:i.url,alt:""})}),(0,K.jsxs)("div",{className:"rightSection",children:[(0,K.jsxs)("div",{className:"productDetails",children:[(0,K.jsxs)("p",{children:["\u20b9 ",i.price," "]}),(0,K.jsx)("span",{children:i.category}),(0,K.jsx)("p",{children:i.name}),(0,K.jsx)("span",{children:i.createdAt})]}),t&&(0,K.jsxs)("div",{className:"contactDetails",children:[(0,K.jsx)("p",{children:"Seller details"}),(0,K.jsx)("p",{children:t.username}),(0,K.jsx)("p",{children:t.phone})]})]})]})};var SC=function(e){return(0,K.jsxs)("div",{children:[(0,K.jsx)(Z,{}),(0,K.jsx)(IC,{})]})};var EC=function(){var e=(0,r.useContext)(J).setUser,t=(0,r.useContext)(Y).firebase;return(0,r.useEffect)((function(){t.auth().onAuthStateChanged((function(t){e(t)}))})),(0,K.jsx)("div",{children:(0,K.jsx)(oe,{children:(0,K.jsxs)(z,{children:[(0,K.jsx)(V,{exact:!0,path:"/sellme",element:(0,K.jsx)(ce,{})}),(0,K.jsx)(V,{path:"/view",element:(0,K.jsx)(SC,{})}),(0,K.jsx)(V,{path:"/Signup",element:(0,K.jsx)(he,{})}),(0,K.jsx)(V,{path:"/login",element:(0,K.jsx)(pe,{})}),(0,K.jsx)(V,{path:"/create",element:(0,K.jsx)(_C,{})})]})})})};function TC(e){var n=e.basename,i=e.children,a=e.window,o=(0,r.useRef)();null==o.current&&(o.current=function(e){void 0===e&&(e={});var n=e.window,r=void 0===n?document.defaultView:n,i=r.history;function a(){var e=r.location,t=e.pathname,n=e.search,a=e.hash,o=i.state||{};return[o.idx,f({pathname:t,search:n,hash:a,state:o.usr||null,key:o.key||"default"})]}var o=null;r.addEventListener(d,(function(){if(o)b.call(o),o=null;else{var e=t.Pop,n=a(),r=n[0],i=n[1];if(b.length){if(null!=r){var u=c-r;u&&(o={action:e,location:i,retry:function(){T(-1*u)}},T(u))}}else E(e)}}));var u=t.Pop,s=a(),c=s[0],k=s[1],w=v(),b=v();function x(e){return"string"===typeof e?e:y(e)}function _(e,t){return void 0===t&&(t=null),f(l({pathname:k.pathname,hash:"",search:""},"string"===typeof e?g(e):e,{state:t,key:m()}))}function I(e,t){return[{usr:e.state,key:e.key,idx:t},x(e)]}function S(e,t,n){return!b.length||(b.call({action:e,location:t,retry:n}),!1)}function E(e){u=e;var t=a();c=t[0],k=t[1],w.call({action:u,location:k})}function T(e){i.go(e)}null==c&&(c=0,i.replaceState(l({},i.state,{idx:c}),""));var C={get action(){return u},get location(){return k},createHref:x,push:function e(n,a){var o=t.Push,u=_(n,a);if(S(o,u,(function(){e(n,a)}))){var s=I(u,c+1),l=s[0],f=s[1];try{i.pushState(l,"",f)}catch(h){r.location.assign(f)}E(o)}},replace:function e(n,r){var a=t.Replace,o=_(n,r);if(S(a,o,(function(){e(n,r)}))){var u=I(o,c),s=u[0],l=u[1];i.replaceState(s,"",l),E(a)}},go:T,back:function(){T(-1)},forward:function(){T(1)},listen:function(e){return w.push(e)},block:function(e){var t=b.push(e);return 1===b.length&&r.addEventListener(h,p),function(){t(),b.length||r.removeEventListener(h,p)}}};return C}({window:a}));var u=o.current,s=c((0,r.useState)({action:u.action,location:u.location}),2),k=s[0],w=s[1];return(0,r.useLayoutEffect)((function(){return u.listen(w)}),[u]),(0,r.createElement)(B,{basename:n,children:i,location:k.location,navigationType:k.action,navigator:u})}i.createRoot(document.getElementById("root")).render((0,K.jsx)(r.StrictMode,{children:(0,K.jsx)(Y.Provider,{value:{firebase:bC},children:(0,K.jsx)(TC,{children:(0,K.jsx)(X,{children:(0,K.jsx)(EC,{})})})})}))}()}();
//# sourceMappingURL=main.d3e7933f.js.map